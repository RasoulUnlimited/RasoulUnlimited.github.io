!function(){"use strict";if(!("serviceWorker"in navigator))return;if(!window.isSecureContext)return void console.warn("Service workers require HTTPS (or localhost).");const e=(document.documentElement.getAttribute("lang")||"").toLowerCase(),n=(navigator.language||"").toLowerCase();(e||n).indexOf("fa");let t=null,r=null,i=!1,o=!1;function a(e){"function"==typeof window.createToast&&window.createToast(e)}function c(){i||(i=!0,a("Offline support enabled"))}function s(){o||(o=!0,a("A new version is available. Refresh to update."))}function l(e){e&&e.addEventListener("statechange",function n(){"installed"===e.state&&(navigator.serviceWorker.controller?s():c(),e.removeEventListener("statechange",n))})}function d(e){t&&navigator.onLine&&t.update().catch(n=>{console.warn("Service worker update check failed ("+e+"):",n)})}function v(e){e&&(t=e,e.waiting&&s(),l(e.installing),"function"==typeof e.addEventListener&&e.addEventListener("updatefound",()=>{l(e.installing)}),navigator.serviceWorker.controller||navigator.serviceWorker.ready.then(()=>{navigator.serviceWorker.controller&&c()}).catch(()=>{}),navigator.serviceWorker.addEventListener("controllerchange",()=>{o=!1}),r||(r=window.setInterval(()=>{d("interval")},36e5),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&d("visibility")}),window.addEventListener("online",()=>{d("online")}),window.addEventListener("beforeunload",()=>{r&&(window.clearInterval(r),r=null)})),d("post-register"))}function u(){navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(v).catch(e=>{console.error("Service Worker registration failed:",e)})}"complete"===document.readyState?u():window.addEventListener("load",u,{once:!0})}();
//# sourceMappingURL=sw-register.min.js.map
