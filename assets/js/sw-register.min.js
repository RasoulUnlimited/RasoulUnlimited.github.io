"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){if("function"==typeof createToast){var t=document.documentElement.lang.startsWith("fa")?"پشتیبانی آفلاین فعال شد":"Offline support enabled";createToast(t)}function n(){if("function"==typeof createToast){var e=document.documentElement.lang.startsWith("fa")?"نسخهٔ جدید در دسترس است. برای بروزرسانی صفحه را تازه کنید.":"New version available. Refresh to update.";createToast(e)}}e.waiting&&n(),e.addEventListener("updatefound",function(){var t=e.installing;t&&t.addEventListener("statechange",function(){"installed"===t.state&&navigator.serviceWorker.controller&&n()})})}).catch(function(e){console.error("SW registration failed",e)})});