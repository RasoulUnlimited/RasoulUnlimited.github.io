!function(){"use strict";if("serviceWorker"in navigator)if(window.isSecureContext){var e=0===(document.documentElement.getAttribute("lang")||"").toLowerCase().indexOf("fa");window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(i).catch(function(e){console.error("SW registration failed:",e)})})}else console.warn("Service workers require a secure context (HTTPS or localhost).");function t(e){"function"==typeof window.createToast&&window.createToast(e)}function n(){t(e?"پشتیبانی آفلاین فعال شد":"Offline support enabled")}function o(){t(e?"نسخهٔ جدید در دسترس است. برای بروزرسانی صفحه را تازه کنید.":"New version available. Refresh to update.")}function i(e){e.active&&n(),e.waiting&&o(),e.addEventListener("updatefound",function(){var t=e.installing;t&&t.addEventListener("statechange",function(){"installed"===t.state&&(navigator.serviceWorker.controller?o():n())})})}}();