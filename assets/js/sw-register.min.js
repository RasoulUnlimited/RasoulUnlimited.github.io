!function(){"use strict";if(!("serviceWorker"in navigator))return;if(!window.isSecureContext)return void console.warn("Service workers require HTTPS (or localhost).");const e=(document.documentElement.getAttribute("lang")||"").toLowerCase(),n=(navigator.language||"").toLowerCase();(e||n).indexOf("fa");let t=null,i=null,r=!1,o=!1;function a(e,n={}){if(!e||"function"!=typeof window.createToast)return;const t={kind:"info",duration:2600,...n};window.createToast(e,t)}function s(){r||(r=!0,a("Offline support enabled",{id:"sw-ready-toast",kind:"success",duration:2200}))}function c(){o||(o=!0,a("A new version is available. Refresh to update.",{id:"sw-update-toast",kind:"info",duration:3200}))}function d(e){e&&e.addEventListener("statechange",function n(){"installed"===e.state&&(navigator.serviceWorker.controller?c():s(),e.removeEventListener("statechange",n))})}function l(e){t&&navigator.onLine&&t.update().catch(n=>{console.warn("Service worker update check failed ("+e+"):",n)})}function u(e){e&&(t=e,e.waiting&&c(),d(e.installing),"function"==typeof e.addEventListener&&e.addEventListener("updatefound",()=>{d(e.installing)}),navigator.serviceWorker.controller||navigator.serviceWorker.ready.then(()=>{navigator.serviceWorker.controller&&s()}).catch(()=>{}),navigator.serviceWorker.addEventListener("controllerchange",()=>{o=!1}),i||(i=window.setInterval(()=>{l("interval")},36e5),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l("visibility")}),window.addEventListener("online",()=>{l("online")}),window.addEventListener("beforeunload",()=>{i&&(window.clearInterval(i),i=null)})),l("post-register"))}function v(){navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(u).catch(e=>{console.error("Service Worker registration failed:",e)})}"complete"===document.readyState?v():window.addEventListener("load",v,{once:!0})}();
//# sourceMappingURL=sw-register.min.js.map
