!function(){"use strict";function e(){const e="__theme_pref__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),localStorage}catch(e){return null}}window.langStrings||(console.warn("No language strings loaded"),window.langStrings={});const t=e(),n=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,o=!(!n||!n.matches),d=t?.getItem("theme")||null;function i(e){if(!e)return;const t=document.createElement("div");t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.className="dynamic-toast",t.textContent=String(e);const n=document.querySelectorAll(".dynamic-toast");n.length>3&&n.forEach((e,t)=>{0===t&&e.remove()}),document.body.appendChild(t),requestAnimationFrame(()=>t.classList.add("show")),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{t.parentNode&&t.remove()},300)},3e3)}function c(e,t){const n="dark"===e;document.body.classList.toggle("dark-mode",n),document.body.classList.toggle("light-mode",!n),document.documentElement.setAttribute("data-theme",e);const o=document.getElementById("theme-toggle");if(o&&(o.checked=n,o.setAttribute("aria-checked",String(n))),t&&"function"==typeof window.langStrings.themeChanged){const t=window.langStrings.themeChanged(e);t&&i(t)}}if("function"!=typeof window.createToast&&(window.createToast=i),c("dark"===d||"light"===d?d:o?"dark":"light"),n){const e=function(e){t?.getItem("theme")||c(e.matches?"dark":"light")};"function"==typeof n.addEventListener?n.addEventListener("change",e):"function"==typeof n.addListener&&n.addListener(e)}function a(){const e=document.getElementById("theme-toggle");e&&(e.setAttribute("aria-checked",String(!!e.checked)),e.setAttribute("role","switch"),e.addEventListener("change",()=>{const n=e.checked?"dark":"light";c(n,!0);try{t?.setItem("theme",n)}catch(e){}}),e.addEventListener("keydown",n=>{if(" "===n.key||"Enter"===n.key){n.preventDefault(),e.checked=!e.checked;const o=e.checked?"dark":"light";c(o,!0);try{t?.setItem("theme",o)}catch(e){}}}))}a(),document.addEventListener("includesLoaded",a,!1);let s=!1,r=0,l=!1;function m(){const e=window.innerHeight+r,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)||0;if(e<t-100&&(s=!1),!s&&e>=t-50&&t>0)if(s=!0,"string"==typeof window.langStrings.endOfPage)i(window.langStrings.endOfPage);else if("function"==typeof window.langStrings.endOfPage){const e=window.langStrings.endOfPage();e&&i(e)}l=!1}window.addEventListener("scroll",()=>{r=window.scrollY||window.pageYOffset||0,l||(window.requestAnimationFrame(m),l=!0)},{passive:!0});const g=document.getElementById("current-year")||document.getElementById("footer-year");g&&(g.textContent=(new Date).getFullYear())}();