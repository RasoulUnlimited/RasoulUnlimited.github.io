!function(){"use strict";window.langStrings||(window.langStrings={});const e=function(){const e="__theme_pref__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),localStorage}catch(e){return null}}(),t="asset-fallback-failed",n="ru:network-status",o=new Set;let r=0;const i=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,c=!(!i||!i.matches),s="theme",a="app:theme";function d(e){return"dark"===e||"light"===e}function l(){if(!e)return null;const t=e.getItem(s);if(d(t))return t;const n=e.getItem(a);if(!d(n))return null;try{e.setItem(s,n),e.removeItem(a)}catch(e){}return n}const u=l(),m=window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,f=!(!m||!m.matches);function g(e,t="default"){if(!e)return;if(!document.body)return void console.warn("Cannot show toast: document.body not ready");const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.className=`dynamic-toast ${t}`;let o="";"success"===t?o='<i class="fas fa-check-circle" aria-hidden="true"></i> ':"error"===t?o='<i class="fas fa-exclamation-circle" aria-hidden="true"></i> ':"info"===t&&(o='<i class="fas fa-info-circle" aria-hidden="true"></i> '),n.innerHTML=`${o}<span>${String(e)}</span>`;const r=document.querySelectorAll(".dynamic-toast");r.length>3&&r.forEach((e,t)=>{0===t&&e.parentNode&&e.remove()}),document.body.appendChild(n),requestAnimationFrame(()=>n.classList.add("show")),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.parentNode&&n.remove()},300)},3e3)}function w(e,t){const o=!!e;if(document.documentElement.classList.toggle("online",o),document.documentElement.classList.toggle("offline",!o),document.documentElement.setAttribute("data-network-status",o?"online":"offline"),document.body&&(document.body.classList.toggle("online",o),document.body.classList.toggle("offline",!o)),function(e){const t={online:e,timestamp:Date.now()};try{window.dispatchEvent(new CustomEvent(n,{detail:t}))}catch(e){try{const e=document.createEvent("CustomEvent");e.initCustomEvent(n,!1,!1,t),window.dispatchEvent(e)}catch{}}}(o),!t||"function"!=typeof window.createToast)return;const i=Date.now();i-r<1200||(r=i,window.createToast(function(e){const t=window.langStrings||{},n=e?["backOnline","online","connectionRestored"]:["offline","connectionLost"];for(const e of n){const n=t[e];if("function"==typeof n){const e=n();if("string"==typeof e&&e.trim())return e}else if("string"==typeof n&&n.trim())return n}return e?"Connection restored.":"You are offline. Some features may be unavailable."}(o),o?"success":"info"))}function p(e){const t=function(e){if(!e)return null;try{const t=new URL(e,window.location.href);return t.origin!==window.location.origin?null:t}catch{return null}}(e);if(!t)return null;const n=new URL(t.toString()),o=n.pathname;return/\.min\.js$/i.test(o)?(n.pathname=o.replace(/\.min\.js$/i,".js"),n.toString()):/\.min\.css$/i.test(o)?(n.pathname=o.replace(/\.min\.css$/i,".css"),n.toString()):null}function h(e,t,n){const r=`${t}::${n}`;if(o.has(r))return!1;o.add(r),e.setAttribute("data-asset-failed","true"),document.documentElement.classList.add("asset-fallback-active");const i=Number(document.documentElement.dataset.assetFallbackCount||"0");return document.documentElement.dataset.assetFallbackCount=String(i+1),!0}function y(e,t){const n="dark"===e,o=!!t;document.body.classList.toggle("dark-mode",n),document.body.classList.toggle("light-mode",!n),document.documentElement.setAttribute("data-theme",e);const r=document.getElementById("theme-toggle");if(r&&(r.checked=n,r.setAttribute("aria-checked",String(n))),o&&"function"==typeof window.langStrings.themeChanged){const t=window.langStrings.themeChanged(e);t&&g(t)}}if("function"!=typeof window.createToast&&(window.createToast=g),w(!1!==navigator.onLine,!1),window.addEventListener("online",()=>w(!0,!0)),window.addEventListener("offline",()=>w(!1,!0)),window.addEventListener("error",e=>{const n=e.target;if(n&&n!==window){if("undefined"!=typeof HTMLScriptElement&&n instanceof HTMLScriptElement){const e=n.src||"",o=p(e);if(!o)return;if(!h(n,e,o))return;return void function(e,n){const o=document.createElement("script");o.src=n,o.defer=!!e.defer,o.async=!!e.async,e.type&&(o.type=e.type),e.crossOrigin&&(o.crossOrigin=e.crossOrigin),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.nonce&&(o.nonce=e.nonce),o.setAttribute("data-asset-fallback","true"),o.setAttribute("data-asset-fallback-from",e.src||""),o.addEventListener("error",()=>{document.documentElement.classList.add(t)},{once:!0}),e.insertAdjacentElement("afterend",o)}(n,o)}if("undefined"!=typeof HTMLLinkElement&&n instanceof HTMLLinkElement){const e=n.href||"",o=p(e);if(!o)return;if(!h(n,e,o))return;!function(e,n){if("stylesheet"!==(e.rel||"").toLowerCase())return;const o=document.createElement("link");o.rel="stylesheet",o.href=n,e.media&&(o.media=e.media),e.crossOrigin&&(o.crossOrigin=e.crossOrigin),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.nonce&&(o.nonce=e.nonce),o.setAttribute("data-asset-fallback","true"),o.setAttribute("data-asset-fallback-from",e.href||""),o.addEventListener("error",()=>{document.documentElement.classList.add(t)},{once:!0}),e.insertAdjacentElement("afterend",o)}(n,o)}}},!0),y("dark"===u||"light"===u?u:c?"dark":"light"),i){const e=function(e){l()||y(e.matches?"dark":"light")};"function"==typeof i.addEventListener?i.addEventListener("change",e):"function"==typeof i.addListener&&i.addListener(e)}function E(){const t=document.getElementById("theme-toggle");if(!t)return;if("true"===t.dataset.themeToggleInit)return;t.dataset.themeToggleInit="true";const n=document.documentElement.getAttribute("data-theme");"dark"!==n&&"light"!==n||(t.checked="dark"===n),t.setAttribute("aria-checked",String(!!t.checked)),t.setAttribute("role","switch"),t.addEventListener("change",()=>{const n=t.checked?"dark":"light";y(n,!0);try{e?.setItem(s,n)}catch(e){}}),t.addEventListener("keydown",n=>{if(" "===n.key||"Enter"===n.key){n.preventDefault(),t.checked=!t.checked;const o=t.checked?"dark":"light";y(o,!0);try{e?.setItem(s,o)}catch(e){}}})}E(),document.addEventListener("includesLoaded",E,!1);let b=!1,v=0,L=!1;window.addEventListener("scroll",()=>{v=window.scrollY||window.pageYOffset||0,L||(window.requestAnimationFrame(()=>{!function(){const e=window.innerHeight+v,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)||0;if(e<t-100&&(b=!1),!b&&e>=t-50&&t>0)if(b=!0,"string"==typeof window.langStrings.endOfPage)g(window.langStrings.endOfPage);else if("function"==typeof window.langStrings.endOfPage){const e=window.langStrings.endOfPage();e&&g(e)}L=!1}(),function(){const e=document.getElementById("scroll-progress-bar");if(!e)return;const t=window.scrollY||document.documentElement.scrollTop||0,n=document.documentElement.scrollHeight-document.documentElement.clientHeight;if(n<=0)return e.style.width="0%",void e.setAttribute("aria-valuenow","0");const o=t/n*100,r=Math.max(0,Math.min(100,o));e.style.width=r+"%",e.setAttribute("aria-valuenow",Math.round(r))}()}),L=!0)},{passive:!0});const k=document.getElementById("current-year")||document.getElementById("footer-year");k&&(k.textContent=(new Date).getFullYear());const T=document.getElementById("back-to-top");function S(e){const t=window.langStrings||{},n={success:["copySuccess","emailCopied"],error:["copyError","emailCopyError"],unsupported:["copyUnsupported","clipboardUnsupported"]}[e]||[];for(const e of n){const n=t[e];if("function"==typeof n){const e=n();if("string"==typeof e&&e.trim())return e}else if("string"==typeof n&&n.trim())return n}const o=(document.documentElement.lang||"").toLowerCase().startsWith("fa"),r={success:o?"ایمیل کپی شد.":"Email copied.",error:o?"کپی با مشکل مواجه شد.":"Copy failed.",unsupported:o?"مرورگر شما از کپی خودکار پشتیبانی نمی‌کند.":"Your browser does not support automatic copy."};return r[e]||r.error}function A(e){if(!document.body)return!1;const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.select();try{return!!document.execCommand("copy")}catch{return!1}finally{t.remove()}}function C(e){const t=e.innerHTML;e.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',e.classList.add("copied"),window.createToast&&window.createToast(S("success")),setTimeout(()=>{e.innerHTML=t,e.classList.remove("copied")},2e3)}T&&(window.addEventListener("scroll",()=>{window.scrollY>300?T.classList.add("show"):T.classList.remove("show")},{passive:!0}),T.addEventListener("click",()=>{window.scrollTo({top:0,behavior:f?"auto":"smooth"})}));document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=e.getAttribute("data-copy");n?navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(()=>{C(e)}).catch(t=>{console.error("Failed to copy via Clipboard API:",t),A(n)?C(e):window.createToast&&window.createToast(S("error"))}):A(n)?C(e):window.createToast&&window.createToast(S("unsupported")):console.warn("No data-copy attribute found on .copy-btn")})}),document.addEventListener("click",function(e){const t=e.target;if(!(t instanceof Element))return;const n=t.closest(".btn, button, .cta-button, .hero-btn");if(n){const t=n.getBoundingClientRect(),o=e.clientX-t.left,r=e.clientY-t.top,i=document.createElement("span");i.className="ripple",i.style.left=`${o}px`,i.style.top=`${r}px`,n.appendChild(i),setTimeout(()=>{i.remove()},600)}}),window.triggerSuccess=function(e){e&&(e.classList.add("success-trigger"),setTimeout(()=>{e.classList.remove("success-trigger")},300))}}();
//# sourceMappingURL=main-script-base.min.js.map
