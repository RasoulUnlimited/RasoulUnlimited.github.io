!function(){"use strict";window.langStrings||(window.langStrings={});const e=function(){const e="__theme_pref__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),localStorage}catch(e){return null}}(),t=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,n=!(!t||!t.matches),o="theme",r="app:theme";function i(e){return"dark"===e||"light"===e}function c(){if(!e)return null;const t=e.getItem(o);if(i(t))return t;const n=e.getItem(r);if(!i(n))return null;try{e.setItem(o,n),e.removeItem(r)}catch(e){}return n}const s=c(),a=window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,d=!(!a||!a.matches);function l(e,t="default"){if(!e)return;if(!document.body)return void console.warn("Cannot show toast: document.body not ready");const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.className=`dynamic-toast ${t}`;let o="";"success"===t?o='<i class="fas fa-check-circle" aria-hidden="true"></i> ':"error"===t?o='<i class="fas fa-exclamation-circle" aria-hidden="true"></i> ':"info"===t&&(o='<i class="fas fa-info-circle" aria-hidden="true"></i> '),n.innerHTML=`${o}<span>${String(e)}</span>`;const r=document.querySelectorAll(".dynamic-toast");r.length>3&&r.forEach((e,t)=>{0===t&&e.parentNode&&e.remove()}),document.body.appendChild(n),requestAnimationFrame(()=>n.classList.add("show")),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.parentNode&&n.remove()},300)},3e3)}function u(e,t){const n="dark"===e,o=!!t;document.body.classList.toggle("dark-mode",n),document.body.classList.toggle("light-mode",!n),document.documentElement.setAttribute("data-theme",e);const r=document.getElementById("theme-toggle");if(r&&(r.checked=n,r.setAttribute("aria-checked",String(n))),o&&"function"==typeof window.langStrings.themeChanged){const t=window.langStrings.themeChanged(e);t&&l(t)}}if("function"!=typeof window.createToast&&(window.createToast=l),u("dark"===s||"light"===s?s:n?"dark":"light"),t){const e=function(e){c()||u(e.matches?"dark":"light")};"function"==typeof t.addEventListener?t.addEventListener("change",e):"function"==typeof t.addListener&&t.addListener(e)}function m(){const t=document.getElementById("theme-toggle");t&&"true"!==t.dataset.themeToggleInit&&(t.dataset.themeToggleInit="true",t.setAttribute("aria-checked",String(!!t.checked)),t.setAttribute("role","switch"),t.addEventListener("change",()=>{const n=t.checked?"dark":"light";u(n,!0);try{e?.setItem(o,n)}catch(e){}}),t.addEventListener("keydown",n=>{if(" "===n.key||"Enter"===n.key){n.preventDefault(),t.checked=!t.checked;const r=t.checked?"dark":"light";u(r,!0);try{e?.setItem(o,r)}catch(e){}}}))}m(),document.addEventListener("includesLoaded",m,!1);let g=!1,f=0,w=!1;window.addEventListener("scroll",()=>{f=window.scrollY||window.pageYOffset||0,w||(window.requestAnimationFrame(()=>{!function(){const e=window.innerHeight+f,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)||0;if(e<t-100&&(g=!1),!g&&e>=t-50&&t>0)if(g=!0,"string"==typeof window.langStrings.endOfPage)l(window.langStrings.endOfPage);else if("function"==typeof window.langStrings.endOfPage){const e=window.langStrings.endOfPage();e&&l(e)}w=!1}(),function(){const e=document.getElementById("scroll-progress-bar");if(!e)return;const t=window.scrollY||document.documentElement.scrollTop||0,n=document.documentElement.scrollHeight-document.documentElement.clientHeight;if(n<=0)return e.style.width="0%",void e.setAttribute("aria-valuenow","0");const o=t/n*100,r=Math.max(0,Math.min(100,o));e.style.width=r+"%",e.setAttribute("aria-valuenow",Math.round(r))}()}),w=!0)},{passive:!0});const h=document.getElementById("current-year")||document.getElementById("footer-year");h&&(h.textContent=(new Date).getFullYear());const p=document.getElementById("back-to-top");function y(e){const t=window.langStrings||{},n={success:["copySuccess","emailCopied"],error:["copyError","emailCopyError"],unsupported:["copyUnsupported","clipboardUnsupported"]}[e]||[];for(const e of n){const n=t[e];if("function"==typeof n){const e=n();if("string"==typeof e&&e.trim())return e}else if("string"==typeof n&&n.trim())return n}const o=(document.documentElement.lang||"").toLowerCase().startsWith("fa"),r={success:o?"ایمیل کپی شد.":"Email copied.",error:o?"کپی با مشکل مواجه شد.":"Copy failed.",unsupported:o?"مرورگر شما از کپی خودکار پشتیبانی نمی‌کند.":"Your browser does not support automatic copy."};return r[e]||r.error}p&&(window.addEventListener("scroll",()=>{window.scrollY>300?p.classList.add("show"):p.classList.remove("show")},{passive:!0}),p.addEventListener("click",()=>{window.scrollTo({top:0,behavior:d?"auto":"smooth"})}));document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=e.getAttribute("data-copy");if(n)return navigator.clipboard&&navigator.clipboard.writeText?void navigator.clipboard.writeText(n).then(()=>{const t=e.innerHTML;e.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',e.classList.add("copied"),window.createToast&&window.createToast(y("success")),setTimeout(()=>{e.innerHTML=t,e.classList.remove("copied")},2e3)}).catch(e=>{console.error("Failed to copy: ",e),window.createToast&&window.createToast(y("error"))}):(console.warn("Clipboard API not available"),void(window.createToast&&window.createToast(y("unsupported"))));console.warn("No data-copy attribute found on .copy-btn")})}),document.addEventListener("click",function(e){const t=e.target.closest(".btn, button, .cta-button, .hero-btn");if(t){const n=t.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top,i=document.createElement("span");i.className="ripple",i.style.left=`${o}px`,i.style.top=`${r}px`,t.appendChild(i),setTimeout(()=>{i.remove()},600)}}),window.triggerSuccess=function(e){e&&(e.classList.add("success-trigger"),setTimeout(()=>{e.classList.remove("success-trigger")},300))}}();
//# sourceMappingURL=main-script-base.min.js.map
