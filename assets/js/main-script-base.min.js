!function(){"use strict";function e(){const e="__theme_pref__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),localStorage}catch(e){return null}}window.langStrings||(console.warn("No language strings loaded"),window.langStrings={});const t=e(),n=window.matchMedia("(prefers-color-scheme: dark)").matches,o=t?.getItem("theme");function a(e){const t=document.createElement("div");t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.className="dynamic-toast",t.textContent=e,document.body.appendChild(t),requestAnimationFrame(()=>t.classList.add("show")),setTimeout(()=>{t.classList.remove("show"),t.remove()},3e3)}function d(e,t){document.body.classList.toggle("dark-mode","dark"===e),document.body.classList.toggle("light-mode","light"===e);const n=document.getElementById("theme-toggle");n&&(n.checked="dark"===e,n.setAttribute("aria-checked","dark"===e)),t&&window.langStrings.themeChanged&&a(window.langStrings.themeChanged(e))}function c(){const e=document.getElementById("theme-toggle");e&&(e.setAttribute("aria-checked",e.checked),e.addEventListener("change",()=>{const n=e.checked?"dark":"light";d(n,!0);try{t?.setItem("theme",n)}catch(e){}}))}o?d(o):(d(n?"dark":"light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{t?.getItem("theme")||d(e.matches?"dark":"light")})),c(),document.addEventListener("includesLoaded",c);let i=!1,r=0,s=!1;function l(){!i&&window.innerHeight+r>=document.body.offsetHeight-50&&(i=!0,window.langStrings.endOfPage&&a(window.langStrings.endOfPage)),s=!1}window.addEventListener("scroll",()=>{r=window.scrollY,s||(window.requestAnimationFrame(l),s=!0)},{passive:!0});const g=document.getElementById("current-year")||document.getElementById("footer-year");g&&(g.textContent=(new Date).getFullYear())}();