!function(){"use strict";window.langStrings||(window.langStrings={});const t=function(){const t="__theme_pref__";try{return localStorage.setItem(t,t),localStorage.removeItem(t),localStorage}catch(t){return null}}(),e="asset-fallback-failed",n="ru:network-status",o=new Set;let i=0;const s=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,r=!(!s||!s.matches),a="theme",c="app:theme";function d(t){return"dark"===t||"light"===t}function u(){if(!t)return null;const e=t.getItem(a);if(d(e))return e;const n=t.getItem(c);if(!d(n))return null;try{t.setItem(a,n),t.removeItem(c)}catch(t){}return n}const l=u(),m=window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,f=!(!m||!m.matches),p=f?60:260,g={success:"fas fa-check-circle",error:"fas fa-exclamation-circle",info:"fas fa-circle-info",default:"fas fa-bell"},h=new Map,w={top:{position:"top",viewport:null,visible:[],queue:[]},bottom:{position:"bottom",viewport:null,visible:[],queue:[]}};function y(t){const e="string"==typeof t?{kind:t}:t&&"object"==typeof t?t:{},n=function(t){const e=String(t||"default").toLowerCase();return"success"===e||"error"===e||"info"===e?e:"default"}(e.kind||e.type),o=Number(e.duration),i=Number.isFinite(o)&&o>=0?Math.round(o):2800;return{id:"string"==typeof e.id?e.id.trim():"",kind:n,duration:i,position:"top"===e.position?"top":"bottom",customClass:"string"==typeof e.customClass?e.customClass.trim():"",iconClass:"string"==typeof e.iconClass&&e.iconClass.trim()?e.iconClass.trim():g[n],iconColor:"string"==typeof e.iconColor?e.iconColor.trim():"",closeButton:!!e.closeButton,role:"string"==typeof e.role&&e.role.trim()?e.role.trim():"error"===n?"alert":"status",ariaLive:"string"==typeof e.ariaLive&&e.ariaLive.trim()?e.ariaLive.trim():"error"===n?"assertive":"polite"}}function b(t){return"top"===t?w.top:w.bottom}function v(t){const e=b(t);if(e.viewport&&e.viewport.isConnected)return e.viewport;const n=`.toast-viewport[data-toast-position="${t}"]`,o=document.querySelector(n);if(o instanceof HTMLElement)return e.viewport=o,e.viewport;if(!document.body)return null;const i=document.createElement("div");return i.className="toast-viewport",i.dataset.toastPosition=t,i.setAttribute("aria-live","off"),document.body.appendChild(i),e.viewport=i,i}function E(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function k(t){t.visible=t.visible.filter(t=>!!(t&&t.toast instanceof HTMLElement)&&(!(!t.toast.isConnected||!t.mounted)||(L(t),t.mounted=!1,t.dismissing=!1,t.settings.id&&h.get(t.settings.id)===t&&h.delete(t.settings.id),!1))),t.queue=t.queue.filter(t=>!!t&&!t.dismissing)}function L(t){if(t.timer&&(clearTimeout(t.timer),t.timer=null),t.progressAnimation){try{t.progressAnimation.cancel()}catch{}t.progressAnimation=null}}function C(t){const{settings:e,toast:n}=t,o=["dynamic-toast",`toast-kind-${e.kind}`];e.customClass&&o.push(e.customClass),n.className=o.join(" "),n.dataset.toastKind=e.kind,n.dataset.toastPosition=e.position,n.setAttribute("role",e.role),n.setAttribute("aria-live",e.ariaLive),n.setAttribute("aria-atomic","true"),n.tabIndex=-1,e.id?n.id=e.id:n.removeAttribute("id");const i=document.createDocumentFragment();if(e.iconClass){const t=document.createElement("i");t.className=`${e.iconClass} toast-icon`.trim(),e.iconColor&&(t.dataset.iconColor=e.iconColor),t.setAttribute("aria-hidden","true"),i.appendChild(t)}const s=document.createElement("span");if(s.className="toast-message",s.textContent=t.message,i.appendChild(s),e.closeButton){const e=(document.documentElement.lang||"").toLowerCase().startsWith("fa"),n=document.createElement("button");n.type="button",n.className="toast-close",n.setAttribute("aria-label",e?"بستن پیام":"Close message"),n.innerHTML='<i class="fas fa-times" aria-hidden="true"></i>',n.addEventListener("click",()=>M(t),{once:!0}),i.appendChild(n)}const r=document.createElement("span");r.className="toast-progress",r.setAttribute("aria-hidden","true"),i.appendChild(r),n.replaceChildren(i)}function S(t){L(t),function(t){const e=t.toast.querySelector(".toast-progress");if(e instanceof HTMLElement&&(e.hidden=t.settings.duration<=0,!(f||t.settings.duration<=0)&&"function"==typeof e.animate))try{t.progressAnimation=e.animate([{transform:"scaleX(1)"},{transform:"scaleX(0)"}],{duration:t.settings.duration,easing:"linear",fill:"forwards"})}catch{}}(t),t.settings.duration>0&&(t.timer=setTimeout(()=>{M(t)},t.settings.duration))}function A(t){const e=t.state||b(t.settings.position),n=v(e.position);n&&(t.state=e,t.mounted=!0,t.dismissing=!1,C(t),n.appendChild(t.toast),e.visible.push(t),requestAnimationFrame(()=>{if(t.mounted&&(t.toast.classList.add("show"),S(t),"function"==typeof window.__ruToastFeedback))try{window.__ruToastFeedback()}catch{}}))}function T(t){const e=b(t);for(v(t),k(e);e.visible.length<3&&e.queue.length>0;){const t=e.queue.shift();t&&(t.dismissing||A(t))}}function M(t){if(!t||t.dismissing)return;if(t.dismissing=!0,L(t),!(t.mounted&&t.toast instanceof HTMLElement)){return E((t.state||b(t.settings.position)).queue,t),t.settings.id&&h.get(t.settings.id)===t&&h.delete(t.settings.id),void(t.dismissing=!1)}const{toast:e}=t;e.classList.remove("show"),e.classList.add("is-closing");let n=!1;const o=()=>{if(n)return;n=!0;const o=t.state||b(t.settings.position);E(o.visible,t),E(o.queue,t),t.settings.id&&h.get(t.settings.id)===t&&h.delete(t.settings.id),e.remove(),t.mounted=!1,t.dismissing=!1,T(o.position)};e.addEventListener("transitionend",t=>{t.target===e&&o()},{once:!0}),setTimeout(o,p)}function H(t,e){if(!t&&0!==t)return null;if(!document.body)return console.warn("Cannot show toast: document.body not ready"),null;const n=y(e),o=String(t);if(k(w.top),k(w.bottom),n.id&&h.has(n.id)){const t=h.get(n.id);if(t.message=o,t.settings={...t.settings,...n,position:t.mounted?t.settings.position:n.position},t.mounted)return function(t){t.mounted&&t.toast&&(t.dismissing=!1,C(t),t.toast.classList.add("show"),t.toast.classList.remove("is-closing"),S(t))}(t),t;const e=b(t.settings.position);return E(w.top.queue,t),E(w.bottom.queue,t),t.state=e,e.queue.push(t),T(e.position),t}const i={message:o,settings:n,state:b(n.position),toast:document.createElement("div"),timer:null,progressAnimation:null,dismissing:!1,mounted:!1};return n.id&&h.set(n.id,i),i.state.queue.push(i),T(i.state.position),i}function x(t,e){const n=H(t,e);return n?n.toast:null}function q(t,e){const o=!!t;if(document.documentElement.classList.toggle("online",o),document.documentElement.classList.toggle("offline",!o),document.documentElement.setAttribute("data-network-status",o?"online":"offline"),document.body&&(document.body.classList.toggle("online",o),document.body.classList.toggle("offline",!o)),function(t){const e={online:t,timestamp:Date.now()};try{window.dispatchEvent(new CustomEvent(n,{detail:e}))}catch(t){try{const t=document.createEvent("CustomEvent");t.initCustomEvent(n,!1,!1,e),window.dispatchEvent(t)}catch{}}}(o),!e||"function"!=typeof window.createToast)return;const s=Date.now();s-i<1200||(i=s,window.createToast(function(t){const e=window.langStrings||{},n=t?["backOnline","online","connectionRestored"]:["offline","connectionLost"];for(const t of n){const n=e[t];if("function"==typeof n){const t=n();if("string"==typeof t&&t.trim())return t}else if("string"==typeof n&&n.trim())return n}return t?"Connection restored.":"You are offline. Some features may be unavailable."}(o),{id:"network-status-toast",kind:o?"success":"info",duration:2600}))}function I(t){const e=function(t){if(!t)return null;try{const e=new URL(t,window.location.href);return e.origin!==window.location.origin?null:e}catch{return null}}(t);if(!e)return null;const n=new URL(e.toString()),o=n.pathname;return/\.min\.js$/i.test(o)?(n.pathname=o.replace(/\.min\.js$/i,".js"),n.toString()):/\.min\.css$/i.test(o)?(n.pathname=o.replace(/\.min\.css$/i,".css"),n.toString()):null}function B(t,e,n){const i=`${e}::${n}`;if(o.has(i))return!1;o.add(i),t.setAttribute("data-asset-failed","true"),document.documentElement.classList.add("asset-fallback-active");const s=Number(document.documentElement.dataset.assetFallbackCount||"0");return document.documentElement.dataset.assetFallbackCount=String(s+1),!0}function O(t,e){const n="dark"===t,o=!!e;document.body.classList.toggle("dark-mode",n),document.body.classList.toggle("light-mode",!n),document.documentElement.setAttribute("data-theme",t);const i=document.getElementById("theme-toggle");if(i&&(i.checked=n,i.setAttribute("aria-checked",String(n))),o&&"function"==typeof window.langStrings.themeChanged){const e=window.langStrings.themeChanged(t);e&&x(e,{id:"theme-toast",kind:"info",customClass:"theme-toast",duration:1800,position:"top"})}}if(window.createToast=x,q(!1!==navigator.onLine,!1),window.addEventListener("online",()=>q(!0,!0)),window.addEventListener("offline",()=>q(!1,!0)),window.addEventListener("error",t=>{const n=t.target;if(n&&n!==window){if("undefined"!=typeof HTMLScriptElement&&n instanceof HTMLScriptElement){const t=n.src||"",o=I(t);if(!o)return;if(!B(n,t,o))return;return void function(t,n){const o=document.createElement("script");o.src=n,o.defer=!!t.defer,o.async=!!t.async,t.type&&(o.type=t.type),t.crossOrigin&&(o.crossOrigin=t.crossOrigin),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.nonce&&(o.nonce=t.nonce),o.setAttribute("data-asset-fallback","true"),o.setAttribute("data-asset-fallback-from",t.src||""),o.addEventListener("error",()=>{document.documentElement.classList.add(e)},{once:!0}),t.insertAdjacentElement("afterend",o)}(n,o)}if("undefined"!=typeof HTMLLinkElement&&n instanceof HTMLLinkElement){const t=n.href||"",o=I(t);if(!o)return;if(!B(n,t,o))return;!function(t,n){if("stylesheet"!==(t.rel||"").toLowerCase())return;const o=document.createElement("link");o.rel="stylesheet",o.href=n,t.media&&(o.media=t.media),t.crossOrigin&&(o.crossOrigin=t.crossOrigin),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.nonce&&(o.nonce=t.nonce),o.setAttribute("data-asset-fallback","true"),o.setAttribute("data-asset-fallback-from",t.href||""),o.addEventListener("error",()=>{document.documentElement.classList.add(e)},{once:!0}),t.insertAdjacentElement("afterend",o)}(n,o)}}},!0),O("dark"===l||"light"===l?l:r?"dark":"light"),s){const t=function(t){u()||O(t.matches?"dark":"light")};"function"==typeof s.addEventListener?s.addEventListener("change",t):"function"==typeof s.addListener&&s.addListener(t)}function P(){const e=document.getElementById("theme-toggle");if(!e)return;if("true"===e.dataset.themeToggleInit)return;e.dataset.themeToggleInit="true";const n=document.documentElement.getAttribute("data-theme");"dark"!==n&&"light"!==n||(e.checked="dark"===n),e.setAttribute("aria-checked",String(!!e.checked)),e.setAttribute("role","switch"),e.addEventListener("change",()=>{const n=e.checked?"dark":"light";O(n,!0);try{t?.setItem(a,n)}catch(t){}}),e.addEventListener("keydown",n=>{if(" "===n.key||"Enter"===n.key){n.preventDefault(),e.checked=!e.checked;const o=e.checked?"dark":"light";O(o,!0);try{t?.setItem(a,o)}catch(t){}}})}P(),document.addEventListener("includesLoaded",P,!1);let N=!1,$=0,F=!1;window.addEventListener("scroll",()=>{$=window.scrollY||window.pageYOffset||0,F||(window.requestAnimationFrame(()=>{!function(){const t=window.innerHeight+$,e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)||0;if(t<e-100&&(N=!1),!N&&t>=e-50&&e>0)if(N=!0,"string"==typeof window.langStrings.endOfPage)x(window.langStrings.endOfPage,{id:"end-of-page-toast",kind:"info",customClass:"end-of-page-toast",duration:3200});else if("function"==typeof window.langStrings.endOfPage){const t=window.langStrings.endOfPage();t&&x(t,{id:"end-of-page-toast",kind:"info",customClass:"end-of-page-toast",duration:3200})}F=!1}(),function(){const t=document.getElementById("scroll-progress-bar");if(!t)return;const e=window.scrollY||document.documentElement.scrollTop||0,n=document.documentElement.scrollHeight-document.documentElement.clientHeight;if(n<=0)return t.style.width="0%",void t.setAttribute("aria-valuenow","0");const o=e/n*100,i=Math.max(0,Math.min(100,o));t.style.width=i+"%",t.setAttribute("aria-valuenow",Math.round(i))}()}),F=!0)},{passive:!0});const _=document.getElementById("current-year")||document.getElementById("footer-year");_&&(_.textContent=(new Date).getFullYear());const Y=document.getElementById("back-to-top");function j(t,e="email"){const n=window.langStrings||{},o={success:"link"===e?["linkCopied","copySuccess"]:["copySuccess","emailCopied"],error:["copyError","emailCopyError"],unsupported:["copyUnsupported","clipboardUnsupported"]}[t]||[];for(const t of o){const e=n[t];if("function"==typeof e){const t=e();if("string"==typeof t&&t.trim())return t}else if("string"==typeof e&&e.trim())return e}const i=(document.documentElement.lang||"").toLowerCase().startsWith("fa"),s={success:i?"link"===e?"لینک کپی شد.":"ایمیل کپی شد.":"link"===e?"Link copied.":"Email copied.",error:i?"کپی با مشکل مواجه شد.":"Copy failed.",unsupported:i?"مرورگر شما از کپی خودکار پشتیبانی نمی‌کند.":"Your browser does not support automatic copy."};return s[t]||s.error}function D(t){const e=window.langStrings||{},n={success:["shareOk","shareSuccess"],error:["shareErr","shareError"]}[t]||[];for(const t of n){const n=e[t];if("function"==typeof n){const t=n();if("string"==typeof t&&t.trim())return t}else if("string"==typeof n&&n.trim())return n}const o=(document.documentElement.lang||"").toLowerCase().startsWith("fa"),i={success:o?"اشتراک‌گذاری موفق بود.":"Shared successfully.",error:o?"اشتراک‌گذاری با مشکل مواجه شد.":"Sharing failed."};return i[t]||i.error}async function R(t,e={}){const n=!0===e.allowExecCommand;if(navigator.clipboard&&navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(t),{ok:!0,mode:"clipboard"}}catch{}return n&&function(t){if(!document.body)return!1;const e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.top="0",document.body.appendChild(e),e.select();try{return!!document.execCommand("copy")}catch{return!1}finally{e.remove()}}(t)?{ok:!0,mode:"exec-command"}:{ok:!1,mode:navigator.clipboard&&navigator.clipboard.writeText?"clipboard-failed":"unsupported"}}function U(t,e){t&&"function"==typeof window.createToast&&window.createToast(t,e)}function W(t){t instanceof HTMLButtonElement&&"true"!==t.dataset.toastCopyBound&&(t.dataset.toastCopyBound="true",t.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-copy");if(!n)return void console.warn("No data-copy attribute found on .copy-btn");const o=n.includes("@")?"email":"link",i=await R(n,{allowExecCommand:!1});if(i.ok)return function(t){const e=t.innerHTML;t.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',t.classList.add("copied"),setTimeout(()=>{t.innerHTML=e,t.classList.remove("copied")},2e3)}(t),void U(j("success",o),{id:"copy-success-toast",kind:"success",duration:1800});const s="unsupported"===i.mode?"unsupported":"error";U(j(s),{id:"unsupported"===s?"copy-unsupported-toast":"copy-error-toast",kind:"unsupported"===s?"info":"error",duration:"unsupported"===s?3e3:2600})}))}Y&&(window.addEventListener("scroll",()=>{window.scrollY>300?Y.classList.add("show"):Y.classList.remove("show")},{passive:!0}),Y.addEventListener("click",()=>{window.scrollTo({top:0,behavior:f?"auto":"smooth"})})),document.querySelectorAll(".copy-btn").forEach(t=>{W(t)}),document.querySelectorAll(".share-btn").forEach(t=>{!function(t){t instanceof HTMLButtonElement&&"true"!==t.dataset.toastShareBound&&(t.dataset.toastShareBound="true",t.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-share")||window.location.href;if(n){if("function"==typeof navigator.share)try{return await navigator.share({title:document.title,url:n}),void U(D("success"),{id:"share-success-toast",kind:"success",duration:1800})}catch(t){if(t&&"AbortError"===t.name)return}(await R(n,{allowExecCommand:!0})).ok?U(j("success","link"),{id:"share-copy-toast",kind:"success",duration:2e3}):U(D("error"),{id:"share-error-toast",kind:"error",duration:2800})}}))}(t)}),document.addEventListener("click",function(t){const e=t.target;if(!(e instanceof Element))return;const n=e.closest(".btn, button, .cta-button, .hero-btn");if(n){const e=n.getBoundingClientRect(),o=t.clientX-e.left,i=t.clientY-e.top,s=document.createElement("span");s.className="ripple",s.style.left=`${o}px`,s.style.top=`${i}px`,n.appendChild(s),setTimeout(()=>{s.remove()},600)}}),window.triggerSuccess=function(t){t&&(t.classList.add("success-trigger"),setTimeout(()=>{t.classList.remove("success-trigger")},300))}}();
//# sourceMappingURL=main-script-base.min.js.map
