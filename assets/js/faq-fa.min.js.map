{"version":3,"file":"faq-fa.min.js","names":["document","addEventListener","faqItems","Array","from","querySelectorAll","faqNavigation","querySelector","searchInput","getElementById","clearSearchButton","allSections","mainContent","header","length","event","link","target","closest","category","dataset","gtag","event_category","event_label","value","hj","replace","toLowerCase","forEach","button","ctaType","linkType","status","createElement","id","setAttribute","className","parentNode","appendChild","getAttribute","updateStatus","term","count","total","trimmed","trim","textContent","handleSearch","searchTerm","style","display","visibleItemsCount","section","sectionHasVisibleItems","item","summary","questionText","answerTextElement","answerText","keywords","includes","hidden","open","openedByUser","openedBySearch","search_term","results_count","debouncedSearch","func","timeout","context","this","args","arguments","clearTimeout","setTimeout","apply","debounce","e","key","preventDefault","focus","clickedLink","contains","window","location","href","parentElement","questionId","wasAlreadyOpen","otherItem","otherSummary","question_text","rect","getBoundingClientRect","top","bottom","innerHeight","scrollIntoView","behavior","block","primary","getComputedStyle","documentElement","getPropertyValue","outline","outlineOffset","matchMedia","matches","opacity","transform","transition"],"sources":["faq-fa.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  \"use strict\";\r\n\r\n  const faqItems = Array.from(document.querySelectorAll(\".faq-item\"));\r\n  const faqNavigation = document.querySelector(\".faq-navigation\");\r\n  const searchInput = document.getElementById(\"faq-search\");\r\n  const clearSearchButton = document.getElementById(\"clear-search\");\r\n  const allSections = Array.from(document.querySelectorAll(\".faq-section\"));\r\n  const mainContent = document.querySelector(\".main-content\");\r\n  const header = document.querySelector(\".page-header\");\r\n\r\n  // اگر هیچ FAQی نداریم، ادامه نده\r\n  if (!faqItems.length && !mainContent && !header) {return;}\r\n\r\n  // Utility: simple debounce helper\r\n  function debounce(func, delay) {\r\n    let timeout;\r\n    return function () {\r\n      const context = this;\r\n      const args = arguments;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => func.apply(context, args), delay);\r\n    };\r\n  }\r\n\r\n  // --- GA4 & Hotjar Event Tracking Integration ---\r\n\r\n  // Track clicks on navigation links\r\n  if (faqNavigation) {\r\n    faqNavigation.addEventListener(\"click\", (event) => {\r\n      const link = event.target.closest(\"a\");\r\n      if (!link) {return;}\r\n      const category = link.dataset.category || \"unknown\";\r\n\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_nav_click\", {\r\n          event_category: \"FAQ Navigation\",\r\n          event_label: `Clicked category: ${category}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\r\n          \"event\",\r\n          `faq_nav_clicked_category_${category.replace(/\\s/g, \"_\").toLowerCase()}`\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // Track Clicks on Call-to-Action Buttons\r\n  document.querySelectorAll(\".button-link\").forEach((button) => {\r\n    button.addEventListener(\"click\", () => {\r\n      const ctaType = button.dataset.ctaType || \"generic\";\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_cta_click\", {\r\n          event_category: \"FAQ Call to Action\",\r\n          event_label: `CTA Clicked: ${ctaType}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", `faq_cta_clicked_${ctaType}`);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Track Clicks on Internal Text Links\r\n  document.querySelectorAll(\".faq-answer .text-link\").forEach((link) => {\r\n    link.addEventListener(\"click\", () => {\r\n      const linkType = link.dataset.linkType || \"generic\";\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_text_link_click\", {\r\n          event_category: \"FAQ Internal Link\",\r\n          event_label: `Text link clicked: ${linkType}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", `faq_text_link_clicked_${linkType}`);\r\n      }\r\n    });\r\n  });\r\n\r\n  // --- FAQ Search Functionality (Cognitive Load Reduction - Information Foraging) ---\r\n\r\n  // اگر سرچ یا کلیر دکمه نداریم، بخش سرچ رو کلاً رد کن\r\n  if (searchInput && clearSearchButton && allSections.length) {\r\n    // live region برای اعلام تعداد نتایج (برای اسکرین‌ریدر)\r\n    let status = document.getElementById(\"faq-search-status\");\r\n    if (!status) {\r\n      status = document.createElement(\"div\");\r\n      status.id = \"faq-search-status\";\r\n      status.setAttribute(\"aria-live\", \"polite\");\r\n      status.setAttribute(\"aria-atomic\", \"true\");\r\n      status.className = \"faq-search-status sr-only\";\r\n      (searchInput.closest(\"form\") || searchInput.parentNode).appendChild(\r\n        status\r\n      );\r\n    }\r\n\r\n    if (!clearSearchButton.getAttribute(\"aria-label\")) {\r\n      clearSearchButton.setAttribute(\"aria-label\", \"پاک کردن جستجوی پرسش‌ها\");\r\n    }\r\n\r\n    const updateStatus = (term, count) => {\r\n      const total = faqItems.length;\r\n      const trimmed = term.trim();\r\n      if (!trimmed) {\r\n        status.textContent = `نمایش ${total} پرسش موجود.`;\r\n      } else if (!count) {\r\n        status.textContent = `هیچ نتیجه‌ای برای «${trimmed}» پیدا نشد.`;\r\n      } else {\r\n        status.textContent = `${count} نتیجه برای «${trimmed}» یافت شد.`;\r\n      }\r\n    };\r\n\r\n    const handleSearch = () => {\r\n      const rawTerm = searchInput.value || \"\";\r\n      const searchTerm = rawTerm.trim().toLowerCase();\r\n\r\n      clearSearchButton.style.display = searchTerm ? \"block\" : \"none\";\r\n\r\n      let visibleItemsCount = 0;\r\n\r\n      allSections.forEach((section) => {\r\n        let sectionHasVisibleItems = false;\r\n        const itemsInSection = section.querySelectorAll(\".faq-item\");\r\n\r\n        itemsInSection.forEach((item) => {\r\n          const summary = item.querySelector(\"summary\");\r\n          const questionText = summary\r\n            ? summary.textContent.toLowerCase()\r\n            : \"\";\r\n          const answerTextElement = item.querySelector(\".faq-answer\");\r\n          const answerText = answerTextElement\r\n            ? answerTextElement.textContent.toLowerCase()\r\n            : \"\";\r\n          const keywords = (item.dataset.keywords || \"\").toLowerCase();\r\n\r\n          const matches =\r\n            !searchTerm ||\r\n            questionText.includes(searchTerm) ||\r\n            answerText.includes(searchTerm) ||\r\n            keywords.includes(searchTerm);\r\n\r\n          if (matches) {\r\n            item.hidden = false;\r\n            sectionHasVisibleItems = true;\r\n            visibleItemsCount++;\r\n\r\n            // اگر سرچ فعال است و آیتم توسط یوزر باز نشده، با سرچ بازش کن\r\n            if (\r\n              searchTerm &&\r\n              !item.open &&\r\n              !item.dataset.openedByUser\r\n            ) {\r\n              item.open = true;\r\n              item.dataset.openedBySearch = \"true\";\r\n            }\r\n          } else {\r\n            item.hidden = true;\r\n            // اگر با سرچ باز شده بود، الان که می‌ره بیرون نتیجه، ببندش\r\n            if (item.open && item.dataset.openedBySearch) {\r\n              item.open = false;\r\n              delete item.dataset.openedBySearch;\r\n            }\r\n          }\r\n        });\r\n\r\n        section.hidden = !sectionHasVisibleItems;\r\n      });\r\n\r\n      // Track search event in GA4\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_search\", {\r\n          event_category: \"FAQ Search\",\r\n          search_term: searchTerm,\r\n          results_count: visibleItemsCount,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\" && searchTerm) {\r\n        hj(\r\n          \"event\",\r\n          `faq_searched_${searchTerm.replace(/\\s/g, \"_\").toLowerCase()}`\r\n        );\r\n      }\r\n\r\n      updateStatus(searchTerm, visibleItemsCount);\r\n    };\r\n\r\n    const debouncedSearch = debounce(handleSearch, 200);\r\n    searchInput.addEventListener(\"input\", debouncedSearch);\r\n\r\n    // ESC برای پاک کردن سریع سرچ\r\n    searchInput.addEventListener(\"keydown\", (e) => {\r\n      if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        searchInput.value = \"\";\r\n        clearSearchButton.style.display = \"none\";\r\n        handleSearch();\r\n      }\r\n    });\r\n\r\n    clearSearchButton.addEventListener(\"click\", () => {\r\n      searchInput.value = \"\";\r\n      clearSearchButton.style.display = \"none\";\r\n\r\n      faqItems.forEach((item) => {\r\n        item.hidden = false;\r\n        if (item.open && item.dataset.openedBySearch) {\r\n          item.open = false;\r\n          delete item.dataset.openedBySearch;\r\n        }\r\n      });\r\n      allSections.forEach((section) => {\r\n        section.hidden = false;\r\n      });\r\n\r\n      updateStatus(\"\", faqItems.length);\r\n\r\n      // Track clear search event in GA4\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_search_cleared\", {\r\n          event_category: \"FAQ Search\",\r\n          event_label: \"Search input cleared\",\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", \"faq_search_cleared\");\r\n      }\r\n\r\n      searchInput.focus();\r\n    });\r\n\r\n    // وضعیت اولیه\r\n    clearSearchButton.style.display = \"none\";\r\n    updateStatus(\"\", faqItems.length);\r\n  }\r\n\r\n  // --- Accordion Logic ---\r\n  if (mainContent && faqItems.length) {\r\n    mainContent.addEventListener(\"click\", (event) => {\r\n      const summary = event.target.closest(\".faq-item summary\");\r\n      if (!summary) {return;}\r\n\r\n      const clickedLink = event.target.closest(\"a\");\n      if (clickedLink && summary.contains(clickedLink)) {\n        event.preventDefault();\n        window.location.href = clickedLink.href;\n        return;\n      }\n\r\n      event.preventDefault();\r\n\r\n      const item = summary.parentElement;\r\n      const questionId = item.dataset.questionId || \"unknown\";\r\n      const wasAlreadyOpen = item.open;\r\n\r\n      // بستن بقیه\r\n      faqItems.forEach((otherItem) => {\r\n        if (otherItem !== item) {\r\n          otherItem.open = false;\r\n          delete otherItem.dataset.openedByUser;\r\n          delete otherItem.dataset.openedBySearch;\r\n          const otherSummary = otherItem.querySelector(\"summary\");\r\n          if (otherSummary) {\r\n            otherSummary.setAttribute(\"aria-expanded\", \"false\");\r\n          }\r\n        }\r\n      });\r\n\r\n      if (wasAlreadyOpen) {\r\n        item.open = false;\r\n        summary.setAttribute(\"aria-expanded\", \"false\");\r\n\r\n        if (typeof gtag === \"function\") {\r\n          gtag(\"event\", \"faq_collapse\", {\r\n            event_category: \"FAQ Interaction\",\r\n            event_label: `Question collapsed: ${questionId}`,\r\n            question_text: summary.textContent.trim(),\r\n          });\r\n        }\r\n        if (typeof hj === \"function\") {\r\n          hj(\"event\", `faq_collapsed_${questionId}`);\r\n        }\r\n        delete item.dataset.openedBySearch;\r\n        delete item.dataset.openedByUser;\r\n      } else {\r\n        item.open = true;\r\n        summary.setAttribute(\"aria-expanded\", \"true\");\r\n        item.dataset.openedByUser = \"true\";\r\n        delete item.dataset.openedBySearch;\r\n\r\n        setTimeout(() => {\r\n          const rect = item.getBoundingClientRect();\r\n          if (rect.top < 0 || rect.bottom > window.innerHeight) {\r\n            item.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          }\r\n        }, 450);\r\n\r\n        if (typeof gtag === \"function\") {\r\n          gtag(\"event\", \"faq_expand\", {\r\n            event_category: \"FAQ Interaction\",\r\n            event_label: `Question expanded: ${questionId}`,\r\n            question_text: summary.textContent.trim(),\r\n          });\r\n        }\r\n        if (typeof hj === \"function\") {\r\n          hj(\"event\", `faq_expanded_${questionId}`);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Focus outline برای summary ها (با احترام به CSS vars)\r\n  faqItems.forEach((item) => {\r\n    const summary = item.querySelector(\"summary\");\r\n    if (!summary) {return;}\r\n\r\n    summary.addEventListener(\"focus\", () => {\r\n      const primary =\r\n        getComputedStyle(document.documentElement).getPropertyValue(\r\n          \"--primary-blue\"\r\n        ) || \"#007bff\";\r\n      summary.style.outline = `3px solid ${primary.trim()}66`;\r\n      summary.style.outlineOffset = \"5px\";\r\n    });\r\n\r\n    summary.addEventListener(\"blur\", () => {\r\n      summary.style.outline = \"none\";\r\n      summary.style.outlineOffset = \"0\";\r\n    });\r\n\r\n    // initial aria-expanded sync\r\n    summary.setAttribute(\"aria-expanded\", item.open ? \"true\" : \"false\");\r\n  });\r\n\r\n  // --- Page entry animation (با احترام به prefers-reduced-motion) ---\r\n  const prefersReducedMotion = window.matchMedia\r\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\r\n    : false;\r\n\r\n  if (!prefersReducedMotion) {\r\n    if (header) {\r\n      header.style.opacity = \"0\";\r\n      header.style.transform = \"translateY(-20px)\";\r\n      setTimeout(() => {\r\n        header.style.transition = \"opacity 1s ease-out, transform 1s ease-out\";\r\n        header.style.opacity = \"1\";\r\n        header.style.transform = \"translateY(0)\";\r\n      }, 100);\r\n    }\r\n\r\n    if (mainContent) {\r\n      mainContent.style.opacity = \"0\";\r\n      mainContent.style.transform = \"translateY(20px)\";\r\n      setTimeout(() => {\r\n        mainContent.style.transition =\r\n          \"opacity 1s ease-out, transform 1s ease-out\";\r\n        mainContent.style.opacity = \"1\";\r\n        mainContent.style.transform = \"translateY(0)\";\r\n      }, 300);\r\n    }\r\n  }\r\n});\r\n"]}