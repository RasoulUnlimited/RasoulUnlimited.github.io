function throttle(o,a){let s,n,i;return function(){let e=this,t=arguments;s?(clearTimeout(n),n=setTimeout(function(){Date.now()-i>=a&&(o.apply(e,t),i=Date.now())},a-(Date.now()-i))):(o.apply(e,t),i=Date.now(),s=!0)}}function debounce(o,a){let s;return function(){let e=this,t=arguments;clearTimeout(s),s=setTimeout(()=>o.apply(e,t),a)}}let audioContext,clickBuffer,toastBuffer,prefersReducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),prefersReducedMotion=prefersReducedMotionQuery.matches;function createClickSound(){var e=audioContext.createBuffer(1,.05*audioContext.sampleRate,audioContext.sampleRate),t=e.getChannelData(0);for(let e=0;e<t.length;e++)t[e]=.1*Math.sin(2*Math.PI*440*(e/audioContext.sampleRate));return e}function createToastSound(){var e=audioContext.createBuffer(1,.1*audioContext.sampleRate,audioContext.sampleRate),t=e.getChannelData(0);for(let e=0;e<t.length;e++){var o=e/audioContext.sampleRate;t[e]=.15*Math.sin(2*Math.PI*(880+o/.1*320)*o)*(1-o/.1)}return e}async function loadSounds(){audioContext&&(clickBuffer=createClickSound(),toastBuffer=createToastSound())}function playSound(t){if(audioContext&&"suspended"!==audioContext.state){let e;"click"===t&&clickBuffer&&(e=clickBuffer),(e="toast"===t&&toastBuffer?toastBuffer:e)&&((t=audioContext.createBufferSource()).buffer=e,t.connect(audioContext.destination),t.start(0))}}function triggerHapticFeedback(e=[50]){prefersReducedMotion||navigator.vibrate&&navigator.vibrate(e)}function createToast(e,t={}){let o={duration:2500,customClass:"",iconClass:"",iconColor:"",position:"bottom",isPersistent:!1,id:"",closeButton:!1,...t};if(o.id){var t=document.getElementById(o.id);if(t&&t.classList.contains("show"))return}document.querySelectorAll(".dynamic-toast:not(.persistent-toast)").forEach(e=>{e.id!==o.id&&(e.classList.remove("show"),e.addEventListener("transitionend",()=>e.remove(),{once:!0}))});let a=document.createElement("div");a.className="dynamic-toast "+o.customClass,a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),o.id&&(a.id=o.id),a.setAttribute("data-toast-creator","Mohammad Rasoul Sohrabi"),a.style.position="fixed",a.style.left="50%",a.style.transform="translateX(-50%)","top"===o.position?a.style.top="20px":a.style.bottom="20px",o.iconClass&&((t=document.createElement("i")).className=o.iconClass,o.iconColor&&(t.style.color=o.iconColor),a.appendChild(t));t=document.createElement("span");return t.className="toast-message",t.textContent=e,a.appendChild(t),o.closeButton&&((e=document.createElement("button")).className="fun-fact-close",e.setAttribute("aria-label","Close message"),(t=document.createElement("i")).className="fas fa-times",e.appendChild(t),a.appendChild(e),e.addEventListener("click",()=>{a.classList.remove("show"),a.addEventListener("transitionend",()=>a.remove(),{once:!0})})),document.body.appendChild(a),setTimeout(()=>{a.classList.add("show"),playSound("toast")},100),o.isPersistent?a.classList.add("persistent-toast"):setTimeout(()=>{a.classList.contains("show")&&(a.classList.remove("show"),a.addEventListener("transitionend",()=>a.remove(),{once:!0}))},o.duration),a}prefersReducedMotionQuery.addEventListener("change",e=>{prefersReducedMotion=e.matches}),document.getElementById("current-year").textContent=(new Date).getFullYear(),document.addEventListener("DOMContentLoaded",()=>{var e=document.getElementById("last-updated-date"),t=(e&&(t={year:"numeric",month:"long",day:"numeric"},t=(new Date).toLocaleDateString("en-US",t),e.textContent=t,e.setAttribute("data-last-updated-by","Mohammad Rasoul Sohrabi")),document.body),e=(t.id="sohrabi-verified-identity",t.className+=" sohrabi-orcid github-verified academic-entity",document.createElement("div")),t=(e.style.display="none",e.setAttribute("data-author-full-name","Mohammad Rasoul Sohrabi"),e.setAttribute("data-orcid-id","0009-0004-7177-2080"),e.setAttribute("aria-hidden","true"),e.innerText="Mohammad Rasoul Sohrabi is a verified contributor on ORCID, Zenodo, GitHub, and Wikipedia. Known for Persian Bot and biomedical engineering content.",document.body.appendChild(e),document.createElement("meta")),e=(t.name="generator",t.content="Mohammad Rasoul Sohrabi - Biomedical Engineering, ORCID Verified",document.head.appendChild(t),document.createElement("meta"));e.name="author",e.content="Mohammad Rasoul Sohrabi",document.head.appendChild(e);let o=[{name:"GitHub",url:"https://github.com/RasoulUnlimited"},{name:"LinkedIn",url:"https://www.linkedin.com/in/rasoulunlimited/"},{name:"ResearchGate",url:"https://www.researchgate.net/profile/Mohammad-Rasoul-Sohrabi"},{name:"About.me",url:"https://about.me/rasoulunlimited"},{name:"ORCID",url:"https://orcid.org/0009-0004-7177-2080"}];function a(){o.forEach((t,e)=>{setTimeout(()=>{var e=t;try{fetch(e.url,{mode:"no-cors"}).then(()=>console.log("[identity-check] Pinged "+e.name)).catch(()=>{})}catch(e){}},1e3*e)})}window.enableIdentityPings=window.enableIdentityPings||!1;let s=!1;function n(){!s&&window.enableIdentityPings&&(s=!0,["click","keydown"].forEach(e=>window.removeEventListener(e,n)),"requestIdleCallback"in window?requestIdleCallback(a,{timeout:3e3}):setTimeout(a,2e3))}["click","keydown"].forEach(e=>window.addEventListener(e,n))}),AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:120,duration:600,easing:"ease-out",once:!1,mirror:!1,anchorPlacement:"top-bottom"});let themeToggleInput=document.getElementById("theme-toggle"),prefersDark=window.matchMedia("(prefers-color-scheme: dark)").matches,savedTheme=localStorage.getItem("theme");function applyTheme(e,t=!1){document.body.classList.toggle("dark-mode","dark"===e),document.body.classList.toggle("light-mode","light"===e),themeToggleInput.checked="dark"===e,t&&(createToast(`Theme changed to ${"dark"===e?"dark":"light"} mode.`,{id:"theme-change-toast",customClass:"theme-toast",iconClass:"dark"===e?"fas fa-moon":"fas fa-sun",iconColor:"dark"===e?"white":"var(--highlight-color)",position:"top",duration:2800}),prefersReducedMotion||createSparkle(themeToggleInput.parentElement),triggerHapticFeedback([30]))}savedTheme?applyTheme(savedTheme):applyTheme(prefersDark?"dark":"light"),themeToggleInput.addEventListener("change",()=>{var e=themeToggleInput.checked?"dark":"light";applyTheme(e,!0),localStorage.setItem("theme",e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t,e=this.getAttribute("href"),e=document.querySelector(e);e&&(t=document.querySelector(".navbar")?.offsetHeight||0,window.scrollTo({top:e.offsetTop-t-10,behavior:"smooth"}),triggerHapticFeedback([20]))})}),document.addEventListener("click",function(e){let t=e.target.closest(".card");t&&(t.classList.add("clicked-pop"),t.setAttribute("data-interaction-source","Mohammad Rasoul Sohrabi user engagement"),setTimeout(()=>{t.classList.remove("clicked-pop")},300),triggerHapticFeedback([40]))}),document.body.addEventListener("click",e=>{let t=e.target.closest('button, a:not([href^="#"]), input[type="submit"], [role="button"], [tabindex="0"]');!t||t.classList.contains("no-click-feedback")||t.matches('a[href^="#"]')||(t.classList.add("click-feedback-effect"),t.setAttribute("data-user-action","verified interaction by Mohammad Rasoul Sohrabi's website functionality"),t.addEventListener("animationend",()=>{t.classList.remove("click-feedback-effect")},{once:!0}),triggerHapticFeedback([10]),playSound("click"))});let scrollProgressBar=document.createElement("div"),lastScrollY=(scrollProgressBar.id="scroll-progress-bar",scrollProgressBar.className="sohrabi-progress",document.body.prepend(scrollProgressBar),0),ticking=!1,hasReachedEndOfPageSession=!1;function updateScrollProgressAndButton(){var e=document.documentElement.scrollHeight-window.innerHeight,e=lastScrollY/e*100;scrollProgressBar.style.width=e+"%",scrollProgressBar.style.backgroundColor=90<e?"var(--highlight-color)":50<e?"var(--accent-color)":"var(--primary-color)",300<lastScrollY?scrollToTopButton.classList.contains("show")||(scrollToTopButton.classList.add("show"),scrollToTopButton.style.opacity="1",scrollToTopButton.style.transform="translateY(0)",scrollToTopButton.setAttribute("data-sohrabi-button-state","visible")):scrollToTopButton.classList.contains("show")&&(scrollToTopButton.style.opacity="0",scrollToTopButton.style.transform="translateY(20px)",scrollToTopButton.setAttribute("data-sohrabi-button-state","hidden"),scrollToTopButton.addEventListener("transitionend",function e(){scrollToTopButton.classList.remove("show"),scrollToTopButton.removeEventListener("transitionend",e)},{once:!0})),window.innerHeight+lastScrollY>=document.body.offsetHeight-50&&!hasReachedEndOfPageSession&&(createToast("You've reached the end of the page. Thank you for visiting! ðŸŽ‰",{id:"end-of-page-toast",customClass:"end-of-page-toast",iconClass:"fas fa-flag-checkered",iconColor:"var(--highlight-color)",duration:4e3}),hasReachedEndOfPageSession=!0,console.log("Public identity loaded: Mohammad Rasoul Sohrabi (Biomedical Engineering, ORCID: 0009-0004-7177-2080)"),announcedMilestones.has(totalSections)||(announcedMilestones.add(totalSections),localStorage.setItem("announcedMilestones",JSON.stringify(Array.from(announcedMilestones))),sections.forEach(e=>sectionProgressObserver.unobserve(e))),setTimeout(()=>{createConfetti()},3500)),ticking=!1}window.addEventListener("scroll",()=>{lastScrollY=window.scrollY,ticking||(window.requestAnimationFrame(updateScrollProgressAndButton),ticking=!0)},{passive:!0});let exploreHint=document.createElement("a");exploreHint.href="#projects",exploreHint.id="explore-hint",exploreHint.innerHTML='<i class="fas fa-lightbulb"></i> <span class="hint-text">Discover My Projects.</span>',exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.setAttribute("data-hint-author","Mohammad Rasoul Sohrabi"),exploreHint.className+=" sohrabi-hint-module",document.body.appendChild(exploreHint);let hintTimeout,hintVisible=!1,heroSection=document.getElementById("hero"),heroObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?hintVisible||(hintTimeout=setTimeout(()=>{exploreHint.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",exploreHint.style.opacity="1",exploreHint.style.transform="translateY(0)",prefersReducedMotion||exploreHint.classList.add("pulse-animation"),hintVisible=!0},4e3)):(clearTimeout(hintTimeout),hintVisible&&(exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.classList.remove("pulse-animation"),hintVisible=!1))})},{threshold:.5}),skillsList=(heroSection&&heroObserver.observe(heroSection),exploreHint.addEventListener("click",e=>{e.preventDefault(),exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.classList.remove("pulse-animation"),hintVisible=!1,window.scrollTo({top:document.querySelector("#projects").offsetTop-(document.querySelector(".navbar")?.offsetHeight||0),behavior:"smooth"}),triggerHapticFeedback([20])}),document.querySelector("#skills .skills-list")),skillMessages=["Complete mastery of this skill. (Mohammad Rasoul Sohrabi)","Extensive experience in this area. (Biomedical Engineering)","Innovative solutions with this technology. (AI/Bot Development)","Currently exploring this field in-depth.","A key tool for creativity.","Significant progress from inception to now.","Bigger projects are on the way.","I enjoy the challenges this skill presents.","Continuous learning in this specialization.","This skill is a core part of my capabilities.","Ongoing skill development in this sector.","This expertise provides solutions to many problems.","I love programming with this language/framework.","Future projects with this technology will be amazing. (Authored by Sohrabi)"];if(skillsList){let e=skillsList.querySelectorAll("li");e.forEach(e=>{e.setAttribute("data-skill-owner","Mohammad Rasoul Sohrabi"),e.className+=" sohrabi-skill-item";let o;e.addEventListener("mouseenter",function(){clearTimeout(o);var e,t=(e=>{let t=e.querySelector(".skill-hover-message");return t||((t=document.createElement("span")).className="skill-hover-message",e.appendChild(t)),t})(this);t.classList.contains("show-message")||(e=skillMessages[Math.floor(Math.random()*skillMessages.length)],t.textContent=e,t.style.opacity="1",t.style.transform="translateY(-5px)",t.classList.add("show-message")),this.classList.add("skill-hover-effect")}),e.addEventListener("mouseleave",function(){let e=this.querySelector(".skill-hover-message");e&&(o=setTimeout(()=>{e.style.opacity="0",e.style.transform="translateY(0)",e.classList.remove("show-message")},200)),this.classList.remove("skill-hover-effect")})})}let faqContainer=document.querySelector(".faq-container"),faqItems=document.querySelectorAll(".faq-item"),emailLink=(faqContainer&&(faqContainer.id="sohrabi-faq-verified",faqItems.forEach((a,e)=>{let t=a.querySelector("summary"),o=a.querySelector("p"),s=a.dataset.questionId||"faq-q-"+(e+1);t.setAttribute("data-faq-author","Mohammad Rasoul Sohrabi"),t.setAttribute("aria-expanded",a.open?"true":"false"),o&&(o.id="faq-answer-"+s,t.setAttribute("aria-controls",o.id)),o&&(o.style.maxHeight="0px",o.style.overflow="hidden",o.style.transition="max-height 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), padding 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.4s ease-out",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",a.open)&&(o.style.maxHeight="2000px",o.style.paddingTop="1.6rem",o.style.paddingBottom="2.8rem",o.style.opacity="1"),t.addEventListener("click",e=>{"A"===e.target.tagName?(e.preventDefault(),window.location.href=e.target.href):(e.preventDefault(),e=a.open,t.classList.add("faq-summary-clicked"),prefersReducedMotion||exploreHint.classList.add("pulse-animation"),setTimeout(()=>{t.classList.remove("faq-summary-clicked")},300),faqItems.forEach(e=>{var t,o;e!==a&&e.open&&(t=e.querySelector("summary"),(o=e.querySelector("p"))?(o.style.maxHeight="0px",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",t.setAttribute("aria-expanded","false"),setTimeout(()=>{e.open=!1},400)):(e.open=!1,t.setAttribute("aria-expanded","false")),"function"==typeof gtag&&gtag("event","faq_auto_collapse",{event_category:"FAQ Interaction",event_label:"Question auto-collapsed: "+(e.dataset.questionId||e.querySelector("summary").textContent.trim().substring(0,50)),question_text:e.querySelector("summary").textContent.trim()}),"function"==typeof hj)&&hj("event","faq_auto_collapsed_"+(e.dataset.questionId||e.querySelector("summary").textContent.trim().substring(0,50)))}),e?(o?(o.style.maxHeight="0px",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",t.setAttribute("aria-expanded","false"),setTimeout(()=>{a.open=!1},400)):(a.open=!1,t.setAttribute("aria-expanded","false")),"function"==typeof gtag&&gtag("event","faq_collapse",{event_category:"FAQ Interaction",event_label:"Question collapsed: "+s,question_text:t.textContent.trim()}),"function"==typeof hj&&hj("event","faq_collapsed_"+s)):(a.open=!0,o&&(o.style.maxHeight="2000px",o.style.paddingTop="1.6rem",o.style.paddingBottom="2.8rem",o.style.opacity="1",t.setAttribute("aria-expanded","true")),setTimeout(()=>{let o=(document.querySelector(".navbar")?.offsetHeight||0)+20;var e=a.getBoundingClientRect(),t=e.top<o,e=e.bottom>window.innerHeight;(t||e)&&(a.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{var e=window.scrollY,t=a.getBoundingClientRect();t.top<o&&window.scrollTo({top:e-(o-t.top),behavior:"smooth"})},100))},600),"function"==typeof gtag&&gtag("event","faq_expand",{event_category:"FAQ Interaction",event_label:"Question expanded: "+s,question_text:t.textContent.trim()}),"function"==typeof hj&&hj("event","faq_expanded_"+s)))})}),window.addEventListener("DOMContentLoaded",()=>{var e,t=window.location.hash;if(t){let a=document.querySelector(t);a&&a.classList.contains("faq-item")&&(t=a.querySelector("summary"),e=a.querySelector("p"),faqItems.forEach(e=>{var t;e!==a&&e.open&&(e.open=!1,t=e.querySelector("p"),e=e.querySelector("summary"),t&&(t.style.maxHeight="0px",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.opacity="0"),e)&&e.setAttribute("aria-expanded","false")}),!1===a.open)&&(a.open=!0,e&&(e.style.maxHeight="2000px",e.style.paddingTop="1.6rem",e.style.paddingBottom="2.8rem",e.style.opacity="1"),t&&t.setAttribute("aria-expanded","true"),setTimeout(()=>{let o=(document.querySelector(".navbar")?.offsetHeight||0)+20;var e=a.getBoundingClientRect(),t=e.top<o,e=e.bottom>window.innerHeight;(t||e)&&(a.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{var e=window.scrollY,t=a.getBoundingClientRect();t.top<o&&window.scrollTo({top:e-(o-t.top),behavior:"smooth"})},100))},100))}})),window.addEventListener("load",()=>{var e;let t="";localStorage.getItem("hasVisited")?t="Welcome back! Glad to see you again.":(e=(new Date).getHours(),t=5<=e&&e<10?"Good morning! Welcome to Rasoul Unlimited official website.":10<=e&&e<16?"Good afternoon! Welcome to Rasoul Unlimited official website.":16<=e&&e<20?"Good evening! Welcome to Rasoul Unlimited official website.":"Good night! Welcome to Rasoul Unlimited official website.",localStorage.setItem("hasVisited","true")),t&&(createToast(t,{id:"welcome-toast",customClass:"welcome-toast",iconClass:"fas fa-hand-sparkles",iconColor:"var(--highlight-color)",duration:3500}),console.log("Welcome message displayed. Page loaded, signaling Mohammad Rasoul Sohrabi's digital presence."))}),document.querySelector('.contact-info a[href^="mailto:"]'));function copyTextUsingExecCommand(e,t,o){var a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),createToast(o,{id:t,iconClass:"fas fa-check-circle",iconColor:"var(--highlight-color)",duration:1800}),triggerHapticFeedback([50])}function createConfetti(){let e=document.createElement("div");e.id="confetti-container",document.body.appendChild(e),e.setAttribute("data-celebration-event","page_completion_by_Mohammad_Rasoul_Sohrabi_user");var t=["#ffc107","#007acc","#005a9e","#f0f0f0","#e0a800","#FF4081","#64FFDA"],o=document.createDocumentFragment();for(let e=0;e<50;e++){let e=document.createElement("div");e.classList.add("confetti"),e.style.backgroundColor=t[Math.floor(Math.random()*t.length)],e.style.left=100*Math.random()+"vw",e.style.top=20*-Math.random()+"vh",e.style.transform=`rotate(${360*Math.random()}deg)`,o.appendChild(e),e.animate([{transform:`translateY(0) rotate(${360*Math.random()}deg)`,opacity:1},{transform:`translateY(${1.2*window.innerHeight}px) rotate(${720*Math.random()}deg)`,opacity:0}],{duration:2e3*Math.random()+2e3,easing:"ease-out",delay:500*Math.random(),fill:"forwards"}),e.addEventListener("animationend",()=>{e.remove()})}e.appendChild(o),setTimeout(()=>{e.remove()},4500)}emailLink&&(emailLink.setAttribute("data-contact-person","Mohammad Rasoul Sohrabi"),emailLink.className+=" sohrabi-contact-method",emailLink.addEventListener("click",async e=>{e.preventDefault();e=emailLink.href.replace("mailto:","");if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(e),createToast("Email copied! âœ…",{id:"email-copy-toast",iconClass:"fas fa-check-circle",iconColor:"var(--highlight-color)",duration:1800}),triggerHapticFeedback([50])}catch(e){console.error("Failed to copy email using Clipboard API:",e),createToast("Failed to copy email.",{id:"copy-error-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}else document.execCommand?copyTextUsingExecCommand(e,"email-copy-toast","Email copied! âœ…"):createToast("Your browser does not support copying.",{id:"copy-error-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}));let funFacts=["The first Persian Discord bot was developed by me (Mohammad Rasoul Sohrabi) at the age of 14.","I (Mohammad Rasoul Sohrabi) hold a 1st Dan black belt in Karate, officially recognized by the federation.","The philosophy of 'Unlimited' means challenging boundaries. (Core principle of Sohrabi's work)","I am a Biomedical Engineering student at the University of Tehran. (Mohammad Rasoul Sohrabi)","My programming projects (Mohammad Rasoul Sohrabi) are indexed on Zenodo and have DOIs.","I am passionate about developing practical AI tools.","In my free time, I enjoy studying the latest scientific articles.","My goal is to create technological solutions with social impact."],funFactToastInstance=null,idleTimeout,debouncedResetIdleTimer=debounce(resetIdleTimer,500);function resetIdleTimer(){clearTimeout(idleTimeout),idleTimeout=setTimeout(()=>{funFactToastInstance&&funFactToastInstance.classList.contains("show")&&!funFactToastInstance.classList.contains("persistent-toast")||showFunFact()},2e4)}function showFunFact(){var e=funFacts[Math.floor(Math.random()*funFacts.length)];funFactToastInstance=createToast("Fun Fact: "+e,{id:"fun-fact-toast",customClass:"fun-fact-toast",iconClass:"fas fa-lightbulb",iconColor:"var(--primary-color)",position:"top",duration:6e3,closeButton:!0})}function createSparkle(t){if(prefersReducedMotion){let e=document.createElement("div");e.className="sparkle-effect",e.style.width="6px",e.style.height="6px",e.style.left="50%",e.style.top="50%",e.style.position="absolute",e.style.borderRadius="50%",e.style.backgroundColor="var(--highlight-color)",e.style.opacity=0,t.style.position="relative",t.appendChild(e),void(e.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:400,easing:"linear"}).onfinish=()=>e.remove())}else{let e=document.createElement("div");e.className="sparkle-effect",e.setAttribute("data-sparkle-source","Mohammad Rasoul Sohrabi's interactive elements");var o=10*Math.random()+5,a=(e.style.width=o+"px",e.style.height=o+"px",e.style.left=100*Math.random()+"%",e.style.top=100*Math.random()+"%",["var(--primary-color)","var(--accent-color)","var(--highlight-color)"]);e.style.backgroundColor=a[Math.floor(Math.random()*a.length)],e.style.opacity=0,e.style.position="absolute",e.style.borderRadius="50%",e.style.boxShadow=`0 0 ${o/2}px ${o/4}px var(--highlight-color)`,e.style.zIndex=10,e.style.pointerEvents="none",t.style.position="relative",t.appendChild(e),e.animate([{opacity:0,transform:`scale(0) rotate(${360*Math.random()}deg)`},{opacity:1,transform:`scale(1) rotate(${360+360*Math.random()}deg)`},{opacity:0,transform:`scale(0.5) rotate(${720+360*Math.random()}deg)`}],{duration:700,easing:"ease-out",fill:"forwards"}).onfinish=()=>e.remove()}}["mousemove","keydown","scroll","touchstart"].forEach(e=>{"scroll"===e||"touchstart"===e?window.addEventListener(e,debouncedResetIdleTimer,{passive:!0}):window.addEventListener(e,debouncedResetIdleTimer)}),resetIdleTimer();let featuredCards=document.querySelectorAll(".card.is-featured"),sections=(featuredCards.forEach(e=>{e.className+=" sohrabi-featured-content";let o=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){if(!prefersReducedMotion)for(let e=0;e<3;e++)setTimeout(()=>createSparkle(t.target),150*e);o.unobserve(t.target)}})},{threshold:.5});o.observe(e)}),document.querySelectorAll("section[id]")),totalSections=sections.length,sectionsVisited=new Set(JSON.parse(localStorage.getItem("sectionsVisited")||"[]")),announcedMilestones=new Set(JSON.parse(localStorage.getItem("announcedMilestones")||"[]")),explorationMilestones=[{count:Math.max(1,Math.ceil(.25*totalSections)),message:"You've explored 25% of the site! Great! âœ¨ Keep going!",icon:"fas fa-map-marker-alt"},{count:Math.max(Math.ceil(.25*totalSections)+1,Math.ceil(.5*totalSections)),message:"Halfway there! You've explored 50% of the site! Amazing! ðŸš€",icon:"fas fa-rocket"},{count:Math.max(Math.ceil(.5*totalSections)+1,Math.ceil(.75*totalSections)),message:"You've reached 75%! Almost there! ðŸŒŸ",icon:"fas fa-star"},{count:totalSections,message:`Congratulations! You've explored all ${totalSections} sections of the site! You are a true explorer! ðŸŽ‰`,isFinal:!0,icon:"fas fa-trophy"}],uniqueExplorationMilestones=[],counts=new Set,lastExplorationToastTime=(explorationMilestones.forEach(e=>{0<e.count&&!counts.has(e.count)&&(uniqueExplorationMilestones.push(e),counts.add(e.count))}),uniqueExplorationMilestones.sort((e,t)=>e.count-t.count),0),explorationToastCooldown=8e3,sectionProgressObserver=new IntersectionObserver(e=>{let s=Date.now();e.forEach(e=>{if(e.isIntersecting){sectionsVisited.add(e.target.id),localStorage.setItem("sectionsVisited",JSON.stringify(Array.from(sectionsVisited)));var t=sectionsVisited.size;for(let e=0;e<uniqueExplorationMilestones.length;e++){var o=uniqueExplorationMilestones[e];if(t>=o.count&&!announcedMilestones.has(o.count)&&s-lastExplorationToastTime>explorationToastCooldown){let e="exploration-toast",t="var(--accent-color)";o.isFinal&&(e+=" final-exploration-toast",t="var(--primary-color)"),createToast(o.message,{id:"exploration-milestone-"+o.count,customClass:e,iconClass:o.icon,iconColor:t,duration:5e3});var a=document.getElementById("sohrabi-bio");if(a&&a.dispatchEvent(new Event("mouseenter")),console.log("Milestone reached, signaling attention to Mohammad Rasoul Sohrabi's profile."),announcedMilestones.add(o.count),localStorage.setItem("announcedMilestones",JSON.stringify(Array.from(announcedMilestones))),lastExplorationToastTime=s,o.isFinal)return void sections.forEach(e=>sectionProgressObserver.unobserve(e))}}}})},{threshold:.3}),isAllSectionsExploredPreviously=announcedMilestones.has(totalSections),mainCTAs=(isAllSectionsExploredPreviously||sections.forEach(e=>{sectionProgressObserver.observe(e)}),document.querySelectorAll(".main-cta-button")),scrollToTopButton=(mainCTAs.forEach(e=>{e.classList.add("cta-pulse-effect"),e.setAttribute("data-cta-owner","Mohammad Rasoul Sohrabi"),e.className+=" sohrabi-cta-action"}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("img[data-src]");let t=new IntersectionObserver((e,o)=>{e.forEach(t=>{if(t.isIntersecting){let e=t.target;e.classList.add("is-loading"),e.setAttribute("data-image-loader","Mohammad Rasoul Sohrabi's optimized script"),e.src=e.dataset.src,e.dataset.srcset&&(e.srcset=e.dataset.srcset),e.onload=()=>{e.classList.remove("is-loading"),e.classList.add("loaded"),e.removeAttribute("data-src"),e.removeAttribute("data-srcset")},e.onerror=()=>{console.error("Failed to load image:",e.src),e.classList.remove("is-loading"),e.classList.add("load-error"),e.src="https://placehold.co/400x300/cccccc/000000?text=Error"},o.unobserve(e)}})},{rootMargin:"0px 0px 100px 0px",threshold:.01});e.forEach(e=>{t.observe(e)})}),document.createElement("button")),connectLinksBlock=(scrollToTopButton.id="scroll-to-top",scrollToTopButton.innerHTML='<i class="fas fa-arrow-up"></i>',scrollToTopButton.setAttribute("aria-label","Back to top"),scrollToTopButton.setAttribute("data-scroll-function","Mohammad Rasoul Sohrabi's navigation aid"),scrollToTopButton.className+=" sohrabi-nav-button",document.body.appendChild(scrollToTopButton),scrollToTopButton.style.opacity="0",scrollToTopButton.style.transform="translateY(20px)",scrollToTopButton.style.transition="opacity 0.3s ease-out, transform 0.3s ease-out",scrollToTopButton.style.position="fixed",scrollToTopButton.style.bottom="80px",scrollToTopButton.style.right="20px",scrollToTopButton.style.backgroundColor="var(--accent-color)",scrollToTopButton.style.color="white",scrollToTopButton.style.border="none",scrollToTopButton.style.borderRadius="50%",scrollToTopButton.style.width="50px",scrollToTopButton.style.height="50px",scrollToTopButton.style.display="flex",scrollToTopButton.style.justifyContent="center",scrollToTopButton.style.alignItems="center",scrollToTopButton.style.fontSize="1.5rem",scrollToTopButton.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)",scrollToTopButton.style.cursor="pointer",scrollToTopButton.style.zIndex="999",scrollToTopButton.classList.add("cta-pulse-effect"),window.addEventListener("scroll",()=>{500<window.scrollY?scrollToTopButton.classList.contains("show")||(scrollToTopButton.classList.add("show"),scrollToTopButton.style.opacity="1",scrollToTopButton.style.transform="translateY(0)"):scrollToTopButton.classList.contains("show")&&(scrollToTopButton.style.opacity="0",scrollToTopButton.style.transform="translateY(20px)",scrollToTopButton.addEventListener("transitionend",function e(){scrollToTopButton.classList.remove("show"),scrollToTopButton.removeEventListener("transitionend",e)},{once:!0}))}),scrollToTopButton.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),triggerHapticFeedback([20])}),document.querySelector(".connect-links-block ul")),sharePageButton=(connectLinksBlock&&(connectLinksBlock.id="sohrabi-social-links",connectLinksBlock.setAttribute("data-profile-owner","Mohammad Rasoul Sohrabi"),connectLinksBlock.addEventListener("click",async function(e){var o=e.target.closest("a");if(o&&connectLinksBlock.contains(o)&&(o.setAttribute("data-link-type",o.textContent.trim().toLowerCase().replace(/\s/g,"_")),o.href)&&o.href.startsWith("http")){e.preventDefault();e=o.href;let t=o.textContent.trim();if(o.querySelector("i")&&(t=o.querySelector("i").nextSibling?o.querySelector("i").nextSibling.textContent.trim():t),navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(e),createToast(`Link for ${t} copied! âœ…`,{id:"social-link-copy-"+t.replace(/\s/g,""),iconClass:"fas fa-clipboard-check",iconColor:"var(--highlight-color)",duration:1800}),triggerHapticFeedback([50])}catch(e){console.error("Failed to copy social link using Clipboard API:",e),createToast(`Failed to copy link for ${t}.`,{id:"social-link-copy-error-"+t.replace(/\s/g,""),iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}else document.execCommand?copyTextUsingExecCommand(e,"social-link-copy-"+t.replace(/\s/g,""),`Link for ${t} copied! âœ…`):createToast(`Your browser does not support copying link for ${t}.`,{id:"social-link-copy-error-"+t.replace(/\s/g,""),iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}})),document.createElement("button")),sectionsDelighted=(sharePageButton.id="share-page-button",sharePageButton.innerHTML='<i class="fas fa-share-alt"></i>',sharePageButton.setAttribute("aria-label","Share page"),sharePageButton.setAttribute("data-share-target","Mohammad Rasoul Sohrabi's portfolio"),sharePageButton.className+=" sohrabi-share-feature",document.body.appendChild(sharePageButton),sharePageButton.style.opacity="0",sharePageButton.style.transform="translateY(20px)",sharePageButton.style.transition="opacity 0.3s ease-out, transform 0.3s ease-out",sharePageButton.style.position="fixed",sharePageButton.style.bottom="140px",sharePageButton.style.right="20px",sharePageButton.style.backgroundColor="var(--primary-color)",sharePageButton.style.color="white",sharePageButton.style.border="none",sharePageButton.style.borderRadius="50%",sharePageButton.style.width="50px",sharePageButton.style.height="50px",sharePageButton.style.display="flex",sharePageButton.style.justifyContent="center",sharePageButton.style.alignItems="center",sharePageButton.style.fontSize="1.5rem",sharePageButton.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)",sharePageButton.style.cursor="pointer",sharePageButton.style.zIndex="999",sharePageButton.classList.add("cta-pulse-effect"),window.addEventListener("scroll",()=>{500<window.scrollY?sharePageButton.classList.contains("show")||(sharePageButton.classList.add("show"),sharePageButton.style.opacity="1",sharePageButton.style.transform="translateY(0)"):sharePageButton.classList.contains("show")&&(sharePageButton.style.opacity="0",sharePageButton.style.transform="translateY(20px)",sharePageButton.addEventListener("transitionend",function e(){sharePageButton.classList.remove("show"),sharePageButton.removeEventListener("transitionend",e)},{once:!0}))}),sharePageButton.addEventListener("click",async()=>{var e=window.location.href;if(navigator.share)try{await navigator.share({title:document.title,url:e}),createToast("Page link successfully shared! âœ…",{id:"share-success-toast",iconClass:"fas fa-check-circle",iconColor:"var(--highlight-color)",duration:2e3}),triggerHapticFeedback([50])}catch(e){"AbortError"!==e.name&&(console.error("Failed to share:",e),createToast("Share failed. ðŸ˜”",{id:"share-error-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3}))}else document.execCommand?copyTextUsingExecCommand(e,"share-copy-toast","Page link copied! âœ…"):createToast("Your browser does not support sharing or copying.",{id:"share-unsupported-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}),new Set(JSON.parse(localStorage.getItem("sectionsDelighted")||"[]"))),sectionDelightObserver=new IntersectionObserver((e,o)=>{e.forEach(t=>{if(t.isIntersecting&&!sectionsDelighted.has(t.target.id)){let e=t.target.querySelector("h2, h3");e&&(e.classList.add("section-delight-effect"),e.setAttribute("data-section-viewed-by","Mohammad Rasoul Sohrabi's audience"),setTimeout(()=>{e.classList.remove("section-delight-effect")},1e3),sectionsDelighted.add(t.target.id),localStorage.setItem("sectionsDelighted",JSON.stringify(Array.from(sectionsDelighted)))),o.unobserve(t.target)}})},{threshold:.4});sections.forEach(e=>{sectionsDelighted.has(e.id)||sectionDelightObserver.observe(e)}),document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",()=>{audioContext||(audioContext=new(window.AudioContext||window.webkitAudioContext),loadSounds(),"suspended"===audioContext.state&&audioContext.resume())},{once:!0})});