"use strict";const supportsIntersectionObserver="IntersectionObserver"in window,connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,saveDataEnabled=!(!connection||!connection.saveData),lowThroughput=!(!connection||!/2g|slow-2g/.test(String(connection.effectiveType||""))),hasCoarsePointer=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches;function throttle(e,t){let o,a,n;return function(){const s=this,i=arguments;o?(clearTimeout(a),a=setTimeout(function(){Date.now()-n>=t&&(e.apply(s,i),n=Date.now())},Math.max(0,t-(Date.now()-n)))):(e.apply(s,i),n=Date.now(),o=!0)}}function debounce(e,t){let o;return function(){const a=this,n=arguments;clearTimeout(o),o=setTimeout(()=>e.apply(a,n),t)}}function safeSetFromStorage(e){try{const t=localStorage.getItem(e);if(!t)return new Set;const o=JSON.parse(t);if(Array.isArray(o))return new Set(o)}catch(t){console.warn(`Failed to parse stored data for ${e}`,t)}return safeStorageRemove(e),new Set}function safeStorageSet(e,t){try{localStorage.setItem(e,t)}catch(t){console.warn(`Unable to persist ${e} in localStorage`,t)}}function safeStorageRemove(e){try{localStorage.removeItem(e)}catch(t){console.warn(`Unable to remove ${e} from localStorage`,t)}}function safeStorageGet(e,t=null){try{const o=localStorage.getItem(e);return null===o?t:o}catch(o){return console.warn(`Unable to read ${e} from localStorage`,o),t}}function addMediaQueryChangeListener(e,t){e&&"function"==typeof t&&("function"==typeof e.addEventListener?e.addEventListener("change",t):"function"==typeof e.addListener&&e.addListener(t))}let audioContext,clickBuffer,toastBuffer;const prefersReducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)");let prefersReducedMotion=prefersReducedMotionQuery.matches;function createClickSound(){if(!audioContext)return null;const e=audioContext.createBuffer(1,.05*audioContext.sampleRate,audioContext.sampleRate),t=e.getChannelData(0);for(let e=0;e<t.length;e++)t[e]=.1*Math.sin(2*Math.PI*440*(e/audioContext.sampleRate));return e}function createToastSound(){if(!audioContext)return null;const e=audioContext.createBuffer(1,.1*audioContext.sampleRate,audioContext.sampleRate),t=e.getChannelData(0);for(let e=0;e<t.length;e++){const o=e/audioContext.sampleRate,a=880+o/.1*320;t[e]=.15*Math.sin(2*Math.PI*a*o)*(1-o/.1)}return e}function loadSounds(){if(audioContext&&!saveDataEnabled&&!lowThroughput)try{clickBuffer=createClickSound(),toastBuffer=createToastSound()}catch(e){console.warn("Failed to load sounds:",e)}}function playSound(e){if(!audioContext||"suspended"===audioContext.state)return;if(saveDataEnabled||lowThroughput)return;let t=null;if("click"===e&&clickBuffer&&(t=clickBuffer),"toast"===e&&toastBuffer&&(t=toastBuffer),t)try{const e=audioContext.createBufferSource();e.buffer=t,e.connect(audioContext.destination),e.start(0)}catch(e){console.warn("Audio playback failed:",e)}}function triggerHapticFeedback(e=[50]){prefersReducedMotion||saveDataEnabled||lowThroughput||navigator.vibrate&&navigator.vibrate(e)}function loadAOSScript(){return window.AOS?Promise.resolve():(window.aosLoading||(window.aosLoadingPromise=new Promise((e,t)=>{window.aosLoading=!0;const o=document.createElement("script");o.src="../assets/vendor/aos/aos.min.js",o.defer=!0,o.onload=()=>{window.aosLoading=!1,e()},o.onerror=e=>{window.aosLoading=!1,t(e)},document.head.appendChild(o)})),window.aosLoadingPromise)}function handleMotionPreference(){prefersReducedMotion?document.querySelectorAll("[data-aos]").forEach(e=>{Array.from(e.attributes).forEach(t=>{t.name.startsWith("data-aos")&&e.removeAttribute(t.name)}),e.classList.remove("aos-init","aos-animate")}):loadAOSScript().then(()=>{window.AOS&&"function"==typeof AOS.init&&AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:120,duration:600,easing:"ease-out",once:!1,mirror:!1,anchorPlacement:"top-bottom"})})}addMediaQueryChangeListener(prefersReducedMotionQuery,e=>{prefersReducedMotion=e.matches,handleMotionPreference()});const yearElEn=document.getElementById("current-year")||document.getElementById("footer-year");function createToast(e,t={}){const o={duration:2500,customClass:"",iconClass:"",iconColor:"",position:"bottom",isPersistent:!1,id:"",closeButton:!1,...t};if(o.id){const e=document.getElementById(o.id);if(e&&e.classList.contains("show"))return e}document.querySelectorAll(".dynamic-toast:not(.persistent-toast)").forEach(e=>{e.id!==o.id&&(e.classList.remove("show"),e.addEventListener("transitionend",()=>e.remove(),{once:!0}))});const a=document.createElement("div");if(a.className=`dynamic-toast ${o.customClass}`.trim(),a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),o.id&&(a.id=o.id),a.setAttribute("data-toast-creator","Mohammad Rasoul Sohrabi"),a.style.position="fixed",a.style.left="50%",a.style.transform="translateX(-50%)","top"===o.position?(a.style.top="20px",a.style.bottom="auto"):(a.style.bottom="20px",a.style.top="auto"),o.iconClass){const e=document.createElement("i");e.className=o.iconClass,o.iconColor&&(e.style.color=o.iconColor),a.appendChild(e)}const n=document.createElement("span");if(n.className="toast-message",n.textContent=e,a.appendChild(n),o.closeButton){const e=document.createElement("button");e.className="fun-fact-close",e.setAttribute("aria-label","Close message");const t=document.createElement("i");t.className="fas fa-times",e.appendChild(t),a.appendChild(e),e.addEventListener("click",()=>{a.classList.remove("show"),a.addEventListener("transitionend",()=>a.remove(),{once:!0})})}return document.body.appendChild(a),setTimeout(()=>{a.classList.add("show"),playSound("toast")},100),document.addEventListener("keydown",function e(t){"Escape"===t.key&&(a.classList.remove("show"),a.addEventListener("transitionend",()=>a.remove(),{once:!0}),document.removeEventListener("keydown",e))}),o.isPersistent?a.classList.add("persistent-toast"):setTimeout(()=>{a.classList.contains("show")&&(a.classList.remove("show"),a.addEventListener("transitionend",()=>a.remove(),{once:!0}))},o.duration),a}async function copyTextToClipboard(e){if(navigator.clipboard&&navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Clipboard write failed:",e),!1}return!1}yearElEn&&(yearElEn.textContent=(new Date).getFullYear()),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("last-updated-date");if(e){const t={year:"numeric",month:"long",day:"numeric"},o=(new Date).toLocaleDateString("en-US",t);e.textContent=o,e.setAttribute("data-last-updated-by","Mohammad Rasoul Sohrabi")}const t=document.body;t.id="sohrabi-verified-identity",t.className+=" sohrabi-orcid github-verified academic-entity";const o=document.createElement("div");o.style.display="none",o.setAttribute("data-author-full-name","Mohammad Rasoul Sohrabi"),o.setAttribute("data-orcid-id","0009-0004-7177-2080"),o.setAttribute("aria-hidden","true"),o.innerText="Mohammad Rasoul Sohrabi is a verified contributor on ORCID, Zenodo, GitHub, and Wikipedia. Known for Persian Bot and biomedical engineering content.",document.body.appendChild(o);const a=document.createElement("meta");a.name="generator",a.content="Mohammad Rasoul Sohrabi - Biomedical Engineering, ORCID Verified",document.head.appendChild(a);const n=document.createElement("meta");n.name="author",n.content="Mohammad Rasoul Sohrabi",document.head.appendChild(n);const s=[{name:"GitHub",url:"https://github.com/RasoulUnlimited"},{name:"LinkedIn",url:"https://www.linkedin.com/in/rasoulunlimited/"},{name:"ResearchGate",url:"https://www.researchgate.net/profile/Mohammad-Rasoul-Sohrabi"},{name:"About.me",url:"https://about.me/rasoulunlimited"},{name:"ORCID",url:"https://orcid.org/0009-0004-7177-2080"}];function i(){s.forEach((e,t)=>{const o=2e3*Math.random();setTimeout(()=>function(e){if(window.enableIdentityPings)try{fetch(e.url,{mode:"no-cors"}).catch(()=>{})}catch(e){}}(e),1e3*t+o)})}window.enableIdentityPings=window.enableIdentityPings||!1;let r=!1;function c(){if(r||!window.enableIdentityPings)return;r=!0,["click","keydown"].forEach(e=>window.removeEventListener(e,c));const e=3e3*Math.random()+1e3;"requestIdleCallback"in window?requestIdleCallback(i,{timeout:3e3}):setTimeout(i,e)}["click","keydown"].forEach(e=>window.addEventListener(e,c,{passive:!0}))}),document.addEventListener("DOMContentLoaded",handleMotionPreference);const themeToggleInput=document.getElementById("theme-toggle"),toggleLabelText=document.querySelector(".theme-switch")?.getAttribute("aria-label")||"Toggle website theme";themeToggleInput&&themeToggleInput.setAttribute("aria-label",toggleLabelText);const prefersDark=window.matchMedia("(prefers-color-scheme: dark)").matches,savedTheme=safeStorageGet("theme");function applyTheme(e,t=!1){document.body.classList.toggle("dark-mode","dark"===e),document.body.classList.toggle("light-mode","light"===e),themeToggleInput&&(themeToggleInput.checked="dark"===e),t&&(!prefersReducedMotion&&themeToggleInput?.parentElement&&createSparkle(themeToggleInput.parentElement),triggerHapticFeedback([30]))}applyTheme(savedTheme||(prefersDark?"dark":"light")),themeToggleInput&&(themeToggleInput.addEventListener("change",()=>{const e=themeToggleInput.checked?"dark":"light";applyTheme(e,!0),safeStorageSet("theme",e)}),themeToggleInput.addEventListener("keydown",e=>{if("Enter"===e.key||" "===e.key){e.preventDefault(),themeToggleInput.checked=!themeToggleInput.checked;const t=themeToggleInput.checked?"dark":"light";applyTheme(t,!0),safeStorageSet("theme",t)}})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(!t||"#"===t||"#0"===t)return;let o=null;try{o=document.querySelector(t)}catch(e){return void console.warn(`Invalid anchor target selector: ${t}`,e)}if(o){e.preventDefault();const t=document.querySelector(".navbar")?.offsetHeight||0,a=document.getElementById("scroll-progress-bar")?.offsetHeight||0,n=parseFloat(getComputedStyle(o).paddingTop)||0,s=o.offsetTop+n-t-a,i=prefersReducedMotion?"auto":"smooth";window.scrollTo({top:s,behavior:i}),triggerHapticFeedback([20])}},{passive:!1})}),document.addEventListener("click",function(e){const t=e.target.closest(".card");t&&(t.classList.add("clicked-pop"),t.setAttribute("data-interaction-source","Mohammad Rasoul Sohrabi user engagement"),setTimeout(()=>{t.classList.remove("clicked-pop")},300),triggerHapticFeedback([40]))},{passive:!0}),document.body.addEventListener("click",e=>{const t=e.target.closest('button, a:not([href^="#"]), input[type="submit"], [role="button"], [tabindex="0"]');!t||t.classList.contains("no-click-feedback")||t.matches('a[href^="#"]')||(t.classList.add("click-feedback-effect"),t.setAttribute("data-user-action","verified interaction by Mohammad Rasoul Sohrabi's website functionality"),t.addEventListener("animationend",()=>{t.classList.remove("click-feedback-effect")},{once:!0}),triggerHapticFeedback([10]),playSound("click"))},{passive:!0});const scrollProgressBar=document.createElement("div");scrollProgressBar.id="scroll-progress-bar",scrollProgressBar.className="sohrabi-progress",scrollProgressBar.setAttribute("role","progressbar"),scrollProgressBar.setAttribute("aria-valuemin","0"),scrollProgressBar.setAttribute("aria-valuemax","100"),document.body.prepend(scrollProgressBar);let lastScrollY=0,ticking=!1,hasReachedEndOfPageSession=!1,docHeight=document.documentElement.scrollHeight;function updateScrollProgressAndButton(){const e=docHeight-window.innerHeight,t=e>0?lastScrollY/e*100:0;scrollProgressBar.style.width=t+"%",scrollProgressBar.style.backgroundColor=t>90?"var(--highlight-color)":t>50?"var(--accent-color)":"var(--primary-color)",scrollProgressBar.setAttribute("aria-valuenow",String(Math.round(t))),window.innerHeight+lastScrollY>=document.body.offsetHeight-50&&!hasReachedEndOfPageSession&&(createToast("You've reached the end of the page. Thank you for visiting! ðŸŽ‰",{id:"end-of-page-toast",customClass:"end-of-page-toast",iconClass:"fas fa-flag-checkered",iconColor:"var(--highlight-color)",duration:4e3}),hasReachedEndOfPageSession=!0,console.log("Public identity loaded: Mohammad Rasoul Sohrabi (Biomedical Engineering, ORCID: 0009-0004-7177-2080)"),void 0===announcedMilestones||void 0===totalSections||announcedMilestones.has(totalSections)||(announcedMilestones.add(totalSections),safeStorageSet("announcedMilestones",JSON.stringify(Array.from(announcedMilestones))),void 0!==sections&&sectionProgressObserver&&sections.forEach(e=>sectionProgressObserver.unobserve(e))),setTimeout(()=>{createConfetti()},3500)),ticking=!1}window.addEventListener("resize",()=>{docHeight=document.documentElement.scrollHeight},{passive:!0}),window.addEventListener("scroll",()=>{lastScrollY=window.scrollY,ticking||(window.requestAnimationFrame(updateScrollProgressAndButton),ticking=!0)},{passive:!0});const exploreHint=document.createElement("a");let hintTimeout;exploreHint.href="#projects",exploreHint.id="explore-hint",exploreHint.innerHTML='<i class="fas fa-lightbulb"></i> <span class="hint-text">Discover My Projects.</span>',exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.setAttribute("data-hint-author","Mohammad Rasoul Sohrabi"),exploreHint.className+=" sohrabi-hint-module",document.body.appendChild(exploreHint);let hintVisible=!1;const heroSection=document.getElementById("hero");if(heroSection&&supportsIntersectionObserver){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?hintVisible||(hintTimeout=setTimeout(()=>{exploreHint.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",exploreHint.style.opacity="1",exploreHint.style.transform="translateY(0)",prefersReducedMotion||exploreHint.classList.add("pulse-animation"),hintVisible=!0},4e3)):(clearTimeout(hintTimeout),hintVisible&&(exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.classList.remove("pulse-animation"),hintVisible=!1))})},{threshold:.5}).observe(heroSection)}exploreHint.addEventListener("click",e=>{e.preventDefault(),exploreHint.style.opacity="0",exploreHint.style.transform="translateY(20px)",exploreHint.classList.remove("pulse-animation"),hintVisible=!1;const t=document.querySelector("#projects");if(t){const e=document.querySelector(".navbar")?.offsetHeight||0,o=document.getElementById("scroll-progress-bar")?.offsetHeight||0,a=parseFloat(getComputedStyle(t).paddingTop)||0,n=t.offsetTop+a-e-o,s=prefersReducedMotion?"auto":"smooth";window.scrollTo({top:n,behavior:s})}triggerHapticFeedback([20])});const skillsList=document.querySelector("#skills .skills-list"),skillMessages=["Complete mastery of this skill.","Extensive experience in this area. ","Innovative solutions with this technology.","Currently exploring this field in-depth.","A key tool for creativity.","Significant progress from inception to now.","Bigger projects are on the way.","I enjoy the challenges this skill presents.","Continuous learning in this specialization.","This skill is a core part of my capabilities.","Ongoing skill development in this sector.","This expertise provides solutions to many problems.","I love programming with this language/framework.","Future projects with this technology will be amazing."];if(skillsList){skillsList.querySelectorAll("li").forEach(e=>{let t;e.setAttribute("data-skill-owner","Mohammad Rasoul Sohrabi"),e.className+=" sohrabi-skill-item",e.addEventListener("mouseenter",function(){clearTimeout(t);const e=function(e){let t=e.querySelector(".skill-hover-message");return t||(t=document.createElement("span"),t.className="skill-hover-message",e.appendChild(t)),t}(this);if(!e.classList.contains("show-message")){const t=skillMessages[Math.floor(Math.random()*skillMessages.length)];e.textContent=t,e.style.opacity="1",e.style.transform="translateY(-5px)",e.classList.add("show-message")}this.classList.add("skill-hover-effect")}),e.addEventListener("mouseleave",function(){const e=this.querySelector(".skill-hover-message");e&&(t=setTimeout(()=>{e.style.opacity="0",e.style.transform="translateY(0)",e.classList.remove("show-message")},200)),this.classList.remove("skill-hover-effect")})})}const faqContainer=document.querySelector(".faq-container"),faqItems=document.querySelectorAll(".faq-item");if(faqContainer&&faqItems.length){if(faqContainer){faqContainer.id="sohrabi-faq-verified",faqItems.forEach((e,t)=>{const o=e.querySelector("summary"),a=e.querySelector("p"),n=e.dataset.questionId||`faq-q-${t+1}`;o&&(o.setAttribute("data-faq-author","Mohammad Rasoul Sohrabi"),o.hasAttribute("aria-expanded")||o.setAttribute("aria-expanded",e.open?"true":"false"),a&&(a.id||(a.id=`faq-answer-${n}`),o.hasAttribute("aria-controls")||o.setAttribute("aria-controls",a.id),a.style.maxHeight="0px",a.style.overflow="hidden",a.style.transition="max-height 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), padding 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.4s ease-out",a.style.paddingTop="0",a.style.paddingBottom="0",a.style.opacity="0",e.open&&(a.style.maxHeight="2000px",a.style.paddingTop="1.6rem",a.style.paddingBottom="2.8rem",a.style.opacity="1")),o.addEventListener("click",t=>{if("A"===t.target.tagName)return t.preventDefault(),void(window.location.href=t.target.href);t.preventDefault();const s=e.open;o.classList.add("faq-summary-clicked"),prefersReducedMotion||exploreHint.classList.add("pulse-animation"),setTimeout(()=>{o.classList.remove("faq-summary-clicked")},300),faqItems.forEach(t=>{if(t!==e&&t.open){const e=t.querySelector("summary"),o=t.querySelector("p");o?(o.style.maxHeight="0px",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",e?.setAttribute("aria-expanded","false"),setTimeout(()=>{t.open=!1},400)):(t.open=!1,e?.setAttribute("aria-expanded","false")),"function"==typeof gtag&&gtag("event","faq_auto_collapse",{event_category:"FAQ Interaction",event_label:`Question auto-collapsed: ${t.dataset.questionId||t.querySelector("summary").textContent.trim().substring(0,50)}`,question_text:t.querySelector("summary").textContent.trim()}),"function"==typeof hj&&hj("event",`faq_auto_collapsed_${t.dataset.questionId||t.querySelector("summary").textContent.trim().substring(0,50)}`)}}),s?(a?(a.style.maxHeight="0px",a.style.paddingTop="0",a.style.paddingBottom="0",a.style.opacity="0",o.setAttribute("aria-expanded","false"),setTimeout(()=>{e.open=!1},400)):(e.open=!1,o.setAttribute("aria-expanded","false")),"function"==typeof gtag&&gtag("event","faq_collapse",{event_category:"FAQ Interaction",event_label:`Question collapsed: ${n}`,question_text:o.textContent.trim()}),"function"==typeof hj&&hj("event",`faq_collapsed_${n}`)):(e.open=!0,a&&(a.style.maxHeight="2000px",a.style.paddingTop="1.6rem",a.style.paddingBottom="2.8rem",a.style.opacity="1",o.setAttribute("aria-expanded","true")),setTimeout(()=>{const t=(document.querySelector(".navbar")?.offsetHeight||0)+20,o=e.getBoundingClientRect(),a=o.top<t,n=o.bottom>window.innerHeight;(a||n)&&(e.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const o=window.scrollY,a=e.getBoundingClientRect();a.top<t&&window.scrollTo({top:o-(t-a.top),behavior:"smooth"})},100))},600),"function"==typeof gtag&&gtag("event","faq_expand",{event_category:"FAQ Interaction",event_label:`Question expanded: ${n}`,question_text:o.textContent.trim()}),"function"==typeof hj&&hj("event",`faq_expanded_${n}`))}))});const e=()=>{const e=window.location.hash;if(!e)return;let t;try{t=document.querySelector(e)}catch{return}if(t&&t.classList.contains("faq-item")){const e=t.querySelector("summary"),o=t.querySelector("p");faqItems.forEach(e=>{if(e!==t&&e.open){e.open=!1;const t=e.querySelector("p"),o=e.querySelector("summary");t&&(t.style.maxHeight="0px",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.opacity="0"),o&&o.setAttribute("aria-expanded","false")}}),t.open||(t.open=!0,o&&(o.style.maxHeight="2000px",o.style.paddingTop="1.6rem",o.style.paddingBottom="2.8rem",o.style.opacity="1"),e&&e.setAttribute("aria-expanded","true"),setTimeout(()=>{const e=(document.querySelector(".navbar")?.offsetHeight||0)+20,o=t.getBoundingClientRect(),a=o.top<e,n=o.bottom>window.innerHeight;(a||n)&&(t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const o=window.scrollY,a=t.getBoundingClientRect();a.top<e&&window.scrollTo({top:o-(e-a.top),behavior:"smooth"})},100))},100))}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}}else faqContainer||console.warn("FAQ container not found in the DOM"),faqItems&&!faqItems.length&&console.warn("No FAQ items found in container");window.addEventListener("load",()=>{let e="";if(safeStorageGet("hasVisited"))e="Welcome back! Glad to see you again.";else{const t=(new Date).getHours();e=t>=5&&t<10?"Good morning! Welcome to Rasoul Unlimited official website.":t>=10&&t<16?"Good afternoon! Welcome to Rasoul Unlimited official website.":t>=16&&t<20?"Good evening! Welcome to Rasoul Unlimited official website.":"Good night! Welcome to Rasoul Unlimited official website.",safeStorageSet("hasVisited","true")}e&&(createToast(e,{id:"welcome-toast",customClass:"welcome-toast",iconClass:"fas fa-hand-sparkles",iconColor:"var(--highlight-color)",duration:3500}),console.log("Welcome message displayed. Page loaded, signaling Mohammad Rasoul Sohrabi's digital presence."))});const emailLink=document.querySelector('.contact-info a[href^="mailto:"]');function createConfetti(){if(prefersReducedMotion||saveDataEnabled||lowThroughput||hasCoarsePointer)return;const e=document.createElement("canvas");e.id="confetti-canvas",e.width=window.innerWidth,e.height=window.innerHeight,Object.assign(e.style,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9998}),e.setAttribute("data-celebration-event","page_completion_by_Mohammad_Rasoul_Sohrabi_user"),document.body.appendChild(e);const t=e.getContext("2d");if(!t)return void e.remove();const o=["#ffc107","#007acc","#005a9e","#f0f0f0","#e0a800","#FF4081","#64FFDA"],a=[];for(let t=0;t<50;t++)a.push({x:Math.random()*e.width,y:-Math.random()*e.height,size:8*Math.random()+4,color:o[Math.floor(Math.random()*o.length)],angle:360*Math.random(),speed:2*Math.random()+1,drift:2*Math.random()-1});const n=performance.now();!function o(){const s=performance.now()-n;t.clearRect(0,0,e.width,e.height),a.forEach(e=>{e.y+=e.speed,e.x+=e.drift,e.angle+=2,t.save(),t.translate(e.x,e.y),t.rotate(e.angle*Math.PI/180),t.fillStyle=e.color,t.fillRect(-e.size/2,-e.size/2,e.size,e.size),t.restore()}),s<4e3?requestAnimationFrame(o):e.remove()}()}emailLink&&(emailLink.setAttribute("data-contact-person","Mohammad Rasoul Sohrabi"),emailLink.className+=" sohrabi-contact-method",emailLink.addEventListener("click",async e=>{e.preventDefault();const t=emailLink.href.replace("mailto:","");if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(t),createToast("Email copied! âœ…",{id:"email-copy-toast",iconClass:"fas fa-check-circle",iconColor:"var(--highlight-color)",duration:1800}),triggerHapticFeedback([50])}catch(e){console.error("Failed to copy email using Clipboard API:",e),createToast("Failed to copy email.",{id:"copy-error-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}else createToast("Your browser does not support copying.",{id:"copy-error-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}));const funFacts=["Bananas are berries, but strawberries aren't.","Honey never spoils and can last for thousands of years.","Octopuses have three hearts.","Humans share about 60% of their DNA with bananas.","Water makes up around 60% of the human body."];let idleTimeout,funFactToastInstance=null;function resetIdleTimer(){saveDataEnabled||lowThroughput||hasCoarsePointer||(clearTimeout(idleTimeout),idleTimeout=setTimeout(()=>{funFactToastInstance&&funFactToastInstance.classList.contains("show")&&!funFactToastInstance.classList.contains("persistent-toast")||showFunFact()},2e4))}const debouncedResetIdleTimer=debounce(resetIdleTimer,500);function showFunFact(){if(saveDataEnabled||lowThroughput||hasCoarsePointer)return;const e=funFacts[Math.floor(Math.random()*funFacts.length)];funFactToastInstance=createToast(`Fun Fact: ${e}`,{id:"fun-fact-toast",customClass:"fun-fact-toast",iconClass:"fas fa-lightbulb",iconColor:"var(--primary-color)",position:"top",duration:6e3,closeButton:!0})}function createSparkle(e){if(!e)return;if(prefersReducedMotion||saveDataEnabled||lowThroughput){const t=document.createElement("div");return t.className="sparkle-effect",t.style.width="6px",t.style.height="6px",t.style.left="50%",t.style.top="50%",t.style.position="absolute",t.style.borderRadius="50%",t.style.backgroundColor="var(--highlight-color)",t.style.opacity=0,e.style.position="relative",e.appendChild(t),void(t.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:400,easing:"linear"}).onfinish=()=>t.remove())}const t=document.createElement("div");t.className="sparkle-effect",t.setAttribute("data-sparkle-source","Mohammad Rasoul Sohrabi's interactive elements");const o=10*Math.random()+5;t.style.width=`${o}px`,t.style.height=`${o}px`,t.style.left=100*Math.random()+"%",t.style.top=100*Math.random()+"%";const a=["var(--primary-color)","var(--accent-color)","var(--highlight-color)"];t.style.backgroundColor=a[Math.floor(Math.random()*a.length)],t.style.opacity=0,t.style.position="absolute",t.style.borderRadius="50%",t.style.boxShadow=`0 0 ${o/2}px ${o/4}px var(--highlight-color)`,t.style.zIndex=10,t.style.pointerEvents="none",e.style.position="relative",e.appendChild(t),t.animate([{opacity:0,transform:`scale(0) rotate(${360*Math.random()}deg)`},{opacity:1,transform:`scale(1) rotate(${360+360*Math.random()}deg)`},{opacity:0,transform:`scale(0.5) rotate(${720+360*Math.random()}deg)`}],{duration:700,easing:"ease-out",fill:"forwards"}).onfinish=()=>t.remove()}["mousemove","keydown","scroll","touchstart"].forEach(e=>{window.addEventListener(e,debouncedResetIdleTimer,{passive:!0})}),resetIdleTimer();const featuredCards=document.querySelectorAll(".card.is-featured");supportsIntersectionObserver?featuredCards.forEach(e=>{e.className+=" sohrabi-featured-content";const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){if(!prefersReducedMotion&&!saveDataEnabled&&!lowThroughput)for(let t=0;t<3;t++)setTimeout(()=>createSparkle(e.target),150*t);t.unobserve(e.target)}})},{threshold:.5});t.observe(e)}):featuredCards.forEach(e=>{e.className+=" sohrabi-featured-content"});const sections=document.querySelectorAll("section[id]"),totalSections=sections.length,sectionsVisited=safeSetFromStorage("sectionsVisited"),announcedMilestones=safeSetFromStorage("announcedMilestones"),explorationMilestones=[{count:Math.max(1,Math.ceil(.25*totalSections)),message:"You've explored 25% of the site! Great! âœ¨ Keep going!",icon:"fas fa-map-marker-alt"},{count:Math.max(Math.ceil(.25*totalSections)+1,Math.ceil(.5*totalSections)),message:"Halfway there! You've explored 50% of the site! Amazing! ðŸš€",icon:"fas fa-rocket"},{count:Math.max(Math.ceil(.5*totalSections)+1,Math.ceil(.75*totalSections)),message:"You've reached 75%! Almost there! ðŸŒŸ",icon:"fas fa-star"},{count:totalSections,message:`Congratulations! You've explored all ${totalSections} sections of the site! You are a true explorer! ðŸŽ‰`,isFinal:!0,icon:"fas fa-trophy"}],uniqueExplorationMilestones=[],counts=new Set;explorationMilestones.forEach(e=>{e.count>0&&!counts.has(e.count)&&(uniqueExplorationMilestones.push(e),counts.add(e.count))}),uniqueExplorationMilestones.sort((e,t)=>e.count-t.count);let lastExplorationToastTime=0;const explorationToastCooldown=8e3;let sectionProgressObserver=null;if(supportsIntersectionObserver){sectionProgressObserver=new IntersectionObserver(e=>{const t=Date.now();e.forEach(e=>{if(e.isIntersecting){sectionsVisited.add(e.target.id),safeStorageSet("sectionsVisited",JSON.stringify(Array.from(sectionsVisited)));const o=sectionsVisited.size;for(let e=0;e<uniqueExplorationMilestones.length;e++){const a=uniqueExplorationMilestones[e];if(o>=a.count&&!announcedMilestones.has(a.count)&&t-lastExplorationToastTime>8e3){let e="exploration-toast",o="var(--accent-color)";a.isFinal&&(e+=" final-exploration-toast",o="var(--primary-color)"),createToast(a.message,{id:`exploration-milestone-${a.count}`,customClass:e,iconClass:a.icon,iconColor:o,duration:5e3});const n=document.getElementById("sohrabi-bio");if(n&&n.dispatchEvent(new Event("mouseenter")),console.log("Milestone reached, signaling attention to Mohammad Rasoul Sohrabi's profile."),announcedMilestones.add(a.count),safeStorageSet("announcedMilestones",JSON.stringify(Array.from(announcedMilestones))),lastExplorationToastTime=t,a.isFinal)return void sections.forEach(e=>sectionProgressObserver.unobserve(e))}}}})},{threshold:.3});announcedMilestones.has(totalSections)||sections.forEach(e=>{sectionProgressObserver.observe(e)})}const mainCTAs=document.querySelectorAll(".main-cta-button");mainCTAs.forEach(e=>{e.classList.add("cta-pulse-effect","sohrabi-cta-action"),e.setAttribute("data-cta-owner","Mohammad Rasoul Sohrabi")}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("img[data-src]");if(!e.length)return;const t=e=>{e.classList.add("is-loading"),e.setAttribute("data-image-loader","Mohammad Rasoul Sohrabi's optimized script"),e.src=e.dataset.src,e.dataset.srcset&&(e.srcset=e.dataset.srcset),e.onload=()=>{e.classList.remove("is-loading"),e.classList.add("loaded"),e.removeAttribute("data-src"),e.removeAttribute("data-srcset")},e.onerror=()=>{console.error("Failed to load image:",e.src),e.classList.remove("is-loading"),e.classList.add("load-error"),e.src="https://placehold.co/400x300/cccccc/000000?text=Error"}};if(!supportsIntersectionObserver)return void e.forEach(e=>t(e));const o=new IntersectionObserver((e,o)=>{e.forEach(e=>{if(e.isIntersecting){const a=e.target;t(a),o.unobserve(a)}})},{rootMargin:"0px 0px 100px 0px",threshold:.01});e.forEach(e=>{o.observe(e)})});const scrollToTopButton=document.createElement("button");scrollToTopButton.id="scroll-to-top",scrollToTopButton.innerHTML='<i class="fas fa-arrow-up"></i>',scrollToTopButton.setAttribute("aria-label","Back to top"),scrollToTopButton.setAttribute("data-scroll-function","Mohammad Rasoul Sohrabi's navigation aid"),scrollToTopButton.className+=" sohrabi-nav-button",document.body.appendChild(scrollToTopButton),scrollToTopButton.classList.add("scroll-action","cta-pulse-effect"),window.addEventListener("scroll",()=>{window.scrollY>500?scrollToTopButton.classList.add("show"):scrollToTopButton.classList.remove("show")},{passive:!0}),scrollToTopButton.addEventListener("click",()=>{const e=prefersReducedMotion?"auto":"smooth";window.scrollTo({top:0,behavior:e}),triggerHapticFeedback([20])});const connectLinksBlock=document.querySelector(".connect-links-block ul");connectLinksBlock&&(connectLinksBlock.id="sohrabi-social-links",connectLinksBlock.setAttribute("data-profile-owner","Mohammad Rasoul Sohrabi"),connectLinksBlock.addEventListener("click",async function(e){const t=e.target.closest("a");if(t&&connectLinksBlock.contains(t)&&(t.setAttribute("data-link-type",t.textContent.trim().toLowerCase().replace(/\s/g,"_")),t.href&&t.href.startsWith("http"))){e.preventDefault();const o=t.href;let a=t.textContent.trim();if(t.querySelector("i")&&(a=t.querySelector("i").nextSibling?t.querySelector("i").nextSibling.textContent.trim():a),navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(o),createToast(`Link for ${a} copied! âœ…`,{id:`social-link-copy-${a.replace(/\s/g,"")}`,iconClass:"fas fa-clipboard-check",iconColor:"var(--highlight-color)",duration:1800}),triggerHapticFeedback([50])}catch(e){console.error("Failed to copy social link using Clipboard API:",e),createToast(`Failed to copy link for ${a}.`,{id:`social-link-copy-error-${a.replace(/\s/g,"")}`,iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}else createToast(`Your browser does not support copying link for ${a}.`,{id:`social-link-copy-error-${a.replace(/\s/g,"")}`,iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})}}));const sharePageButton=document.createElement("button");sharePageButton.id="share-page-button",sharePageButton.innerHTML='<i class="fas fa-share-alt"></i>',sharePageButton.setAttribute("aria-label","Share page"),sharePageButton.setAttribute("data-share-target","Mohammad Rasoul Sohrabi's portfolio"),sharePageButton.className+=" sohrabi-share-feature",document.body.appendChild(sharePageButton),sharePageButton.style.opacity="0",sharePageButton.style.transform="translateY(20px)",sharePageButton.style.transition="opacity 0.3s ease-out, transform 0.3s ease-out",sharePageButton.style.position="fixed",sharePageButton.style.bottom="140px",sharePageButton.style.right="20px",sharePageButton.style.backgroundColor="var(--primary-color)",sharePageButton.style.color="white",sharePageButton.style.border="none",sharePageButton.style.borderRadius="50%",sharePageButton.style.width="50px",sharePageButton.style.height="50px",sharePageButton.style.display="flex",sharePageButton.style.justifyContent="center",sharePageButton.style.alignItems="center",sharePageButton.style.fontSize="1.5rem",sharePageButton.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)",sharePageButton.style.cursor="pointer",sharePageButton.style.zIndex="999",sharePageButton.classList.add("cta-pulse-effect");let shareScrollScheduled=!1;window.addEventListener("scroll",()=>{shareScrollScheduled||(shareScrollScheduled=!0,requestAnimationFrame(()=>{shareScrollScheduled=!1,window.scrollY>500?sharePageButton.classList.contains("show")||(sharePageButton.classList.add("show"),sharePageButton.style.opacity="1",sharePageButton.style.transform="translateY(0)"):sharePageButton.classList.contains("show")&&(sharePageButton.style.opacity="0",sharePageButton.style.transform="translateY(20px)",sharePageButton.addEventListener("transitionend",function e(){sharePageButton.classList.remove("show"),sharePageButton.removeEventListener("transitionend",e)},{once:!0}))}))},{passive:!0}),sharePageButton.addEventListener("click",async()=>{const e=window.location.href;if(navigator.share&&!saveDataEnabled&&!lowThroughput)try{return await navigator.share({title:document.title,url:e}),createToast("Page link successfully shared! âœ…",{id:"share-success-toast",iconClass:"fas fa-check-circle",iconColor:"var(--highlight-color)",duration:2e3}),void triggerHapticFeedback([50])}catch(e){if("AbortError"===e.name)return;console.error("Failed to share:",e)}await copyTextToClipboard(e)?(createToast("Page link copied to clipboard! âœ…",{id:"share-copy-toast",iconClass:"fas fa-clipboard-check",iconColor:"var(--highlight-color)",duration:2e3}),triggerHapticFeedback([40])):createToast("Your browser does not support sharing or copying.",{id:"share-unsupported-toast",iconClass:"fas fa-exclamation-triangle",iconColor:"red",duration:3e3})});const sectionsDelighted=safeSetFromStorage("sectionsDelighted");if(supportsIntersectionObserver){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting&&!sectionsDelighted.has(e.target.id)){const o=e.target.querySelector("h2, h3");o&&(o.classList.add("section-delight-effect"),o.setAttribute("data-section-viewed-by","Mohammad Rasoul Sohrabi's audience"),setTimeout(()=>{o.classList.remove("section-delight-effect")},1e3),sectionsDelighted.add(e.target.id),safeStorageSet("sectionsDelighted",JSON.stringify(Array.from(sectionsDelighted)))),t.unobserve(e.target)}})},{threshold:.4});sections.forEach(t=>{sectionsDelighted.has(t.id)||e.observe(t)})}document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",()=>{audioContext||saveDataEnabled||lowThroughput||(audioContext=new(window.AudioContext||window.webkitAudioContext),loadSounds(),"suspended"===audioContext.state&&audioContext.resume())},{once:!0})});const contactForm=document.getElementById("contact-form");if(contactForm&&(contactForm.addEventListener("submit",e=>{const t=contactForm.hasAttribute("action")&&""!==contactForm.getAttribute("action").trim();if(!contactForm.checkValidity())return e.preventDefault(),void contactForm.reportValidity();t||(e.preventDefault(),contactForm.classList.add("submitted"))}),"#form-success"===window.location.hash)){contactForm.classList.add("submitted");const e=document.getElementById("form-success");e&&e.focus()}
//# sourceMappingURL=main-script-en.min.js.map
