{"version":3,"file":"hero-typing.min.js","names":["document","addEventListener","hero","getElementById","tagline","querySelector","dataset","typingBound","reducedMotionQuery","window","matchMedia","coarsePointerQuery","connection","navigator","mozConnection","webkitConnection","originalTaglineHTML","innerHTML","typingTimer","roleIndex","charIndex","isDeleting","typingWrapper","typingText","active","resolveMotionMode","matches","saveData","Boolean","type","String","effectiveType","toLowerCase","includes","isNetworkConstrained","cores","Number","hardwareConcurrency","memory","deviceMemory","lowPowerDevice","innerWidth","getRolesFromCurrentMarkup","roleSpans","querySelectorAll","Array","from","map","node","textContent","trim","filter","clearTypingTimer","clearTimeout","restoreStaticTagline","typingInitialized","scheduleTick","delay","setTimeout","runTypingTick","body","contains","hidden","roles","length","currentRole","Math","max","slice","min","nextDelay","random","startTyping","staticContent","createElement","className","wrapper","setAttribute","appendChild","ensureTypingMarkup","resizeTimer","syncTypingMode","mode","current","getAttribute","setHeroMotionIfNeeded","onVisibilityChange","onResize","onMotionRelatedChange","cleanup","removeEventListener","removeListener","passive","once","addListener"],"sources":["hero-typing.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const hero = document.getElementById(\"hero\");\r\n  const tagline = document.querySelector(\"#hero .tagline\");\r\n  if (!hero || !tagline) {\r\n    return;\r\n  }\r\n\r\n  if (tagline.dataset.typingBound === \"true\") {\r\n    return;\r\n  }\r\n  tagline.dataset.typingBound = \"true\";\r\n\r\n  const reducedMotionQuery = window.matchMedia\r\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\r\n    : null;\r\n  const coarsePointerQuery = window.matchMedia\r\n    ? window.matchMedia(\"(pointer: coarse)\")\r\n    : null;\r\n  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n\r\n  const MIN_FULL_MOTION_VIEWPORT = 1100;\r\n  const originalTaglineHTML = tagline.innerHTML;\r\n\r\n  let typingTimer = null;\r\n  let roleIndex = 0;\r\n  let charIndex = 0;\r\n  let isDeleting = false;\r\n  let typingWrapper = null;\r\n  let typingText = null;\r\n  let active = false;\r\n\r\n  function isNetworkConstrained() {\r\n    if (!connection) {\r\n      return false;\r\n    }\r\n\r\n    const saveData = Boolean(connection.saveData);\r\n    const type = String(connection.effectiveType || \"\").toLowerCase();\r\n    return saveData || type.includes(\"2g\") || type.includes(\"slow-2g\");\r\n  }\r\n\r\n  function resolveMotionMode() {\r\n    if (reducedMotionQuery?.matches || isNetworkConstrained()) {\r\n      return \"off\";\r\n    }\r\n\r\n    const cores = Number(navigator.hardwareConcurrency || 0);\r\n    const memory = Number(navigator.deviceMemory || 0);\r\n    const lowPowerDevice = (cores > 0 && cores <= 4) || (memory > 0 && memory <= 4);\r\n\r\n    if (\r\n      coarsePointerQuery?.matches ||\r\n      window.innerWidth < MIN_FULL_MOTION_VIEWPORT ||\r\n      lowPowerDevice\r\n    ) {\r\n      return \"lite\";\r\n    }\r\n\r\n    return \"full\";\r\n  }\r\n\r\n  function setHeroMotionIfNeeded(mode) {\r\n    const current = hero.getAttribute(\"data-hero-motion\");\r\n    if (!current || current === \"off\" || current === \"lite\" || current === \"full\") {\r\n      hero.setAttribute(\"data-hero-motion\", mode);\r\n    }\r\n  }\r\n\r\n  function getRolesFromCurrentMarkup() {\r\n    const roleSpans = tagline.querySelectorAll('span[property=\"schema:jobTitle\"]');\r\n    return Array.from(roleSpans)\r\n      .map((node) => (node.textContent || \"\").trim())\r\n      .filter(Boolean);\r\n  }\r\n\r\n  function clearTypingTimer() {\r\n    if (typingTimer !== null) {\r\n      clearTimeout(typingTimer);\r\n      typingTimer = null;\r\n    }\r\n  }\r\n\r\n  function restoreStaticTagline() {\r\n    clearTypingTimer();\r\n    active = false;\r\n    roleIndex = 0;\r\n    charIndex = 0;\r\n    isDeleting = false;\r\n    typingWrapper = null;\r\n    typingText = null;\r\n    tagline.innerHTML = originalTaglineHTML;\r\n    tagline.dataset.typingInitialized = \"true\";\r\n  }\r\n\r\n  function ensureTypingMarkup() {\r\n    const staticContent = document.createElement(\"span\");\r\n    staticContent.className = \"visually-hidden-seo\";\r\n    staticContent.innerHTML = originalTaglineHTML;\r\n\r\n    const wrapper = document.createElement(\"span\");\r\n    wrapper.className = \"typing-wrapper\";\r\n    wrapper.setAttribute(\"aria-hidden\", \"true\");\r\n    wrapper.innerHTML =\r\n      '<span class=\"typing-text\"></span><span class=\"cursor\" aria-hidden=\"true\">|</span>';\r\n\r\n    tagline.innerHTML = \"\";\r\n    tagline.appendChild(staticContent);\r\n    tagline.appendChild(wrapper);\r\n\r\n    typingWrapper = wrapper;\r\n    typingText = wrapper.querySelector(\".typing-text\");\r\n  }\r\n\r\n  function scheduleTick(delay) {\r\n    clearTypingTimer();\r\n    typingTimer = window.setTimeout(runTypingTick, delay);\r\n  }\r\n\r\n  function runTypingTick() {\r\n    if (!active || !typingText || !document.body.contains(tagline)) {\r\n      return;\r\n    }\r\n\r\n    if (document.hidden) {\r\n      scheduleTick(300);\r\n      return;\r\n    }\r\n\r\n    if (resolveMotionMode() !== \"full\") {\r\n      restoreStaticTagline();\r\n      return;\r\n    }\r\n\r\n    const roles = getRolesFromCurrentMarkup();\r\n    if (!roles.length) {\r\n      restoreStaticTagline();\r\n      return;\r\n    }\r\n\r\n    const currentRole = roles[roleIndex % roles.length];\r\n\r\n    if (isDeleting) {\r\n      charIndex = Math.max(0, charIndex - 1);\r\n      typingText.textContent = currentRole.slice(0, charIndex);\r\n    } else {\r\n      charIndex = Math.min(currentRole.length, charIndex + 1);\r\n      typingText.textContent = currentRole.slice(0, charIndex);\r\n    }\r\n\r\n    let nextDelay = isDeleting ? 44 : 78 + Math.random() * 34;\r\n\r\n    if (!isDeleting && charIndex >= currentRole.length) {\r\n      isDeleting = true;\r\n      nextDelay = 1400;\r\n    } else if (isDeleting && charIndex === 0) {\r\n      isDeleting = false;\r\n      roleIndex = (roleIndex + 1) % roles.length;\r\n      nextDelay = 320;\r\n    }\r\n\r\n    scheduleTick(nextDelay);\r\n  }\r\n\r\n  function startTyping() {\r\n    if (typingWrapper && typingText) {\r\n      active = true;\r\n      scheduleTick(220);\r\n      return;\r\n    }\r\n\r\n    const roles = getRolesFromCurrentMarkup();\r\n    if (!roles.length) {\r\n      tagline.dataset.typingInitialized = \"true\";\r\n      return;\r\n    }\r\n\r\n    ensureTypingMarkup();\r\n    active = true;\r\n    roleIndex = 0;\r\n    charIndex = 0;\r\n    isDeleting = false;\r\n    tagline.dataset.typingInitialized = \"true\";\r\n    scheduleTick(520);\r\n  }\r\n\r\n  let resizeTimer = null;\r\n\r\n  function syncTypingMode() {\r\n    const mode = resolveMotionMode();\r\n    setHeroMotionIfNeeded(mode);\r\n\r\n    if (mode !== \"full\") {\r\n      if (typingWrapper) {\r\n        restoreStaticTagline();\r\n      } else {\r\n        tagline.dataset.typingInitialized = \"true\";\r\n      }\r\n      return;\r\n    }\r\n\r\n    startTyping();\r\n  }\r\n\r\n  function onVisibilityChange() {\r\n    if (document.hidden) {\r\n      clearTypingTimer();\r\n      return;\r\n    }\r\n\r\n    if (typingWrapper && active) {\r\n      scheduleTick(120);\r\n      return;\r\n    }\r\n\r\n    syncTypingMode();\r\n  }\r\n\r\n  function onResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(syncTypingMode, 120);\r\n  }\r\n\r\n  function onMotionRelatedChange() {\r\n    syncTypingMode();\r\n  }\r\n\r\n  function cleanup() {\r\n    clearTypingTimer();\r\n    clearTimeout(resizeTimer);\r\n    window.removeEventListener(\"resize\", onResize);\r\n    document.removeEventListener(\"visibilitychange\", onVisibilityChange);\r\n    window.removeEventListener(\"beforeunload\", cleanup);\r\n    window.removeEventListener(\"pagehide\", cleanup);\r\n\r\n    reducedMotionQuery?.removeEventListener?.(\"change\", onMotionRelatedChange);\r\n    coarsePointerQuery?.removeEventListener?.(\"change\", onMotionRelatedChange);\r\n    connection?.removeEventListener?.(\"change\", onMotionRelatedChange);\r\n\r\n    reducedMotionQuery?.removeListener?.(onMotionRelatedChange);\r\n    coarsePointerQuery?.removeListener?.(onMotionRelatedChange);\r\n    connection?.removeListener?.(onMotionRelatedChange);\r\n  }\r\n\r\n  window.addEventListener(\"resize\", onResize, { passive: true });\r\n  document.addEventListener(\"visibilitychange\", onVisibilityChange);\r\n  window.addEventListener(\"beforeunload\", cleanup, { once: true });\r\n  window.addEventListener(\"pagehide\", cleanup, { once: true });\r\n\r\n  reducedMotionQuery?.addEventListener?.(\"change\", onMotionRelatedChange);\r\n  coarsePointerQuery?.addEventListener?.(\"change\", onMotionRelatedChange);\r\n  connection?.addEventListener?.(\"change\", onMotionRelatedChange);\r\n\r\n  reducedMotionQuery?.addListener?.(onMotionRelatedChange);\r\n  coarsePointerQuery?.addListener?.(onMotionRelatedChange);\r\n  connection?.addListener?.(onMotionRelatedChange);\r\n\r\n  syncTypingMode();\r\n});\r\n"]}