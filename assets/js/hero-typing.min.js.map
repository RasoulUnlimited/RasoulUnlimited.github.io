{"version":3,"file":"hero-typing.min.js","names":["document","addEventListener","hero","getElementById","tagline","querySelector","dataset","typingBound","reducedMotionQuery","window","matchMedia","coarsePointerQuery","connection","navigator","mozConnection","webkitConnection","originalTaglineHTML","innerHTML","typingTimer","roleIndex","charIndex","isDeleting","typingWrapper","typingText","active","resolveMotionMode","matches","saveData","Boolean","type","String","effectiveType","toLowerCase","includes","isNetworkConstrained","cores","Number","hardwareConcurrency","memory","deviceMemory","lowPowerDevice","innerWidth","getRolesFromCurrentMarkup","roleSpans","querySelectorAll","Array","from","map","node","textContent","trim","filter","clearTypingTimer","clearTimeout","restoreStaticTagline","typingInitialized","scheduleTick","delay","setTimeout","runTypingTick","body","contains","hidden","roles","length","currentRole","Math","max","slice","min","nextDelay","random","startTyping","staticContent","createElement","className","wrapper","setAttribute","appendChild","ensureTypingMarkup","resizeTimer","syncTypingMode","mode","current","getAttribute","setHeroMotionIfNeeded","onVisibilityChange","onResize","onMotionRelatedChange","cleanup","removeEventListener","removeListener","passive","once","addListener"],"sources":["hero-typing.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  const hero = document.getElementById(\"hero\");\n  const tagline = document.querySelector(\"#hero .tagline\");\n  if (!hero || !tagline) {\n    return;\n  }\n\n  if (tagline.dataset.typingBound === \"true\") {\n    return;\n  }\n  tagline.dataset.typingBound = \"true\";\n\n  const reducedMotionQuery = window.matchMedia\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\n    : null;\n  const coarsePointerQuery = window.matchMedia\n    ? window.matchMedia(\"(pointer: coarse)\")\n    : null;\n  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n\n  const MIN_FULL_MOTION_VIEWPORT = 1100;\n  const originalTaglineHTML = tagline.innerHTML;\n\n  let typingTimer = null;\n  let roleIndex = 0;\n  let charIndex = 0;\n  let isDeleting = false;\n  let typingWrapper = null;\n  let typingText = null;\n  let active = false;\n\n  function isNetworkConstrained() {\n    if (!connection) {\n      return false;\n    }\n\n    const saveData = Boolean(connection.saveData);\n    const type = String(connection.effectiveType || \"\").toLowerCase();\n    return saveData || type.includes(\"2g\") || type.includes(\"slow-2g\");\n  }\n\n  function resolveMotionMode() {\n    if (reducedMotionQuery?.matches || isNetworkConstrained()) {\n      return \"off\";\n    }\n\n    const cores = Number(navigator.hardwareConcurrency || 0);\n    const memory = Number(navigator.deviceMemory || 0);\n    const lowPowerDevice = (cores > 0 && cores <= 4) || (memory > 0 && memory <= 4);\n\n    if (\n      coarsePointerQuery?.matches ||\n      window.innerWidth < MIN_FULL_MOTION_VIEWPORT ||\n      lowPowerDevice\n    ) {\n      return \"lite\";\n    }\n\n    return \"full\";\n  }\n\n  function setHeroMotionIfNeeded(mode) {\n    const current = hero.getAttribute(\"data-hero-motion\");\n    if (!current || current === \"off\" || current === \"lite\" || current === \"full\") {\n      hero.setAttribute(\"data-hero-motion\", mode);\n    }\n  }\n\n  function getRolesFromCurrentMarkup() {\n    const roleSpans = tagline.querySelectorAll('span[property=\"schema:jobTitle\"]');\n    return Array.from(roleSpans)\n      .map((node) => (node.textContent || \"\").trim())\n      .filter(Boolean);\n  }\n\n  function clearTypingTimer() {\n    if (typingTimer !== null) {\n      clearTimeout(typingTimer);\n      typingTimer = null;\n    }\n  }\n\n  function restoreStaticTagline() {\n    clearTypingTimer();\n    active = false;\n    roleIndex = 0;\n    charIndex = 0;\n    isDeleting = false;\n    typingWrapper = null;\n    typingText = null;\n    tagline.innerHTML = originalTaglineHTML;\n    tagline.dataset.typingInitialized = \"true\";\n  }\n\n  function ensureTypingMarkup() {\n    const staticContent = document.createElement(\"span\");\n    staticContent.className = \"visually-hidden-seo\";\n    staticContent.innerHTML = originalTaglineHTML;\n\n    const wrapper = document.createElement(\"span\");\n    wrapper.className = \"typing-wrapper\";\n    wrapper.setAttribute(\"aria-hidden\", \"true\");\n    wrapper.innerHTML =\n      '<span class=\"typing-text\"></span><span class=\"cursor\" aria-hidden=\"true\">|</span>';\n\n    tagline.innerHTML = \"\";\n    tagline.appendChild(staticContent);\n    tagline.appendChild(wrapper);\n\n    typingWrapper = wrapper;\n    typingText = wrapper.querySelector(\".typing-text\");\n  }\n\n  function scheduleTick(delay) {\n    clearTypingTimer();\n    typingTimer = window.setTimeout(runTypingTick, delay);\n  }\n\n  function runTypingTick() {\n    if (!active || !typingText || !document.body.contains(tagline)) {\n      return;\n    }\n\n    if (document.hidden) {\n      scheduleTick(300);\n      return;\n    }\n\n    if (resolveMotionMode() !== \"full\") {\n      restoreStaticTagline();\n      return;\n    }\n\n    const roles = getRolesFromCurrentMarkup();\n    if (!roles.length) {\n      restoreStaticTagline();\n      return;\n    }\n\n    const currentRole = roles[roleIndex % roles.length];\n\n    if (isDeleting) {\n      charIndex = Math.max(0, charIndex - 1);\n      typingText.textContent = currentRole.slice(0, charIndex);\n    } else {\n      charIndex = Math.min(currentRole.length, charIndex + 1);\n      typingText.textContent = currentRole.slice(0, charIndex);\n    }\n\n    let nextDelay = isDeleting ? 44 : 78 + Math.random() * 34;\n\n    if (!isDeleting && charIndex >= currentRole.length) {\n      isDeleting = true;\n      nextDelay = 1400;\n    } else if (isDeleting && charIndex === 0) {\n      isDeleting = false;\n      roleIndex = (roleIndex + 1) % roles.length;\n      nextDelay = 320;\n    }\n\n    scheduleTick(nextDelay);\n  }\n\n  function startTyping() {\n    if (typingWrapper && typingText) {\n      active = true;\n      scheduleTick(220);\n      return;\n    }\n\n    const roles = getRolesFromCurrentMarkup();\n    if (!roles.length) {\n      tagline.dataset.typingInitialized = \"true\";\n      return;\n    }\n\n    ensureTypingMarkup();\n    active = true;\n    roleIndex = 0;\n    charIndex = 0;\n    isDeleting = false;\n    tagline.dataset.typingInitialized = \"true\";\n    scheduleTick(520);\n  }\n\n  let resizeTimer = null;\n\n  function syncTypingMode() {\n    const mode = resolveMotionMode();\n    setHeroMotionIfNeeded(mode);\n\n    if (mode !== \"full\") {\n      if (typingWrapper) {\n        restoreStaticTagline();\n      } else {\n        tagline.dataset.typingInitialized = \"true\";\n      }\n      return;\n    }\n\n    startTyping();\n  }\n\n  function onVisibilityChange() {\n    if (document.hidden) {\n      clearTypingTimer();\n      return;\n    }\n\n    if (typingWrapper && active) {\n      scheduleTick(120);\n      return;\n    }\n\n    syncTypingMode();\n  }\n\n  function onResize() {\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(syncTypingMode, 120);\n  }\n\n  function onMotionRelatedChange() {\n    syncTypingMode();\n  }\n\n  function cleanup() {\n    clearTypingTimer();\n    clearTimeout(resizeTimer);\n    window.removeEventListener(\"resize\", onResize);\n    document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    window.removeEventListener(\"beforeunload\", cleanup);\n    window.removeEventListener(\"pagehide\", cleanup);\n\n    reducedMotionQuery?.removeEventListener?.(\"change\", onMotionRelatedChange);\n    coarsePointerQuery?.removeEventListener?.(\"change\", onMotionRelatedChange);\n    connection?.removeEventListener?.(\"change\", onMotionRelatedChange);\n\n    reducedMotionQuery?.removeListener?.(onMotionRelatedChange);\n    coarsePointerQuery?.removeListener?.(onMotionRelatedChange);\n    connection?.removeListener?.(onMotionRelatedChange);\n  }\n\n  window.addEventListener(\"resize\", onResize, { passive: true });\n  document.addEventListener(\"visibilitychange\", onVisibilityChange);\n  window.addEventListener(\"beforeunload\", cleanup, { once: true });\n  window.addEventListener(\"pagehide\", cleanup, { once: true });\n\n  reducedMotionQuery?.addEventListener?.(\"change\", onMotionRelatedChange);\n  coarsePointerQuery?.addEventListener?.(\"change\", onMotionRelatedChange);\n  connection?.addEventListener?.(\"change\", onMotionRelatedChange);\n\n  reducedMotionQuery?.addListener?.(onMotionRelatedChange);\n  coarsePointerQuery?.addListener?.(onMotionRelatedChange);\n  connection?.addListener?.(onMotionRelatedChange);\n\n  syncTypingMode();\n});\r\n"]}