document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle");if(!e)return;const t="theme",n="dark",c="light";function o(){const e="__theme_toggle__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),localStorage}catch(e){return null}}const d=o(),r=window.matchMedia("(prefers-color-scheme: dark)");function a(){if(!d)return null;const e=d.getItem(t);return e===n||e===c?e:null}function s(){return r.matches?n:c}function i(){const e=document.documentElement.getAttribute("data-theme");if(e===n||e===c)return e;const t=a();return t||s()}function l(c,{persist:o=!0}={}){const r=c===n;if(document.documentElement.setAttribute("data-theme",c),document.documentElement.classList.toggle("dark-mode",r),document.documentElement.classList.toggle("light-mode",!r),document.body.classList.toggle("dark-mode",r),document.body.classList.toggle("light-mode",!r),document.documentElement.classList.toggle("dark",r),"checked"in e?e.checked=r:e.setAttribute("aria-pressed",String(r)),o&&d)try{d.setItem(t,c)}catch{}}if(!e.hasAttribute("role")){const t="INPUT"===e.tagName&&("checkbox"===e.type||"radio"===e.type);e.setAttribute("role",t?"switch":"button")}e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby")||e.setAttribute("aria-label","Toggle dark mode");function u(){l(i()===n?c:n)}l(a()??s(),{persist:!1}),e.addEventListener("change",()=>{if("checked"in e){l(e.checked?n:c)}else u()}),e.addEventListener("click",t=>{"checked"in e||(t.preventDefault(),u())}),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),"checked"in e&&(e.checked=!e.checked),u())});const m=e=>{!!a()||l(e.matches?n:c,{persist:!1})};"function"==typeof r.addEventListener?r.addEventListener("change",m):"function"==typeof r.addListener&&r.addListener(m)});