{"version":3,"file":"credential-reveal.min.js","names":["window","document","HIDDEN_CLASS","VISIBLE_CLASS","OBSERVER_OPTIONS","root","rootMargin","threshold","revealCard","card","classList","remove","add","addEventListener","cardsNodeList","querySelectorAll","length","cards","Array","from","observer","showCardsImmediately","forEach","disconnect","matchMedia","motionQuery","matches","handleMotionChange","e","addListener","IntersectionObserver","entries","obs","entry","isIntersecting","target","unobserve","observe"],"sources":["credential-reveal.js"],"mappings":"CAAA,WACE,aAMA,KAFoB,oBAAXA,QAA8C,oBAAbC,UAEvB,OAEnB,MAAMC,EAAe,cACfC,EAAgB,eAEhBC,EAAmB,CACvBC,KAAM,KACNC,WAAY,mBACZC,UAAW,IAOb,SAASC,EAAWC,GACbA,IACLA,EAAKC,UAAUC,OAAOT,GACtBO,EAAKC,UAAUE,IAAIT,GACrB,CAEAF,SAASY,iBAAiB,mBAAoB,KAC5C,MAAMC,EAAgBb,SAASc,iBAAiB,oBAChD,IAAKD,IAAkBA,EAAcE,OAAS,OAG9C,MAAMC,EAAQC,MAAMC,KAAKL,GAEzB,IAAIM,EAAW,KAMf,MAAMC,EAAuB,KAC3BJ,EAAMK,QAAQd,GAEVY,IACFA,EAASG,aACTH,EAAW,OAMf,GADwD,mBAAtBpB,OAAOwB,WACjB,CACtB,MAAMC,EAAczB,OAAOwB,WAAW,oCAGtC,GAAIC,EAAYC,QAEd,YADAL,IAIF,MAAMM,EAAsBC,OACAA,IAAKA,EAAEF,UAG/BL,KAOwC,mBAAjCI,EAAYZ,iBACrBY,EAAYZ,iBAAiB,SAAUc,GAGG,mBAA5BF,EAAYI,aAC1BJ,EAAYI,YAAYF,EAE5B,CAEmB,yBAA0B3B,QAQ7CiB,EAAMK,QAASb,IACbA,EAAKC,UAAUE,IAAIV,GACnBO,EAAKC,UAAUC,OAAOR,KAGxBiB,EAAW,IAAIU,qBAAqB,CAACC,EAASC,KAC5CD,EAAQT,QAASW,IACf,IAAKA,EAAMC,eAAiB,OAE5B,MAAMzB,EAAOwB,EAAME,OACnB3B,EAAWC,GAGXuB,EAAII,UAAU3B,MAEfL,GAEHa,EAAMK,QAASb,GAASW,EAASiB,QAAQ5B,KAtBvCY,KAwBL,CA5GD","ignoreList":[],"sourcesContent":["(function () {\r\n  \"use strict\";\r\n\r\n  // جلوگیری از اجرا در محیط‌هایی مثل SSR/Node\r\n  const supportsDOM =\r\n    typeof window !== \"undefined\" && typeof document !== \"undefined\";\r\n\r\n  if (!supportsDOM) {return;}\r\n\r\n  const HIDDEN_CLASS = \"card-hidden\";\r\n  const VISIBLE_CLASS = \"card-visible\";\r\n\r\n  const OBSERVER_OPTIONS = {\r\n    root: null,\r\n    rootMargin: \"0px 0px -10% 0px\",\r\n    threshold: 0.1,\r\n  };\r\n\r\n  /**\r\n   * یک کارت را نمایش می‌دهد (کلاس‌های لازم را ست می‌کند)\r\n   * @param {HTMLElement} card\r\n   */\r\n  function revealCard(card) {\r\n    if (!card) {return;}\r\n    card.classList.remove(HIDDEN_CLASS);\r\n    card.classList.add(VISIBLE_CLASS);\r\n  }\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", () => {\r\n    const cardsNodeList = document.querySelectorAll(\".credential-card\");\r\n    if (!cardsNodeList || !cardsNodeList.length) {return;}\r\n\r\n    // در صورت نیاز بعداً از متدهای آرایه استفاده کنیم\r\n    const cards = Array.from(cardsNodeList);\r\n\r\n    let observer = null;\r\n\r\n    /**\r\n     * همه‌ی کارت‌ها را بدون انیمیشن اسکرول نمایش بده\r\n     * و اگر observer فعال است آن را قطع کن.\r\n     */\r\n    const showCardsImmediately = () => {\r\n      cards.forEach(revealCard);\r\n\r\n      if (observer) {\r\n        observer.disconnect();\r\n        observer = null;\r\n      }\r\n    };\r\n\r\n    // هندلینگ prefers-reduced-motion\r\n    const supportsMatchMedia = typeof window.matchMedia === \"function\";\r\n    if (supportsMatchMedia) {\r\n      const motionQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n\r\n      // اگر از ابتدا reduce بوده، کلاً انیمیشن‌ها را غیر فعال کن\r\n      if (motionQuery.matches) {\r\n        showCardsImmediately();\r\n        return;\r\n      }\r\n\r\n      const handleMotionChange = (e) => {\r\n        const prefersReduced = !!(e && e.matches);\r\n        if (prefersReduced) {\r\n          // اگر کاربر وسط کار motion را reduce کرد، انیمیشن‌ها را متوقف کن\r\n          showCardsImmediately();\r\n        }\r\n        // اگر کاربر از reduce برگشت به normal، عمداً\r\n        // دوباره observer را راه نمی‌اندازیم تا رفتار قابل پیش‌بینی بماند.\r\n      };\r\n\r\n      // API جدید\r\n      if (typeof motionQuery.addEventListener === \"function\") {\r\n        motionQuery.addEventListener(\"change\", handleMotionChange);\r\n      }\r\n      // برای مرورگرهای قدیمی‌تر\r\n      else if (typeof motionQuery.addListener === \"function\") {\r\n        motionQuery.addListener(handleMotionChange);\r\n      }\r\n    }\r\n\r\n    const supportsIO = \"IntersectionObserver\" in window;\r\n    // اگر IntersectionObserver وجود ندارد، همه کارت‌ها را بدون انیمیشن نشان بده\r\n    if (!supportsIO) {\r\n      showCardsImmediately();\r\n      return;\r\n    }\r\n\r\n    // حالت عادی: کارت‌ها ابتدا مخفی، با اسکرول وارد می‌شوند\r\n    cards.forEach((card) => {\r\n      card.classList.add(HIDDEN_CLASS);\r\n      card.classList.remove(VISIBLE_CLASS);\r\n    });\r\n\r\n    observer = new IntersectionObserver((entries, obs) => {\r\n      entries.forEach((entry) => {\r\n        if (!entry.isIntersecting) {return;}\r\n\r\n        const card = entry.target;\r\n        revealCard(card);\r\n\r\n        // فقط یک بار برای هر کارت کافی است\r\n        obs.unobserve(card);\r\n      });\r\n    }, OBSERVER_OPTIONS);\r\n\r\n    cards.forEach((card) => observer.observe(card));\r\n  });\r\n})();\r\n"]}