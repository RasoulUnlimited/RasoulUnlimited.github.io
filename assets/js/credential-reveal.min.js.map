{"version":3,"file":"credential-reveal.min.js","names":["window","document","HIDDEN_CLASS","VISIBLE_CLASS","OBSERVER_OPTIONS","root","rootMargin","threshold","revealCard","card","classList","remove","add","addEventListener","cards","querySelectorAll","length","observer","motionQuery","prefersReduced","showCardsImmediately","forEach","disconnect","matchMedia","matches","handleMotionChange","e","addListener","IntersectionObserver","entries","obs","entry","isIntersecting","target","unobserve","observe"],"sources":["credential-reveal.js"],"mappings":"CAAA,WACE,aAGA,GAAsB,oBAAXA,QAA8C,oBAAbC,SAC1C,OAGF,MAAMC,EAAe,cACfC,EAAgB,eAEhBC,EAAmB,CACvBC,KAAM,KACNC,WAAY,mBACZC,UAAW,IAOb,SAASC,EAAWC,GAClBA,EAAKC,UAAUC,OAAOT,GACtBO,EAAKC,UAAUE,IAAIT,EACrB,CAEAF,SAASY,iBAAiB,mBAAoB,KAC5C,MAAMC,EAAQb,SAASc,iBAAiB,oBACxC,IAAKD,EAAME,OAAQ,OAEnB,IAAIC,EAAW,KACXC,EAAc,KACdC,GAAiB,EAMrB,MAAMC,EAAuB,KAC3BN,EAAMO,QAAQb,GAEVS,IACFA,EAASK,aACTL,EAAW,OAKf,GAAI,eAAgBjB,OAAQ,CAC1BkB,EAAclB,OAAOuB,WAAW,oCAChCJ,EAAiBD,EAAYM,QAE7B,MAAMC,EAAsBC,IAC1BP,IAAmBO,EAAEF,QACjBL,GAEFC,KAIwC,mBAAjCF,EAAYL,iBACrBK,EAAYL,iBAAiB,SAAUY,GACK,mBAA5BP,EAAYS,aAE5BT,EAAYS,YAAYF,EAE5B,CAGgC,yBAA0BzB,SAC1BmB,GAMhCL,EAAMO,QAASZ,IACbA,EAAKC,UAAUE,IAAIV,GACnBO,EAAKC,UAAUC,OAAOR,KAGxBc,EAAW,IAAIW,qBAAqB,CAACC,EAASC,KAC5CD,EAAQR,QAASU,IACf,IAAKA,EAAMC,eAAgB,OAE3B,MAAMvB,EAAOsB,EAAME,OACnBzB,EAAWC,GAGXqB,EAAII,UAAUzB,MAEfL,GAEHU,EAAMO,QAASZ,GAASQ,EAASkB,QAAQ1B,KAtBvCW,KAwBL,CA/FD","ignoreList":[],"sourcesContent":["(function () {\r\n  \"use strict\";\r\n\r\n  // جلوگیری از ارور در محیط‌هایی مثل SSR/Node\r\n  if (typeof window === \"undefined\" || typeof document === \"undefined\") {\r\n    return;\r\n  }\r\n\r\n  const HIDDEN_CLASS = \"card-hidden\";\r\n  const VISIBLE_CLASS = \"card-visible\";\r\n\r\n  const OBSERVER_OPTIONS = {\r\n    root: null,\r\n    rootMargin: \"0px 0px -10% 0px\",\r\n    threshold: 0.1,\r\n  };\r\n\r\n  /**\r\n   * یک کارت را نمایش می‌دهد (کلاس‌های لازم را ست می‌کند)\r\n   * @param {HTMLElement} card\r\n   */\r\n  function revealCard(card) {\r\n    card.classList.remove(HIDDEN_CLASS);\r\n    card.classList.add(VISIBLE_CLASS);\r\n  }\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", () => {\r\n    const cards = document.querySelectorAll(\".credential-card\");\r\n    if (!cards.length) return;\r\n\r\n    let observer = null;\r\n    let motionQuery = null;\r\n    let prefersReduced = false;\r\n\r\n    /**\r\n     * همه‌ی کارت‌ها را بدون انیمیشن اسکرول نمایش بده\r\n     * و اگر observer فعال است آن را قطع کن.\r\n     */\r\n    const showCardsImmediately = () => {\r\n      cards.forEach(revealCard);\r\n\r\n      if (observer) {\r\n        observer.disconnect();\r\n        observer = null;\r\n      }\r\n    };\r\n\r\n    // هندلینگ prefers-reduced-motion\r\n    if (\"matchMedia\" in window) {\r\n      motionQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n      prefersReduced = motionQuery.matches;\r\n\r\n      const handleMotionChange = (e) => {\r\n        prefersReduced = !!e.matches;\r\n        if (prefersReduced) {\r\n          // اگر کاربر وسط کار motion را reduce کرد، انیمیشن‌ها را متوقف کن\r\n          showCardsImmediately();\r\n        }\r\n      };\r\n\r\n      if (typeof motionQuery.addEventListener === \"function\") {\r\n        motionQuery.addEventListener(\"change\", handleMotionChange);\r\n      } else if (typeof motionQuery.addListener === \"function\") {\r\n        // برای مرورگرهای قدیمی‌تر\r\n        motionQuery.addListener(handleMotionChange);\r\n      }\r\n    }\r\n\r\n    // اگر IntersectionObserver نیست یا کاربر motion را کم کرده، انیمیشن اسکرول نداشته باش\r\n    const hasIntersectionObserver = \"IntersectionObserver\" in window;\r\n    if (!hasIntersectionObserver || prefersReduced) {\r\n      showCardsImmediately();\r\n      return;\r\n    }\r\n\r\n    // حالت عادی: کارت‌ها ابتدا مخفی، با اسکرول وارد می‌شوند\r\n    cards.forEach((card) => {\r\n      card.classList.add(HIDDEN_CLASS);\r\n      card.classList.remove(VISIBLE_CLASS);\r\n    });\r\n\r\n    observer = new IntersectionObserver((entries, obs) => {\r\n      entries.forEach((entry) => {\r\n        if (!entry.isIntersecting) return;\r\n\r\n        const card = entry.target;\r\n        revealCard(card);\r\n\r\n        // فقط یک بار برای هر کارت کافی است\r\n        obs.unobserve(card);\r\n      });\r\n    }, OBSERVER_OPTIONS);\r\n\r\n    cards.forEach((card) => observer.observe(card));\r\n  });\r\n})();\r\n"]}