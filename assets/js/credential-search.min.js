document.addEventListener("DOMContentLoaded",function(){let r=document.getElementById("credential-search"),l=document.getElementById("clear-credential-search");var i=document.getElementById("voice-search-btn");let c=document.getElementById("results-info"),u=document.querySelectorAll(".credential-card"),m=c?.dataset.lang||document.documentElement.lang||"en";if(r&&l){let t,n=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=(u.forEach(e=>{var t=e.querySelector("h3"),e=e.querySelector(".credential-summary");t&&(t.dataset.original=t.textContent),e&&(e.dataset.original=e.textContent)}),(e,t)=>{e&&e.dataset.original&&(t?(t=new RegExp(`(${n(t)})`,"gi"),e.innerHTML=e.dataset.original.replace(t,"<mark>$1</mark>")):e.innerHTML=e.dataset.original)}),a=e=>{let i=void 0!==e?e:r.value.trim(),o=i.toLowerCase(),s=0;var t;u.forEach(e=>{var t=e.querySelector("h3"),n=e.querySelector(".credential-summary"),a=e.dataset.keywords?e.dataset.keywords.toLowerCase():"",r=t?t.dataset.original.toLowerCase():"",l=n?n.dataset.original.toLowerCase():"";r.includes(o)||l.includes(o)||a.includes(o)?(e.style.display="grid",d(t,i),d(n,i),s++):(e.style.display="none",d(t,""),d(n,""))}),e=s,c&&(m.startsWith("fa")?c.textContent=0===e?"موردی یافت نشد":e+" نتیجه یافت شد":(t=1===e?"result":"results",c.textContent=0===e?"No results found":e+` ${t} found`))};if(r.addEventListener("input",()=>{let e=r.value.trim();l.style.display=e?"block":"none",clearTimeout(t),t=setTimeout(()=>a(e),200)}),l.addEventListener("click",()=>{r.value="",l.style.display="none",clearTimeout(t),a("")}),i){var o=window.SpeechRecognition||window.webkitSpeechRecognition;if(o){let e=new o;e.lang=m.startsWith("fa")?"fa-IR":"en-US",e.interimResults=!1,i.addEventListener("click",()=>e.start()),e.addEventListener("result",e=>{e=e.results[0][0].transcript.trim();r.value=e,l.style.display=e?"block":"none",a(e)})}else i.style.display="none"}document.addEventListener("keydown",e=>{("/"===e.key||"k"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey))&&document.activeElement!==r&&(e.preventDefault(),r.focus())}),a("")}});