document.addEventListener("DOMContentLoaded",function(){let r=document.getElementById("credential-search"),i=document.getElementById("clear-credential-search"),l=document.getElementById("voice-search-btn"),c=document.getElementById("results-info"),u=document.querySelectorAll(".credential-card"),m=c?.dataset.lang||document.documentElement.lang||"en";if(r&&i){let t,n=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=(u.forEach(e=>{var t=e.querySelector("h3"),e=e.querySelector(".credential-summary");t&&(t.dataset.original=t.textContent),e&&(e.dataset.original=e.textContent)}),(e,t)=>{e&&e.dataset.original&&(t?(t=new RegExp(`(${n(t)})`,"gi"),e.innerHTML=e.dataset.original.replace(t,"<mark>$1</mark>")):e.innerHTML=e.dataset.original)}),a=e=>{let l=void 0!==e?e:r.value.trim(),s=l.toLowerCase(),d=0;var t;u.forEach(e=>{var t=e.querySelector("h3"),n=e.querySelector(".credential-summary"),a=e.dataset.keywords?e.dataset.keywords.toLowerCase():"",r=t?t.dataset.original.toLowerCase():"",i=n?n.dataset.original.toLowerCase():"";r.includes(s)||i.includes(s)||a.includes(s)?(e.style.display="grid",o(t,l),o(n,l),d++):(e.style.display="none",o(t,""),o(n,""))}),e=d,c&&(m.startsWith("fa")?c.textContent=0===e?"موردی یافت نشد":e+" نتیجه یافت شد":(t=1===e?"result":"results",c.textContent=0===e?"No results found":e+` ${t} found`))};if(r.addEventListener("input",()=>{let e=r.value.trim();i.style.display=e?"block":"none",clearTimeout(t),t=setTimeout(()=>a(e),200)}),i.addEventListener("click",()=>{r.value="",i.style.display="none",clearTimeout(t),a("")}),l){var s=window.SpeechRecognition||window.webkitSpeechRecognition;if(s){let e=new s;e.lang=m.startsWith("fa")?"fa-IR":"en-US",e.interimResults=!1,l.addEventListener("click",()=>e.start()),e.addEventListener("start",()=>{l.classList.add("listening")}),e.addEventListener("end",()=>{l.classList.remove("listening")}),e.addEventListener("result",e=>{e=e.results[0][0].transcript.trim();r.value=e,i.style.display=e?"block":"none",a(e)})}else l.style.display="none"}document.addEventListener("keydown",e=>{("/"===e.key||"k"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey))&&document.activeElement!==r&&(e.preventDefault(),r.focus())}),a("")}});