!function(){"use strict";if("undefined"==typeof window||"undefined"==typeof document)return;const t=[],e=new WeakMap;let s=!1;function n(t,e){return t?t.querySelector(e):null}function i(t,e){t&&(e?t.removeAttribute("hidden"):t.setAttribute("hidden",""))}function r(t){return(t.dataset.giscusLang||document.documentElement.lang||"en").toLowerCase().startsWith("fa")?"fa":"en"}function a(){const t=(document.documentElement.getAttribute("data-theme")||"").trim().toLowerCase();return"dark"===t?"dark":"light"===t?"light":"preferred_color_scheme"}function o(t){return"fa"===r(t)?"بارگذاری نظرات با مشکل مواجه شد. لطفاً دوباره تلاش کنید.":"Comments could not be loaded. Please try again."}function c(t,e,s){const r=n(t,".giscus-loading"),a=n(t,".giscus-error"),c=n(t,".giscus-error-message");t.dataset.giscusStatus=e;const u="loading"===e;r&&(r.classList.toggle("hidden",!u),i(r,u));const d="error"===e;a&&(a.classList.toggle("hidden",!d),i(a,d)),d&&c&&(c.textContent=s||o(t)),function(t,e){const s=n(t,".giscus-container");s&&s.setAttribute("aria-busy",e?"true":"false"),t.setAttribute("aria-busy",e?"true":"false")}(t,u)}function u(t){t&&(t.timeoutId&&(window.clearTimeout(t.timeoutId),t.timeoutId=null),t.observer&&(t.observer.disconnect(),t.observer=null),t.iframe&&t.iframeLoadHandler&&(t.iframe.removeEventListener("load",t.iframeLoadHandler),t.iframeLoadHandler=null),t.iframe=null,t.script=null)}function d(t,e,s){try{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:s||{}}))}catch{}}function g(t){const e=a();t.dataset.giscusThemeApplied=e;const s=n(t,"iframe.giscus-frame");if(s&&s.contentWindow)try{s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app"),d(t,"giscus:theme-sync",{theme:e})}catch{}}function l(){t.forEach(t=>{const s=e.get(t);s&&"ready"===s.status&&g(t)})}function m(t,s){const n=e.get(t);n&&"loading"===n.status&&(u(n),n.status="error",t.dataset.giscusErrorReason=s,c(t,"error",t.dataset.giscusErrorMessage||o(t)),d(t,"giscus:error",{reason:s}))}function f(t){const s=e.get(t);s&&"loading"===s.status&&(u(s),s.status="ready",c(t,"ready"),g(t),d(t,"giscus:ready",{theme:a()}))}function p(t,s){const i=e.get(t);if(!i)return;if("loading"===i.status)return;if("ready"===i.status&&!s)return;u(i),function(t){const e=n(t,".giscus-container");if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}(t);const g=function(t){const e=Number.parseInt(t.dataset.giscusTimeout||"",10);return{repo:t.dataset.giscusRepo||"",repoId:t.dataset.giscusRepoId||"",category:t.dataset.giscusCategory||"",categoryId:t.dataset.giscusCategoryId||"",mapping:t.dataset.giscusMapping||"specific",term:t.dataset.giscusTerm||"",lang:t.dataset.giscusLang||r(t),strict:t.dataset.giscusStrict||"1",reactionsEnabled:t.dataset.giscusReactionsEnabled||"1",emitMetadata:t.dataset.giscusEmitMetadata||"0",inputPosition:t.dataset.giscusInputPosition||"top",loading:t.dataset.giscusLoading||"lazy",timeoutMs:Number.isFinite(e)&&e>0?e:8e3}}(t);if(!function(t){return!(!t.repo||!t.repoId||!t.category||!t.categoryId||"specific"===t.mapping&&!t.term)}(g))return i.status="error",c(t,"error",o(t)),void d(t,"giscus:error",{reason:"invalid-config"});const l=n(t,".giscus-container");if(!l)return i.status="error",c(t,"error",o(t)),void d(t,"giscus:error",{reason:"missing-container"});i.status="loading",c(t,"loading"),t.dataset.giscusThemeApplied=a(),t.dataset.giscusErrorReason="",d(t,"giscus:loading",{});const p=function(t){const e=document.createElement("script");return e.src="https://giscus.app/client.js",e.async=!0,e.crossOrigin="anonymous",e.setAttribute("data-repo",t.repo),e.setAttribute("data-repo-id",t.repoId),e.setAttribute("data-category",t.category),e.setAttribute("data-category-id",t.categoryId),e.setAttribute("data-mapping",t.mapping),e.setAttribute("data-lang",t.lang),e.setAttribute("data-strict",t.strict),e.setAttribute("data-reactions-enabled",t.reactionsEnabled),e.setAttribute("data-emit-metadata",t.emitMetadata),e.setAttribute("data-input-position",t.inputPosition),e.setAttribute("data-loading",t.loading),e.setAttribute("data-theme",a()),e.setAttribute("data-ai-integration","giscus-comments"),"specific"===t.mapping&&t.term&&e.setAttribute("data-term",t.term),e}(g);i.script=p,i.timeoutId=window.setTimeout(()=>{m(t,"timeout")},g.timeoutMs),p.onerror=()=>{m(t,"script-error")},i.observer=new MutationObserver(()=>{const s=n(t,"iframe.giscus-frame");s&&i.iframe!==s&&(i.iframe=s,i.iframeLoadHandler=()=>{f(t)},s.addEventListener("load",i.iframeLoadHandler,{once:!0}),window.setTimeout(()=>{const s=e.get(t);s&&"loading"===s.status&&f(t)},1200))}),i.observer.observe(l,{childList:!0,subtree:!0}),l.appendChild(p)}function b(s){if(!s||"true"===s.dataset.giscusBooted)return;s.dataset.giscusBooted="true";const i={status:"idle",observer:null,timeoutId:null,iframe:null,iframeLoadHandler:null,script:null,io:null};e.set(s,i),t.push(s);const r=n(s,".giscus-fallback-link");r&&s.dataset.giscusFallbackUrl&&r.setAttribute("href",s.dataset.giscusFallbackUrl);const a=n(s,".giscus-retry-btn");a&&a.addEventListener("click",()=>{p(s,!0)}),c(s,"idle"),"IntersectionObserver"in window?(i.io=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(i.io&&(i.io.disconnect(),i.io=null),p(s,!1))})},{rootMargin:"320px 0px",threshold:.01}),i.io.observe(s)):p(s,!1)}function h(){const t=Array.from(document.querySelectorAll("[data-giscus-root]"));t.length&&(t.forEach(b),function(){if(s)return;s=!0;const t=new MutationObserver(()=>{l()});t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),window.addEventListener("themechange",l),window.addEventListener("beforeunload",()=>{t.disconnect(),window.removeEventListener("themechange",l)},{once:!0})}())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h,{once:!0}):h(),window.__giscusLoader={reloadAll(){t.forEach(t=>p(t,!0))},getStatus(t){const s=e.get(t);return s?s.status:"unknown"}}}();
//# sourceMappingURL=giscus-loader.min.js.map
