!function(){"use strict";if("undefined"==typeof window||"undefined"==typeof document)return;const t=[],e=new WeakMap;let s=!1,n=!1;function r(t,e){return t?t.querySelector(e):null}function i(t,e){t&&(e?t.removeAttribute("hidden"):t.setAttribute("hidden",""))}function a(t){return(t.dataset.giscusLang||document.documentElement.lang||"en").toLowerCase().startsWith("fa")?"fa":"en"}function o(){const t=(document.documentElement.getAttribute("data-theme")||"").trim().toLowerCase();return"dark"===t?"dark":"light"===t?"light":"preferred_color_scheme"}function u(t){return"fa"===a(t)?"بارگذاری نظرات با مشکل مواجه شد. لطفاً دوباره تلاش کنید.":"Comments could not be loaded. Please try again."}function c(t,e,s){try{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:s||{}}))}catch{}}function d(t,e,s){const n=r(t,".giscus-loading"),a=r(t,".giscus-error"),o=r(t,".giscus-error-message");t.dataset.giscusStatus=e;const d="loading"===e;n&&(n.classList.toggle("hidden",!d),i(n,d));const l="error"===e;a&&(a.classList.toggle("hidden",!l),i(a,l)),l&&o&&(o.textContent=s||u(t)),function(t,e){const s=r(t,".giscus-container");s&&s.setAttribute("aria-busy",e?"true":"false"),t.setAttribute("aria-busy",e?"true":"false")}(t,d),c(t,"giscus:state-change",{status:e}),function(t){if("function"==typeof window.gtag&&"idle"!==t)try{window.gtag("event","giscus_state_change",{event_category:"engagement",event_label:t})}catch{}}(e)}function l(t){t&&(t.timeoutId&&(window.clearTimeout(t.timeoutId),t.timeoutId=null),t.retryTimer&&(window.clearTimeout(t.retryTimer),t.retryTimer=null),t.observer&&(t.observer.disconnect(),t.observer=null),t.iframe&&t.iframeLoadHandler&&(t.iframe.removeEventListener("load",t.iframeLoadHandler),t.iframeLoadHandler=null),t.iframe=null,t.script=null)}function g(t){const e=o();t.dataset.giscusThemeApplied=e;const s=r(t,"iframe.giscus-frame");if(s&&s.contentWindow)try{s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app"),c(t,"giscus:theme-sync",{theme:e})}catch{}}function m(){t.forEach(t=>{const s=e.get(t);s&&"ready"===s.status&&g(t)})}function f(t,s){const n=e.get(t);if(!n||!function(t,e){return!(!t||t.autoRetryCount>=1||"timeout"!==e&&"script-error"!==e||!navigator.onLine)}(n,s))return;n.autoRetryCount+=1;const r=n.autoRetryCount;c(t,"giscus:retry",{reason:s,attempt:r,source:"auto"}),n.retryTimer=window.setTimeout(()=>{const s=e.get(t);s&&"error"===s.status&&y(t,!0,"auto")},900*r)}function p(t,s){const n=e.get(t);n&&"loading"===n.status&&(l(n),n.status="error",t.dataset.giscusErrorReason=s,d(t,"error",t.dataset.giscusErrorMessage||u(t)),c(t,"giscus:error",{reason:s}),f(t,s))}function b(t){const s=e.get(t);s&&"loading"===s.status&&(l(s),s.status="ready",s.autoRetryCount=0,d(t,"ready"),g(t),function(t){const e=window.matchMedia?.("(prefers-reduced-motion: reduce)").matches;e||(t.classList.remove("giscus-ready-pulse"),t.offsetWidth,t.classList.add("giscus-ready-pulse"),window.setTimeout(()=>{t.classList.remove("giscus-ready-pulse")},700))}(t),c(t,"giscus:ready",{theme:o()}))}function y(t,s,n="manual"){const i=e.get(t);if(!i)return;if("auto"!==n&&(i.autoRetryCount=0),"loading"===i.status)return;if("ready"===i.status&&!s)return;l(i),function(t){const e=r(t,".giscus-container");if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}(t);const g=function(t){const e=Number.parseInt(t.dataset.giscusTimeout||"",10);return{repo:t.dataset.giscusRepo||"",repoId:t.dataset.giscusRepoId||"",category:t.dataset.giscusCategory||"",categoryId:t.dataset.giscusCategoryId||"",mapping:t.dataset.giscusMapping||"specific",term:t.dataset.giscusTerm||"",lang:t.dataset.giscusLang||a(t),strict:t.dataset.giscusStrict||"1",reactionsEnabled:t.dataset.giscusReactionsEnabled||"1",emitMetadata:t.dataset.giscusEmitMetadata||"0",inputPosition:t.dataset.giscusInputPosition||"top",loading:t.dataset.giscusLoading||"lazy",timeoutMs:Number.isFinite(e)&&e>0?e:8e3}}(t);if(!function(t){return!(!t.repo||!t.repoId||!t.category||!t.categoryId||"specific"===t.mapping&&!t.term)}(g))return i.status="error",d(t,"error",u(t)),void c(t,"giscus:error",{reason:"invalid-config"});const m=r(t,".giscus-container");if(!m)return i.status="error",d(t,"error",u(t)),void c(t,"giscus:error",{reason:"missing-container"});i.status="loading",d(t,"loading"),t.dataset.giscusThemeApplied=o(),t.dataset.giscusErrorReason="",c(t,"giscus:loading",{source:n});const f=function(t){const e=document.createElement("script");return e.src="https://giscus.app/client.js",e.async=!0,e.crossOrigin="anonymous",e.setAttribute("data-repo",t.repo),e.setAttribute("data-repo-id",t.repoId),e.setAttribute("data-category",t.category),e.setAttribute("data-category-id",t.categoryId),e.setAttribute("data-mapping",t.mapping),e.setAttribute("data-lang",t.lang),e.setAttribute("data-strict",t.strict),e.setAttribute("data-reactions-enabled",t.reactionsEnabled),e.setAttribute("data-emit-metadata",t.emitMetadata),e.setAttribute("data-input-position",t.inputPosition),e.setAttribute("data-loading",t.loading),e.setAttribute("data-theme",o()),e.setAttribute("data-ai-integration","giscus-comments"),"specific"===t.mapping&&t.term&&e.setAttribute("data-term",t.term),e}(g);i.script=f,i.timeoutId=window.setTimeout(()=>{p(t,"timeout")},g.timeoutMs),f.onerror=()=>{p(t,"script-error")},i.observer=new MutationObserver(()=>{const s=r(t,"iframe.giscus-frame");s&&i.iframe!==s&&(i.iframe=s,i.iframeLoadHandler=()=>{b(t)},s.addEventListener("load",i.iframeLoadHandler,{once:!0}),window.setTimeout(()=>{const s=e.get(t);s&&"loading"===s.status&&b(t)},1200))}),i.observer.observe(m,{childList:!0,subtree:!0}),m.appendChild(f)}function h(s){if(!s||"true"===s.dataset.giscusBooted)return;s.dataset.giscusBooted="true";const n={status:"idle",observer:null,timeoutId:null,retryTimer:null,autoRetryCount:0,iframe:null,iframeLoadHandler:null,script:null,io:null};e.set(s,n),t.push(s);const i=r(s,".giscus-fallback-link");i&&s.dataset.giscusFallbackUrl&&i.setAttribute("href",s.dataset.giscusFallbackUrl);const a=r(s,".giscus-retry-btn");a&&a.addEventListener("click",()=>{c(s,"giscus:retry",{reason:"manual-click",attempt:0,source:"manual"}),y(s,!0,"manual")}),d(s,"idle"),"IntersectionObserver"in window?(n.io=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(n.io&&(n.io.disconnect(),n.io=null),y(s,!1,"init"))})},{rootMargin:"320px 0px",threshold:.01}),n.io.observe(s)):y(s,!1,"init")}function w(){const r=Array.from(document.querySelectorAll("[data-giscus-root]"));r.length&&(r.forEach(h),function(){if(s)return;s=!0;const t=new MutationObserver(()=>{m()});t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),window.addEventListener("themechange",m),window.addEventListener("beforeunload",()=>{t.disconnect(),window.removeEventListener("themechange",m)},{once:!0})}(),function(){if(n)return;n=!0;const s=()=>{t.forEach(t=>{const s=e.get(t);s&&"error"===s.status&&y(t,!0,"online")})};window.addEventListener("online",s),window.addEventListener("beforeunload",()=>{window.removeEventListener("online",s)},{once:!0})}())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w,{once:!0}):w(),window.__giscusLoader={reloadAll(){t.forEach(t=>y(t,!0,"manual"))},getStatus(t){const s=e.get(t);return s?s.status:"unknown"}}}();
//# sourceMappingURL=giscus-loader.min.js.map
