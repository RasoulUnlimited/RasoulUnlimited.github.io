{"version":3,"file":"gallery-filter.min.js","names":["document","addEventListener","filterBar","querySelector","cards","Array","from","querySelectorAll","length","buttons","liveRegion","setActiveButton","targetBtn","forEach","btn","isActive","classList","toggle","setAttribute","applyFilter","filterValue","sourceButton","filter","find","b","getAttribute","visibleCount","card","categories","split","map","c","trim","Boolean","getCardCategories","show","includes","hidden","total","textContent","updateLiveRegion","createElement","className","appendChild","event","button","target","closest","preventDefault","initialFromAttr","activeBtn","contains"],"sources":["gallery-filter.js"],"mappings":"CAAA,WACE,aAEAA,SAASC,iBAAiB,mBAAoB,WAC5C,MAAMC,EAAYF,SAASG,cAAc,eACzC,IAAKD,EAAY,OAEjB,MAAME,EAAQC,MAAMC,KAAKN,SAASO,iBAAiB,mBACnD,IAAKH,EAAMI,OAAS,OAEpB,MAAMC,EAAUJ,MAAMC,KACpBJ,EAAUK,iBAAiB,wBAE7B,IAAKE,EAAQD,OAAS,OAGtB,IAAIE,EAAaR,EAAUC,cAAc,6BAmBzC,SAASQ,EAAgBC,GACvBH,EAAQI,QAASC,IACf,MAAMC,EAAWD,IAAQF,EACzBE,EAAIE,UAAUC,OAAO,SAAUF,GAC/BD,EAAII,aAAa,eAAgBH,EAAW,OAAS,UAEzD,CAgBA,SAASI,EAAYC,EAAaC,GAChC,MAAMC,EAASF,GAAe,MAE9B,GAAIC,EACFV,EAAgBU,OACX,CACL,MAAMP,EAAML,EAAQc,KACjBC,GAAMA,EAAEC,aAAa,iBAAmBH,GAEvCR,GAAMH,EAAgBG,EAC5B,CAEA,IAAIY,EAAe,EAEnBtB,EAAMS,QAASc,IACb,MAAMC,EA7CV,SAA2BD,GAEzB,OADYA,EAAKF,aAAa,kBAAoB,IAE/CI,MAAM,OACNC,IAAKC,GAAMA,EAAEC,QACbV,OAAOW,QACZ,CAuCuBC,CAAkBP,GAC/BQ,EACO,QAAXb,GACCM,EAAWpB,QAAUoB,EAAWQ,SAASd,GAG5CK,EAAKU,QAAUF,EACfR,EAAKX,UAAUC,OAAO,mBAAoBkB,GACtCA,IAAOT,GAAgB,KArC/B,SAA0BA,GACxB,MAAMY,EAAQlC,EAAMI,OACfE,IAEHA,EAAW6B,YADTb,IAAiBY,EACM,GAAGZ,SACT,IAAjBA,EAAqB,GAAK,YAGH,GAAGA,QAAmBY,SACnC,IAAVA,EAAc,GAAK,YAGzB,CA4BEE,CAAiBd,EACnB,CAnEKhB,IACHA,EAAaV,SAASyC,cAAc,QACpC/B,EAAWQ,aAAa,YAAa,UACrCR,EAAWQ,aAAa,cAAe,QACvCR,EAAWQ,aAAa,mBAAoB,QAC5CR,EAAWgC,UAAY,sBACvBxC,EAAUyC,YAAYjC,IAgExBR,EAAUD,iBAAiB,QAAU2C,IACnC,MAAMC,EAASD,EAAME,OAAOC,QAAQ,uBACpC,IAAKF,EAAS,OACdD,EAAMI,iBAGN7B,EADe0B,EAAOpB,aAAa,gBAAkB,MACjCoB,KAItB,MAAMI,EAAkB/C,EAAUuB,aAAa,uBACzCyB,EACJzC,EAAQc,KAAMC,GAAMA,EAAER,UAAUmC,SAAS,YACzC1C,EAAQ,GAOVU,EAJE8B,GACAC,GAAWzB,aAAa,gBACxB,MAEyByB,EAC7B,EACD,CA7GD","ignoreList":[],"sourcesContent":["(function () {\r\n  \"use strict\";\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", function () {\r\n    const filterBar = document.querySelector(\".filter-bar\");\r\n    if (!filterBar) {return;}\r\n\r\n    const cards = Array.from(document.querySelectorAll(\".presskit-card\"));\r\n    if (!cards.length) {return;}\r\n\r\n    const buttons = Array.from(\r\n      filterBar.querySelectorAll(\"button[data-filter]\")\r\n    );\r\n    if (!buttons.length) {return;}\r\n\r\n    // Live region برای اعلام تعداد نتایج\r\n    let liveRegion = filterBar.querySelector(\"[data-filter-live=\\\"true\\\"]\");\r\n    if (!liveRegion) {\r\n      liveRegion = document.createElement(\"span\");\r\n      liveRegion.setAttribute(\"aria-live\", \"polite\");\r\n      liveRegion.setAttribute(\"aria-atomic\", \"true\");\r\n      liveRegion.setAttribute(\"data-filter-live\", \"true\");\r\n      liveRegion.className = \"filter-live sr-only\"; // تو CSS .sr-only رو تعریف کن\r\n      filterBar.appendChild(liveRegion);\r\n    }\r\n\r\n    // نرمال‌سازی categoryها (پشتیبانی از چند دسته)\r\n    function getCardCategories(card) {\r\n      const raw = card.getAttribute(\"data-category\") || \"\";\r\n      return raw\r\n        .split(/\\s+/)\r\n        .map((c) => c.trim())\r\n        .filter(Boolean);\r\n    }\r\n\r\n    function setActiveButton(targetBtn) {\r\n      buttons.forEach((btn) => {\r\n        const isActive = btn === targetBtn;\r\n        btn.classList.toggle(\"active\", isActive);\r\n        btn.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\r\n      });\r\n    }\r\n\r\n    function updateLiveRegion(visibleCount) {\r\n      const total = cards.length;\r\n      if (!liveRegion) {return;}\r\n      if (visibleCount === total) {\r\n        liveRegion.textContent = `${visibleCount} item${\r\n          visibleCount === 1 ? \"\" : \"s\"\r\n        } shown`;\r\n      } else {\r\n        liveRegion.textContent = `${visibleCount} of ${total} item${\r\n          total === 1 ? \"\" : \"s\"\r\n        } shown`;\r\n      }\r\n    }\r\n\r\n    function applyFilter(filterValue, sourceButton) {\r\n      const filter = filterValue || \"all\";\r\n\r\n      if (sourceButton) {\r\n        setActiveButton(sourceButton);\r\n      } else {\r\n        const btn = buttons.find(\r\n          (b) => b.getAttribute(\"data-filter\") === filter\r\n        );\r\n        if (btn) {setActiveButton(btn);}\r\n      }\r\n\r\n      let visibleCount = 0;\r\n\r\n      cards.forEach((card) => {\r\n        const categories = getCardCategories(card);\r\n        const show =\r\n          filter === \"all\" ||\r\n          (categories.length && categories.includes(filter));\r\n\r\n        // برای انیمیشن، کلاس رو هم می‌تونیم کنترل کنیم\r\n        card.hidden = !show;\r\n        card.classList.toggle(\"is-filtered-out\", !show);\r\n        if (show) {visibleCount += 1;}\r\n      });\r\n\r\n      updateLiveRegion(visibleCount);\r\n    }\r\n\r\n    // کلیک روی filter bar (event delegation)\r\n    filterBar.addEventListener(\"click\", (event) => {\r\n      const button = event.target.closest(\"button[data-filter]\");\r\n      if (!button) {return;}\r\n      event.preventDefault();\r\n\r\n      const filter = button.getAttribute(\"data-filter\") || \"all\";\r\n      applyFilter(filter, button);\r\n    });\r\n\r\n    // اینیت اولیه: از data-initial-filter یا از دکمه‌ی active\r\n    const initialFromAttr = filterBar.getAttribute(\"data-initial-filter\");\r\n    const activeBtn =\r\n      buttons.find((b) => b.classList.contains(\"active\")) ||\r\n      buttons[0]; // fallback به اولین دکمه\r\n\r\n    const initialFilter =\r\n      initialFromAttr ||\r\n      activeBtn?.getAttribute(\"data-filter\") ||\r\n      \"all\";\r\n\r\n    applyFilter(initialFilter, activeBtn);\r\n  });\r\n})();\r\n"]}