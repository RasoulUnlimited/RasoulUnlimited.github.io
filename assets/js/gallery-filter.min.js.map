{"version":3,"file":"gallery-filter.min.js","names":["document","addEventListener","filterBar","querySelector","cards","Array","from","querySelectorAll","length","buttons","liveRegion","getCardCategories","card","getAttribute","split","map","c","trim","filter","Boolean","setActiveButton","targetBtn","forEach","btn","isActive","classList","toggle","setAttribute","updateLiveRegion","visibleCount","total","textContent","applyFilter","filterValue","sourceButton","find","b","categories","show","includes","hidden","createElement","className","appendChild","event","button","target","closest","preventDefault","initialFromAttr","activeBtn","contains"],"sources":["gallery-filter.js"],"mappings":"CAAA,WACE,aAEAA,SAASC,iBAAiB,mBAAoB,WAC5C,MAAMC,EAAYF,SAASG,cAAc,eACzC,IAAKD,EAAW,OAEhB,MAAME,EAAQC,MAAMC,KAAKN,SAASO,iBAAiB,mBACnD,IAAKH,EAAMI,OAAQ,OAEnB,MAAMC,EAAUJ,MAAMC,KACpBJ,EAAUK,iBAAiB,wBAE7B,IAAKE,EAAQD,OAAQ,OAGrB,IAAIE,EAAaR,EAAUC,cAAc,6BAWzC,SAASQ,EAAkBC,GAEzB,OADYA,EAAKC,aAAa,kBAAoB,IAE/CC,MAAM,OACNC,IAAKC,GAAMA,EAAEC,QACbC,OAAOC,QACZ,CAEA,SAASC,EAAgBC,GACvBZ,EAAQa,QAASC,IACf,MAAMC,EAAWD,IAAQF,EACzBE,EAAIE,UAAUC,OAAO,SAAUF,GAC/BD,EAAII,aAAa,eAAgBH,EAAW,OAAS,UAEzD,CAEA,SAASI,EAAiBC,GACxB,MAAMC,EAAQ1B,EAAMI,OACfE,IAEHA,EAAWqB,YADTF,IAAiBC,EACM,GAAGD,SACT,IAAjBA,EAAqB,GAAK,YAGH,GAAGA,QAAmBC,SACnC,IAAVA,EAAc,GAAK,YAGzB,CAEA,SAASE,EAAYC,EAAaC,GAChC,MAAMhB,EAASe,GAAe,MAE9B,GAAIC,EACFd,EAAgBc,OACX,CACL,MAAMX,EAAMd,EAAQ0B,KACjBC,GAAMA,EAAEvB,aAAa,iBAAmBK,GAEvCK,GAAKH,EAAgBG,EAC3B,CAEA,IAAIM,EAAe,EAEnBzB,EAAMkB,QAASV,IACb,MAAMyB,EAAa1B,EAAkBC,GAC/B0B,EACO,QAAXpB,GACCmB,EAAW7B,QAAU6B,EAAWE,SAASrB,GAG5CN,EAAK4B,QAAUF,EACf1B,EAAKa,UAAUC,OAAO,mBAAoBY,GACtCA,IAAMT,GAAgB,KAG5BD,EAAiBC,EACnB,CAnEKnB,IACHA,EAAaV,SAASyC,cAAc,QACpC/B,EAAWiB,aAAa,YAAa,UACrCjB,EAAWiB,aAAa,cAAe,QACvCjB,EAAWiB,aAAa,mBAAoB,QAC5CjB,EAAWgC,UAAY,sBACvBxC,EAAUyC,YAAYjC,IAgExBR,EAAUD,iBAAiB,QAAU2C,IACnC,MAAMC,EAASD,EAAME,OAAOC,QAAQ,uBACpC,IAAKF,EAAQ,OACbD,EAAMI,iBAGNhB,EADea,EAAOhC,aAAa,gBAAkB,MACjCgC,KAItB,MAAMI,EAAkB/C,EAAUW,aAAa,uBACzCqC,EACJzC,EAAQ0B,KAAMC,GAAMA,EAAEX,UAAU0B,SAAS,YACzC1C,EAAQ,GAOVuB,EAJEiB,GACAC,GAAWrC,aAAa,gBACxB,MAEyBqC,EAC7B,EACD,CA7GD","ignoreList":[],"sourcesContent":["(function () {\r\n  \"use strict\";\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", function () {\r\n    const filterBar = document.querySelector(\".filter-bar\");\r\n    if (!filterBar) return;\r\n\r\n    const cards = Array.from(document.querySelectorAll(\".presskit-card\"));\r\n    if (!cards.length) return;\r\n\r\n    const buttons = Array.from(\r\n      filterBar.querySelectorAll(\"button[data-filter]\")\r\n    );\r\n    if (!buttons.length) return;\r\n\r\n    // Live region برای اعلام تعداد نتایج\r\n    let liveRegion = filterBar.querySelector('[data-filter-live=\"true\"]');\r\n    if (!liveRegion) {\r\n      liveRegion = document.createElement(\"span\");\r\n      liveRegion.setAttribute(\"aria-live\", \"polite\");\r\n      liveRegion.setAttribute(\"aria-atomic\", \"true\");\r\n      liveRegion.setAttribute(\"data-filter-live\", \"true\");\r\n      liveRegion.className = \"filter-live sr-only\"; // تو CSS .sr-only رو تعریف کن\r\n      filterBar.appendChild(liveRegion);\r\n    }\r\n\r\n    // نرمال‌سازی categoryها (پشتیبانی از چند دسته)\r\n    function getCardCategories(card) {\r\n      const raw = card.getAttribute(\"data-category\") || \"\";\r\n      return raw\r\n        .split(/\\s+/)\r\n        .map((c) => c.trim())\r\n        .filter(Boolean);\r\n    }\r\n\r\n    function setActiveButton(targetBtn) {\r\n      buttons.forEach((btn) => {\r\n        const isActive = btn === targetBtn;\r\n        btn.classList.toggle(\"active\", isActive);\r\n        btn.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\r\n      });\r\n    }\r\n\r\n    function updateLiveRegion(visibleCount) {\r\n      const total = cards.length;\r\n      if (!liveRegion) return;\r\n      if (visibleCount === total) {\r\n        liveRegion.textContent = `${visibleCount} item${\r\n          visibleCount === 1 ? \"\" : \"s\"\r\n        } shown`;\r\n      } else {\r\n        liveRegion.textContent = `${visibleCount} of ${total} item${\r\n          total === 1 ? \"\" : \"s\"\r\n        } shown`;\r\n      }\r\n    }\r\n\r\n    function applyFilter(filterValue, sourceButton) {\r\n      const filter = filterValue || \"all\";\r\n\r\n      if (sourceButton) {\r\n        setActiveButton(sourceButton);\r\n      } else {\r\n        const btn = buttons.find(\r\n          (b) => b.getAttribute(\"data-filter\") === filter\r\n        );\r\n        if (btn) setActiveButton(btn);\r\n      }\r\n\r\n      let visibleCount = 0;\r\n\r\n      cards.forEach((card) => {\r\n        const categories = getCardCategories(card);\r\n        const show =\r\n          filter === \"all\" ||\r\n          (categories.length && categories.includes(filter));\r\n\r\n        // برای انیمیشن، کلاس رو هم می‌تونیم کنترل کنیم\r\n        card.hidden = !show;\r\n        card.classList.toggle(\"is-filtered-out\", !show);\r\n        if (show) visibleCount += 1;\r\n      });\r\n\r\n      updateLiveRegion(visibleCount);\r\n    }\r\n\r\n    // کلیک روی filter bar (event delegation)\r\n    filterBar.addEventListener(\"click\", (event) => {\r\n      const button = event.target.closest(\"button[data-filter]\");\r\n      if (!button) return;\r\n      event.preventDefault();\r\n\r\n      const filter = button.getAttribute(\"data-filter\") || \"all\";\r\n      applyFilter(filter, button);\r\n    });\r\n\r\n    // اینیت اولیه: از data-initial-filter یا از دکمه‌ی active\r\n    const initialFromAttr = filterBar.getAttribute(\"data-initial-filter\");\r\n    const activeBtn =\r\n      buttons.find((b) => b.classList.contains(\"active\")) ||\r\n      buttons[0]; // fallback به اولین دکمه\r\n\r\n    const initialFilter =\r\n      initialFromAttr ||\r\n      activeBtn?.getAttribute(\"data-filter\") ||\r\n      \"all\";\r\n\r\n    applyFilter(initialFilter, activeBtn);\r\n  });\r\n})();\r\n"]}