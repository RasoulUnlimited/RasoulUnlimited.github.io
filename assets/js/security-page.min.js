document.addEventListener("DOMContentLoaded",function(){let n=document.documentElement.lang||"en",a={success:n.startsWith("fa")?"کپی شد! ✅":"Copied! ✅",fail:n.startsWith("fa")?"عملیات کپی ناموفق بود.":"Failed to copy.",unsupported:n.startsWith("fa")?"مرورگر از کپی پشتیبانی نمی‌کند.":"Your browser does not support copying."};function e(t){var t=t.currentTarget;let e=t.dataset.copyText||"";(e=!e&&(t=t.dataset.copyTarget,t=document.getElementById(t))?t.textContent.trim():e)&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{"function"==typeof createToast&&createToast(a.success)}).catch(t=>{console.error("Copy failed:",t),"function"==typeof createToast&&createToast(a.fail)}):"function"==typeof createToast&&createToast(a.unsupported))}document.querySelectorAll(".copy-button").forEach(t=>{t.addEventListener("click",e)});var t=document.querySelectorAll(".timeline li");if("IntersectionObserver"in window){let e=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("timeline-item-visible"),e.unobserve(t.target))})},{threshold:.3});t.forEach(t=>e.observe(t))}else t.forEach(t=>t.classList.add("timeline-item-visible"));let o=document.getElementById("policy-expiration");o&&fetch("/.well-known/security.txt").then(t=>t.text()).then(t=>{var e,a,t=t.match(/^Expires:\s*(.+)$/m);t?(t=new Date(t[1].trim()),a=n.startsWith("fa")?"fa-IR":"en-US",e={year:"numeric",month:"long",day:"numeric"},a=n.startsWith("fa")?"اعتبار سیاست تا "+t.toLocaleDateString(a,e):"Policy valid until "+t.toLocaleDateString(a,e),o.textContent=a,t<=new Date&&o.classList.add("expired")):o.textContent=n.startsWith("fa")?"تاریخ اعتبار در دسترس نیست.":"Expiration date unavailable."}).catch(()=>{o.textContent=n.startsWith("fa")?"خطا در دریافت تاریخ اعتبار.":"Failed to load expiration date."})});