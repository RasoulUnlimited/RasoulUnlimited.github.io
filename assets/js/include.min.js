!function(){"use strict";const t=window.location.origin,e="ru-include-v2::",r=((document.documentElement.getAttribute("lang")||navigator.language||"").toLowerCase().indexOf("fa"),["/assets/js/","/includes/"]);function n(t){return new Promise(e=>setTimeout(e,t))}const o=function(){try{const t="__ru_include_storage_probe__";return localStorage.setItem(t,"1"),localStorage.removeItem(t),localStorage}catch{return null}}();function a(r){try{const n=new URL(r,t);return e+n.pathname}catch{return e+r}}function c(t,r){if(!o||!r)return;const n=a(t),c=JSON.stringify({t:Date.now(),html:r});try{o.setItem(n,c)}catch{!function(){if(!o)return;const t=[];for(let r=0;r<o.length;r++){const n=o.key(r);if(!n||!n.startsWith(e))continue;let a=0;try{const t=JSON.parse(o.getItem(n)||"{}");a=Number(t.t)||0}catch{a=0}t.push({key:n,timestamp:a})}t.length&&t.sort((t,e)=>t.timestamp-e.timestamp).slice(0,Math.ceil(t.length/2)).forEach(t=>{try{o.removeItem(t.key)}catch{}})}();try{o.setItem(n,c)}catch{}}}function i(t){if(t){if(t.nodeType===Node.ELEMENT_NODE){Array.from(t.attributes).forEach(e=>{e.name.toLowerCase().startsWith("on")&&t.removeAttribute(e.name)});const e=t.tagName.toLowerCase();if(["object","embed","iframe"].includes(e))return void t.remove();return["href","xlink:href","action","formaction"].forEach(e=>{let r=t.getAttribute(e);r||"xlink:href"!==e||(r=t.getAttributeNS("http://www.w3.org/1999/xlink","href")),r&&r.toLowerCase().trim().startsWith("javascript:")&&(t.removeAttribute(e),"xlink:href"===e&&t.removeAttributeNS("http://www.w3.org/1999/xlink","href"))}),void Array.from(t.childNodes).forEach(i)}t.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.PROCESSING_INSTRUCTION_NODE||t.remove()}}function l(e,n,o,a){const c=function(t,e){const r=(new DOMParser).parseFromString(e,"text/html");if(r.querySelector("parsererror"))throw new Error("Failed to parse HTML for "+t);return Array.from(r.body.childNodes).forEach(i),r}(n,o),l=document.querySelector("script[data-csp-nonce]"),s=l?.nonce||null;for(e.innerHTML="";c.body&&c.body.firstChild;)e.appendChild(c.body.firstChild);if(/footer\.html$/i.test(n)){const t=e.querySelector("#footer-year")||e.querySelector("#current-year");t&&(t.textContent=String((new Date).getFullYear()))}e.querySelectorAll("script").forEach(e=>{if(e.src&&!function(e){if(!e)return!0;try{const n=new URL(e,t);return n.origin===t&&r.some(t=>n.pathname.startsWith(t))}catch{return!1}}(e.src))return void e.remove();const n=document.createElement("script"),o=["type","async","defer","charset","id","class"];for(const t of e.attributes)(o.includes(t.name)||t.name.startsWith("data-"))&&n.setAttribute(t.name,t.value);s&&(n.nonce=s),e.src?n.src=e.src:n.textContent=e.textContent,e.parentNode.replaceChild(n,e)}),a?e.setAttribute("data-include-stale","true"):e.removeAttribute("data-include-stale"),e.removeAttribute("data-include-failed")}function s(t){const e=document.createElement("div");e.className="include-fallback",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.textContent="This section is temporarily unavailable. Please refresh when your connection is stable.",t.innerHTML="",t.appendChild(e),t.setAttribute("data-include-failed","true"),t.removeAttribute("data-include-stale")}async function u(t){const e="function"==typeof AbortController?new AbortController:null;let r=null;e&&(r=setTimeout(()=>{e.abort()},7e3));try{return await fetch(t,{credentials:"same-origin",cache:"no-cache",...e?{signal:e.signal}:{}})}finally{r&&clearTimeout(r)}}async function d(t){try{const e=await async function(t){let e=null;for(let r=1;r<=3;r++)try{const e=await u(t);if(!e.ok)throw new Error("HTTP "+e.status+" for "+t);return await e.text()}catch(t){if(e=t,r<3){const t=350*2**(r-1)+Math.floor(120*Math.random());await n(t)}}throw e||new Error("Unknown include fetch error for "+t)}(t);return c(t,e),{html:e,stale:!1}}catch(e){const r=function(t){if(!o)return null;const e=a(t),r=o.getItem(e);if(!r)return null;try{const t=JSON.parse(r),n=Number(t.t)||0,a="string"==typeof t.html?t.html:"";return a?Date.now()-n>6048e5?(o.removeItem(e),null):a:(o.removeItem(e),null)}catch{return o.removeItem(e),null}}(t);if(r)return console.warn("Using stale include cache for",t,e),{html:r,stale:!0};throw e}}async function m(e){const r=document.querySelectorAll("[data-include-html]");if(!r.length){if("function"==typeof e)try{e()}catch(t){console.error("includeHTML callback error:",t)}return}const n=[];for(const e of r){if("true"===e.dataset.includeLoaded||"true"===e.dataset.includePending)continue;const r=e.getAttribute("data-include-html");if(!r)continue;try{if(new URL(r,t).origin!==t){console.error("Blocked cross-origin include:",r);continue}}catch{console.error("Invalid include URL:",r);continue}e.dataset.includePending="true";const o=(async()=>{try{const{html:t,stale:n}=await d(r);l(e,r,t,n),e.dataset.includeLoaded="true",e.removeAttribute("data-include-html")}catch(t){console.error("Include error for",r,t),s(e)}finally{delete e.dataset.includePending}})();n.push(o)}if(await Promise.all(n),"function"==typeof e)try{e()}catch(t){console.error("includeHTML callback error:",t)}}document.addEventListener("DOMContentLoaded",function(){m(()=>{!function(){const e=t=>(t||"/").replace(/\/index\.html$/i,"/").replace(/\/+$/,"/")||"/",r=e(window.location.pathname);document.querySelectorAll(".navbar nav a").forEach(n=>{const o=n.getAttribute("href")||"";if(o.startsWith("#")||o.startsWith("mailto:")||o.startsWith("javascript:"))return n.classList.remove("active"),n.removeAttribute("aria-current"),void(n.parentElement&&"LI"===n.parentElement.tagName&&n.parentElement.classList.remove("active"));let a="";try{const r=new URL(o,t);a=e(r.pathname)}catch{a=""}const c=a===r;n.classList.toggle("active",c),c?n.setAttribute("aria-current","page"):n.removeAttribute("aria-current"),n.parentElement&&"LI"===n.parentElement.tagName&&n.parentElement.classList.toggle("active",c)})}(),document.dispatchEvent(new Event("includesLoaded"))})}),window.addEventListener("online",()=>{document.querySelector("[data-include-html]")&&m()}),window.includeHTML=m}();
//# sourceMappingURL=include.min.js.map
