!function(){"use strict";async function e(t){const r=document.querySelectorAll("[data-include-html]");if(!r.length){if("function"==typeof t)try{t()}catch(e){console.error("includeHTML callback error:",e)}return}const o=["/assets/js/","/includes/",new URL(window.location.href).origin+"/assets/js/"];function n(e){if(!e)return!0;try{const t=new URL(e,window.location.origin);return t.origin===window.location.origin&&o.some(e=>t.pathname.startsWith(e.replace(window.location.origin,"")))}catch{return!1}}const i=[];for(const e of r){const t=e.getAttribute("data-include-html");if(!t)continue;try{if(new URL(t,window.location.origin).origin!==window.location.origin){console.error(`Blocked cross-origin include: ${t}`);continue}}catch(e){console.error(`Invalid include URL: ${t}`);continue}e.removeAttribute("data-include-html");const r=fetch(t).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status} for ${t}`);return e.text()}).then(r=>{const o=(new DOMParser).parseFromString(r,"text/html");if(o.body&&o.body.firstChild&&"parsererror"===o.body.firstChild.nodeName)throw new Error(`Failed to parse HTML for ${t}`);const i=e=>{if(e.nodeType===Node.ELEMENT_NODE){Array.from(e.attributes).forEach(t=>{t.name.toLowerCase().startsWith("on")&&(console.warn(`Removed event handler attribute: ${t.name}`),e.removeAttribute(t.name))});const t=e.tagName.toLowerCase();if(["object","embed","iframe"].includes(t))return console.warn(`Removed potentially dangerous element: ${t}`),void e.remove();if("svg"===t||"use"===t||"image"===t||"a"===t||"area"===t||"form"===t||"button"===t||"input"===t){["href","xlink:href","action","formaction"].forEach(r=>{const o=e.getAttribute(r)||e.getAttributeNS("http://www.w3.org/1999/xlink","href");o&&o.toLowerCase().trim().startsWith("javascript:")&&(e.removeAttribute(r),"xlink:href"===r&&e.removeAttributeNS("http://www.w3.org/1999/xlink","href"),console.warn(`Removed javascript: URI from ${t} attribute ${r}`))})}Array.from(e.children).forEach(i)}else e.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.PROCESSING_INSTRUCTION_NODE||e.remove()};for(Array.from(o.body.childNodes).forEach(i),e.innerHTML="";o.body&&o.body.firstChild;)e.appendChild(o.body.firstChild);if(/footer\.html$/i.test(t)){const t=e.querySelector("#footer-year")||e.querySelector("#current-year");t&&(t.textContent=String((new Date).getFullYear()))}e.querySelectorAll("script").forEach(e=>{if(e.src&&!n(e.src))return console.warn("Blocked untrusted external script in included HTML:",e.src),void e.remove();const t=document.createElement("script"),r=["type","async","defer","charset","id","class"];for(const o of e.attributes)(r.includes(o.name)||o.name.startsWith("data-"))&&t.setAttribute(o.name,o.value);e.src?t.src=e.src:t.textContent=e.textContent,e.parentNode.replaceChild(t,e)})}).catch(e=>{console.error("Include error for",t,e)});i.push(r)}if(await Promise.all(i),document.querySelectorAll("[data-include-html]").length>0)await e(t);else if("function"==typeof t)try{t()}catch(e){console.error("includeHTML callback error:",e)}}document.addEventListener("DOMContentLoaded",()=>{e(()=>{!function(){const e=e=>e.replace(/\/index\.html$/i,"/").replace(/\/+$/,"/")||"/",t=e(window.location.pathname);document.querySelectorAll(".navbar nav a").forEach(r=>{const o=r.getAttribute("href")||"";if(o.startsWith("#")||o.startsWith("mailto:")||o.startsWith("javascript:"))return r.classList.remove("active"),r.removeAttribute("aria-current"),void(r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.remove("active"));let n;try{const t=new URL(o,window.location.origin);n=e(t.pathname)}catch(e){n=""}const i=n===t;r.classList.toggle("active",i),i?r.setAttribute("aria-current","page"):r.removeAttribute("aria-current"),r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.toggle("active",i)})}(),document.dispatchEvent(new Event("includesLoaded"))})}),window.includeHTML=e}();
//# sourceMappingURL=include.min.js.map
