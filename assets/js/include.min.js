!function(){"use strict";async function e(e){const t=document.querySelectorAll("[data-include-html]");if(!t.length){if("function"==typeof e)try{e()}catch(e){console.error("includeHTML callback error:",e)}return}const r=["/assets/js/","/includes/",new URL(window.location.href).origin+"/assets/js/"];function o(e){if(!e)return!0;try{const t=new URL(e,window.location.origin);return t.origin===window.location.origin&&r.some(e=>t.pathname.startsWith(e.replace(window.location.origin,"")))}catch{return!1}}const n=[];for(const e of t){const t=e.getAttribute("data-include-html");if(!t)continue;e.removeAttribute("data-include-html");const r=fetch(t).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status} for ${t}`);return e.text()}).then(r=>{const n=(new DOMParser).parseFromString(r,"text/html");if(n.body&&n.body.firstChild&&"parsererror"===n.body.firstChild.nodeName)throw new Error(`Failed to parse HTML for ${t}`);const a=e=>{if(e.nodeType===Node.ELEMENT_NODE){Array.from(e.attributes).forEach(t=>{t.name.toLowerCase().startsWith("on")&&(console.warn(`Removed event handler attribute: ${t.name}`),e.removeAttribute(t.name))});const t=e.tagName.toLowerCase();if(["object","embed","form"].includes(t))return console.warn(`Removed potentially dangerous element: ${t}`),void e.remove();if("svg"===t||"use"===t||"image"===t){const r=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href");r&&r.toLowerCase().startsWith("javascript:")&&(e.removeAttribute("href"),e.removeAttributeNS("http://www.w3.org/1999/xlink","href"),console.warn(`Removed javascript: URI from ${t}`))}Array.from(e.children).forEach(a)}else e.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.PROCESSING_INSTRUCTION_NODE||e.remove()};for(Array.from(n.body.childNodes).forEach(a),e.innerHTML="";n.body&&n.body.firstChild;)e.appendChild(n.body.firstChild);if(/footer\.html$/i.test(t)){const t=e.querySelector("#footer-year")||e.querySelector("#current-year");t&&(t.textContent=String((new Date).getFullYear()))}e.querySelectorAll("script").forEach(e=>{if(e.src&&!o(e.src))return console.warn("Blocked untrusted external script in included HTML:",e.src),void e.remove();const t=document.createElement("script"),r=["type","async","defer","charset"];for(const o of e.attributes)r.includes(o.name)&&t.setAttribute(o.name,o.value);e.src?t.src=e.src:t.textContent=e.textContent,e.parentNode.replaceChild(t,e)})}).catch(e=>{console.error("Include error for",t,e)});n.push(r)}if(await Promise.all(n),"function"==typeof e)try{e()}catch(e){console.error("includeHTML callback error:",e)}}function t(){const e=e=>e.replace(/\/index\.html$/i,"/").replace(/\/+$/,"/")||"/",t=e(window.location.pathname);document.querySelectorAll(".navbar nav a").forEach(r=>{const o=r.getAttribute("href")||"";if(o.startsWith("#")||o.startsWith("mailto:")||o.startsWith("javascript:"))return r.classList.remove("active"),r.removeAttribute("aria-current"),void(r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.remove("active"));let n;try{const t=new URL(o,window.location.origin);n=e(t.pathname)}catch(e){n=""}const a=n===t;r.classList.toggle("active",a),a?r.setAttribute("aria-current","page"):r.removeAttribute("aria-current"),r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.toggle("active",a)})}document.addEventListener("DOMContentLoaded",()=>{e(()=>{t(),document.dispatchEvent(new Event("includesLoaded"))})}),window.includeHTML=e}();
//# sourceMappingURL=include.min.js.map
