!function(){"use strict";var e=window.location.origin;async function t(t){const r=document.querySelectorAll("[data-include-html]");if(!r.length){if("function"==typeof t)try{t()}catch(e){console.error("includeHTML callback error:",e)}return}const n=["/assets/js/","/includes/"];function o(t){if(!t)return!0;try{const r=new URL(t,e);return r.origin===e&&n.some(e=>r.pathname.startsWith(e))}catch{return!1}}const a=document.querySelector("script[data-csp-nonce]"),c=a?.nonce||null,i=[];for(const t of r){const r=t.getAttribute("data-include-html");if(!r)continue;try{if(new URL(r,e).origin!==e){console.error("Blocked cross-origin include:",r);continue}}catch(e){console.error("Invalid include URL:",r);continue}t.removeAttribute("data-include-html");const n=fetch(r).then(e=>{if(!e.ok)throw new Error("HTTP "+e.status+" for "+r);return e.text()}).then(e=>{const n=(new DOMParser).parseFromString(e,"text/html");if(n.querySelector("parsererror"))throw new Error("Failed to parse HTML for "+r);const a=e=>{if(e)if(e.nodeType===Node.ELEMENT_NODE){Array.from(e.attributes).forEach(t=>{t.name.toLowerCase().startsWith("on")&&(console.warn("Removed event handler attribute:",t.name),e.removeAttribute(t.name))});const t=e.tagName.toLowerCase();if(["object","embed","iframe"].includes(t))return console.warn("Removed potentially dangerous element:",t),void e.remove();if("svg"===t||"use"===t||"image"===t||"a"===t||"area"===t||"form"===t||"button"===t||"input"===t){["href","xlink:href","action","formaction"].forEach(r=>{let n=e.getAttribute(r);n||"xlink:href"!==r||(n=e.getAttributeNS("http://www.w3.org/1999/xlink","href")),n&&n.toLowerCase().trim().startsWith("javascript:")&&(e.removeAttribute(r),"xlink:href"===r&&e.removeAttributeNS("http://www.w3.org/1999/xlink","href"),console.warn("Removed javascript: URI from",t,"attribute",r))})}Array.from(e.childNodes).forEach(a)}else e.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.PROCESSING_INSTRUCTION_NODE||e.remove()};for(Array.from(n.body.childNodes).forEach(a),t.innerHTML="";n.body&&n.body.firstChild;)t.appendChild(n.body.firstChild);if(/footer\.html$/i.test(r)){const e=t.querySelector("#footer-year")||t.querySelector("#current-year");e&&(e.textContent=String((new Date).getFullYear()))}t.querySelectorAll("script").forEach(e=>{if(e.src&&!o(e.src))return console.warn("Blocked untrusted external script in included HTML:",e.src),void e.remove();const t=document.createElement("script"),r=["type","async","defer","charset","id","class"];for(const n of e.attributes)(r.includes(n.name)||n.name.startsWith("data-"))&&t.setAttribute(n.name,n.value);c&&(t.nonce=c),e.src?t.src=e.src:t.textContent=e.textContent,e.parentNode.replaceChild(t,e)})}).catch(e=>{console.error("Include error for",r,e)});i.push(n)}if(await Promise.all(i),"function"==typeof t)try{t()}catch(e){console.error("includeHTML callback error:",e)}}document.addEventListener("DOMContentLoaded",()=>{t(()=>{!function(){const t=e=>(e||"/").replace(/\/index\.html$/i,"/").replace(/\/+$/,"/")||"/",r=t(window.location.pathname);document.querySelectorAll(".navbar nav a").forEach(n=>{const o=n.getAttribute("href")||"";if(o.startsWith("#")||o.startsWith("mailto:")||o.startsWith("javascript:"))return n.classList.remove("active"),n.removeAttribute("aria-current"),void(n.parentElement&&"LI"===n.parentElement.tagName&&n.parentElement.classList.remove("active"));let a="";try{const r=new URL(o,e);a=t(r.pathname)}catch(e){a=""}const c=a===r;n.classList.toggle("active",c),c?n.setAttribute("aria-current","page"):n.removeAttribute("aria-current"),n.parentElement&&"LI"===n.parentElement.tagName&&n.parentElement.classList.toggle("active",c)})}(),document.dispatchEvent(new Event("includesLoaded"))})}),window.includeHTML=t}();
//# sourceMappingURL=include.min.js.map
