!function(){"use strict";async function t(t){const e=document.querySelectorAll("[data-include-html]");if(!e.length){if("function"==typeof t)try{t()}catch(t){console.error("includeHTML callback error:",t)}return}const r=["/assets/js/","/includes/",new URL(window.location.href).origin+"/assets/js/"];function n(t){if(!t)return!0;try{const e=new URL(t,window.location.origin);return e.origin===window.location.origin&&r.some(t=>e.pathname.startsWith(t.replace(window.location.origin,"")))}catch{return!1}}const o=[];for(const t of e){const e=t.getAttribute("data-include-html");if(!e)continue;t.removeAttribute("data-include-html");const r=fetch(e).then(t=>{if(!t.ok)throw new Error(`HTTP ${t.status} for ${e}`);return t.text()}).then(r=>{const o=(new DOMParser).parseFromString(r,"text/html");if(o.body&&o.body.firstChild&&"parsererror"===o.body.firstChild.nodeName)throw new Error(`Failed to parse HTML for ${e}`);for(t.innerHTML="";o.body&&o.body.firstChild;)t.appendChild(o.body.firstChild);if(/footer\.html$/i.test(e)){const e=t.querySelector("#footer-year")||t.querySelector("#current-year");e&&(e.textContent=String((new Date).getFullYear()))}t.querySelectorAll("script").forEach(t=>{if(t.src&&!n(t.src))return console.warn("Blocked untrusted external script in included HTML:",t.src),void t.remove();const e=document.createElement("script"),r=["type","async","defer","charset"];for(const n of t.attributes)r.includes(n.name)&&e.setAttribute(n.name,n.value);t.src?e.src=t.src:e.textContent=t.textContent,t.parentNode.replaceChild(e,t)})}).catch(t=>{console.error("Include error for",e,t)});o.push(r)}if(await Promise.all(o),"function"==typeof t)try{t()}catch(t){console.error("includeHTML callback error:",t)}}function e(){const t=t=>t.replace(/\/index\.html$/i,"/").replace(/\/+$/,"/")||"/",e=t(window.location.pathname);document.querySelectorAll(".navbar nav a").forEach(r=>{const n=r.getAttribute("href")||"";if(n.startsWith("#")||n.startsWith("mailto:")||n.startsWith("javascript:"))return r.classList.remove("active"),r.removeAttribute("aria-current"),void(r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.remove("active"));let o;try{const e=new URL(n,window.location.origin);o=t(e.pathname)}catch(t){o=""}const i=o===e;r.classList.toggle("active",i),i?r.setAttribute("aria-current","page"):r.removeAttribute("aria-current"),r.parentElement&&"LI"===r.parentElement.tagName&&r.parentElement.classList.toggle("active",i)})}document.addEventListener("DOMContentLoaded",()=>{t(()=>{e(),document.dispatchEvent(new Event("includesLoaded"))})}),window.includeHTML=t}();