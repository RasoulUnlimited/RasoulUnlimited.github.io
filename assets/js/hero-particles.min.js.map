{"version":3,"file":"hero-particles.min.js","names":["document","addEventListener","hero","getElementById","canvas","heroImage","querySelector","ctx","HTMLCanvasElement","getContext","connection","navigator","mozConnection","webkitConnection","reducedMotionQuery","window","matchMedia","coarsePointerQuery","FRAME_INTERVAL","motionMode","heroVisible","pageVisible","hidden","particlesEnabled","rafId","resizeTimer","destroyed","particles","lastFrameTime","colorCache","r","g","b","colorCacheTs","canvasObserver","themeObserver","mouse","x","y","radius","resolveMotionMode","matches","saveData","Boolean","type","String","effectiveType","toLowerCase","includes","isNetworkConstrained","isBoundaryViewport","innerWidth","cores","Number","hardwareConcurrency","memory","deviceMemory","isLowPowerDevice","setMotionMode","nextMode","dataset","heroMotion","syncTiltMode","syncParticlesMode","resizeCanvas","rect","getBoundingClientRect","width","Math","max","round","height","innerHeight","updateColorCache","now","Date","match","getComputedStyle","documentElement","getPropertyValue","trim","parseInt","Particle","constructor","vx","vy","size","this","draw","beginPath","arc","PI","fillStyle","fill","update","dx","dy","hypot","initParticles","count","min","floor","i","random","push","stopParticles","cancelAnimationFrame","clearRect","renderParticles","ts","requestAnimationFrame","length","maxDistanceSq","linked","j","distanceSq","alpha","strokeStyle","lineWidth","moveTo","lineTo","stroke","drawConnections","active","particlesState","tiltEnabled","next","HTMLElement","heroTilt","style","transform","onHeroPointerMove","event","clientX","clientY","rotateY","left","rotateX","top","toFixed","onHeroPointerLeave","onVisibilityChange","onMediaOrNetworkChange","onResize","clearTimeout","setTimeout","cleanup","removeEventListener","disconnect","removeListener","setAttribute","passive","once","IntersectionObserver","entries","entry","isIntersecting","observe","MutationObserver","body","attributes","attributeFilter","addListener"],"sources":["hero-particles.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const hero = document.getElementById(\"hero\");\r\n  if (!hero) {\r\n    return;\r\n  }\r\n\r\n  const canvas = document.getElementById(\"hero-particles\");\r\n  const heroImage = hero.querySelector(\".profile-image\");\r\n  const ctx = canvas instanceof HTMLCanvasElement ? canvas.getContext(\"2d\") : null;\r\n\r\n  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n  const reducedMotionQuery = window.matchMedia\r\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\r\n    : null;\r\n  const coarsePointerQuery = window.matchMedia\r\n    ? window.matchMedia(\"(pointer: coarse)\")\r\n    : null;\r\n\r\n  const MIN_FULL_MOTION_VIEWPORT = 1100;\r\n  const PARTICLE_DENSITY = 22000;\r\n  const MIN_PARTICLES = 16;\r\n  const MAX_PARTICLES = 72;\r\n  const TARGET_FPS = 30;\r\n  const FRAME_INTERVAL = 1000 / TARGET_FPS;\r\n\r\n  let motionMode = \"full\";\r\n  let heroVisible = true;\r\n  let pageVisible = !document.hidden;\r\n  let particlesEnabled = false;\r\n  let rafId = null;\r\n  let resizeTimer = null;\r\n  let destroyed = false;\r\n  let particles = [];\r\n  let lastFrameTime = 0;\r\n  let colorCache = { r: 59, g: 130, b: 246 };\r\n  let colorCacheTs = 0;\r\n  let canvasObserver = null;\r\n  let themeObserver = null;\r\n\r\n  const mouse = {\r\n    x: null,\r\n    y: null,\r\n    radius: 135,\r\n  };\r\n\r\n  function isNetworkConstrained() {\r\n    if (!connection) {\r\n      return false;\r\n    }\r\n\r\n    const saveData = Boolean(connection.saveData);\r\n    const type = String(connection.effectiveType || \"\").toLowerCase();\r\n    return saveData || type.includes(\"2g\") || type.includes(\"slow-2g\");\r\n  }\r\n\r\n  function isLowPowerDevice() {\r\n    const cores = Number(navigator.hardwareConcurrency || 0);\r\n    const memory = Number(navigator.deviceMemory || 0);\r\n    const fewCores = cores > 0 && cores <= 4;\r\n    const lowMemory = memory > 0 && memory <= 4;\r\n    return fewCores || lowMemory;\r\n  }\r\n\r\n  function resolveMotionMode() {\r\n    if (reducedMotionQuery?.matches || isNetworkConstrained()) {\r\n      return \"off\";\r\n    }\r\n\r\n    const isBoundaryViewport = window.innerWidth < MIN_FULL_MOTION_VIEWPORT;\r\n    if (coarsePointerQuery?.matches || isBoundaryViewport || isLowPowerDevice()) {\r\n      return \"lite\";\r\n    }\r\n\r\n    return \"full\";\r\n  }\r\n\r\n  function setMotionMode(nextMode) {\r\n    if (motionMode === nextMode && hero.dataset.heroMotion === nextMode) {\r\n      return;\r\n    }\r\n\r\n    motionMode = nextMode;\r\n    hero.dataset.heroMotion = nextMode;\r\n    syncTiltMode();\r\n    syncParticlesMode();\r\n  }\r\n\r\n  function shouldAnimateParticles() {\r\n    return (\r\n      !destroyed &&\r\n      motionMode === \"full\" &&\r\n      heroVisible &&\r\n      pageVisible &&\r\n      Boolean(ctx)\r\n    );\r\n  }\r\n\r\n  function resizeCanvas() {\r\n    if (!canvas || !ctx) {\r\n      return;\r\n    }\r\n\r\n    const rect = canvas.getBoundingClientRect();\r\n    const width = Math.max(1, Math.round(rect.width || window.innerWidth));\r\n    const height = Math.max(1, Math.round(rect.height || window.innerHeight));\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n  }\r\n\r\n  function updateColorCache() {\r\n    const now = Date.now();\r\n    if (now - colorCacheTs < 900) {\r\n      return;\r\n    }\r\n\r\n    colorCacheTs = now;\r\n    const fromCss = getComputedStyle(document.documentElement)\r\n      .getPropertyValue(\"--particle-color\")\r\n      .trim();\r\n\r\n    const match = (fromCss || \"\").match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/i);\r\n    if (match) {\r\n      colorCache = {\r\n        r: Number.parseInt(match[1], 10),\r\n        g: Number.parseInt(match[2], 10),\r\n        b: Number.parseInt(match[3], 10),\r\n      };\r\n    }\r\n  }\r\n\r\n  class Particle {\r\n    constructor(x, y, vx, vy, size) {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.vx = vx;\r\n      this.vy = vy;\r\n      this.size = size;\r\n    }\r\n\r\n    draw() {\r\n      if (!ctx) {\r\n        return;\r\n      }\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\r\n      ctx.fillStyle = `rgba(${colorCache.r}, ${colorCache.g}, ${colorCache.b}, 0.42)`;\r\n      ctx.fill();\r\n    }\r\n\r\n    update() {\r\n      if (!canvas) {\r\n        return;\r\n      }\r\n\r\n      if (this.x > canvas.width || this.x < 0) {\r\n        this.vx = -this.vx;\r\n      }\r\n      if (this.y > canvas.height || this.y < 0) {\r\n        this.vy = -this.vy;\r\n      }\r\n\r\n      if (mouse.x !== null && mouse.y !== null) {\r\n        const dx = mouse.x - this.x;\r\n        const dy = mouse.y - this.y;\r\n        const dist = Math.hypot(dx, dy);\r\n        if (dist < mouse.radius + this.size) {\r\n          this.x -= dx * 0.008;\r\n          this.y -= dy * 0.008;\r\n        }\r\n      }\r\n\r\n      this.x += this.vx;\r\n      this.y += this.vy;\r\n      this.draw();\r\n    }\r\n  }\r\n\r\n  function initParticles() {\r\n    if (!canvas) {\r\n      return;\r\n    }\r\n\r\n    particles = [];\r\n    const count = Math.min(\r\n      MAX_PARTICLES,\r\n      Math.max(MIN_PARTICLES, Math.floor((canvas.width * canvas.height) / PARTICLE_DENSITY))\r\n    );\r\n\r\n    for (let i = 0; i < count; i += 1) {\r\n      const size = Math.random() * 2.8 + 1;\r\n      const x = Math.random() * Math.max(1, canvas.width - size * 2) + size;\r\n      const y = Math.random() * Math.max(1, canvas.height - size * 2) + size;\r\n      const vx = Math.random() * 1.1 - 0.55;\r\n      const vy = Math.random() * 1.1 - 0.55;\r\n      particles.push(new Particle(x, y, vx, vy, size));\r\n    }\r\n  }\r\n\r\n  function drawConnections() {\r\n    if (!ctx || !canvas || particles.length < 2) {\r\n      return;\r\n    }\r\n\r\n    const maxDistanceSq = Math.min(20000, (canvas.width * canvas.height) / 42);\r\n    const lineLimit = 6;\r\n\r\n    for (let i = 0; i < particles.length; i += 1) {\r\n      let linked = 0;\r\n      for (let j = i + 1; j < particles.length && linked < lineLimit; j += 1) {\r\n        const dx = particles[i].x - particles[j].x;\r\n        const dy = particles[i].y - particles[j].y;\r\n        const distanceSq = dx * dx + dy * dy;\r\n\r\n        if (distanceSq < maxDistanceSq) {\r\n          const alpha = Math.max(0, 0.26 - distanceSq / (maxDistanceSq * 3.8));\r\n          ctx.strokeStyle = `rgba(${colorCache.r}, ${colorCache.g}, ${colorCache.b}, ${alpha})`;\r\n          ctx.lineWidth = 1;\r\n          ctx.beginPath();\r\n          ctx.moveTo(particles[i].x, particles[i].y);\r\n          ctx.lineTo(particles[j].x, particles[j].y);\r\n          ctx.stroke();\r\n          linked += 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function stopParticles() {\r\n    if (rafId !== null) {\r\n      cancelAnimationFrame(rafId);\r\n      rafId = null;\r\n    }\r\n\r\n    if (ctx && canvas) {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  }\r\n\r\n  function renderParticles(ts) {\r\n    if (!particlesEnabled || destroyed || !ctx || !canvas) {\r\n      rafId = null;\r\n      return;\r\n    }\r\n\r\n    if (ts - lastFrameTime < FRAME_INTERVAL) {\r\n      rafId = requestAnimationFrame(renderParticles);\r\n      return;\r\n    }\r\n\r\n    lastFrameTime = ts;\r\n    updateColorCache();\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    for (let i = 0; i < particles.length; i += 1) {\r\n      particles[i].update();\r\n    }\r\n    drawConnections();\r\n\r\n    rafId = requestAnimationFrame(renderParticles);\r\n  }\r\n\r\n  function setParticlesMode(active) {\r\n    if (!canvas || !ctx) {\r\n      return;\r\n    }\r\n\r\n    if (active === particlesEnabled) {\r\n      canvas.dataset.particlesState = active ? \"active\" : \"disabled\";\r\n      return;\r\n    }\r\n\r\n    particlesEnabled = active;\r\n    canvas.dataset.particlesState = active ? \"active\" : \"disabled\";\r\n\r\n    if (!active) {\r\n      stopParticles();\r\n      return;\r\n    }\r\n\r\n    resizeCanvas();\r\n    updateColorCache();\r\n    initParticles();\r\n    lastFrameTime = 0;\r\n    if (rafId === null) {\r\n      rafId = requestAnimationFrame(renderParticles);\r\n    }\r\n  }\r\n\r\n  function syncParticlesMode() {\r\n    setParticlesMode(shouldAnimateParticles());\r\n  }\r\n\r\n  let tiltEnabled = false;\r\n\r\n  function syncTiltMode() {\r\n    const next = motionMode === \"full\" && !document.hidden && heroImage instanceof HTMLElement;\r\n    tiltEnabled = Boolean(next);\r\n    hero.dataset.heroTilt = tiltEnabled ? \"enabled\" : \"disabled\";\r\n\r\n    if (!tiltEnabled && heroImage instanceof HTMLElement) {\r\n      heroImage.style.transform = \"\";\r\n    }\r\n  }\r\n\r\n  function onHeroPointerMove(event) {\r\n    mouse.x = event.clientX;\r\n    mouse.y = event.clientY;\r\n\r\n    if (!tiltEnabled || !(heroImage instanceof HTMLElement)) {\r\n      return;\r\n    }\r\n\r\n    const rect = hero.getBoundingClientRect();\r\n    if (rect.width <= 0 || rect.height <= 0) {\r\n      return;\r\n    }\r\n\r\n    const rx = (event.clientX - rect.left) / rect.width;\r\n    const ry = (event.clientY - rect.top) / rect.height;\r\n    const rotateY = (rx - 0.5) * 10;\r\n    const rotateX = (ry - 0.5) * -10;\r\n\r\n    heroImage.style.transform = `perspective(920px) rotateY(${rotateY.toFixed(2)}deg) rotateX(${rotateX.toFixed(2)}deg) scale(1.025)`;\r\n  }\r\n\r\n  function onHeroPointerLeave() {\r\n    mouse.x = null;\r\n    mouse.y = null;\r\n    if (heroImage instanceof HTMLElement) {\r\n      heroImage.style.transform = \"\";\r\n    }\r\n  }\r\n\r\n  function onVisibilityChange() {\r\n    pageVisible = !document.hidden;\r\n    syncTiltMode();\r\n    syncParticlesMode();\r\n  }\r\n\r\n  function onMediaOrNetworkChange() {\r\n    setMotionMode(resolveMotionMode());\r\n  }\r\n\r\n  function onResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      resizeCanvas();\r\n      setMotionMode(resolveMotionMode());\r\n      if (particlesEnabled) {\r\n        initParticles();\r\n      }\r\n    }, 140);\r\n  }\r\n\r\n  function cleanup() {\r\n    destroyed = true;\r\n    clearTimeout(resizeTimer);\r\n    stopParticles();\r\n\r\n    if (canvas) {\r\n      canvas.dataset.particlesState = \"disabled\";\r\n    }\r\n    hero.dataset.heroTilt = \"disabled\";\r\n\r\n    window.removeEventListener(\"resize\", onResize);\r\n    document.removeEventListener(\"visibilitychange\", onVisibilityChange);\r\n    window.removeEventListener(\"beforeunload\", cleanup);\r\n    window.removeEventListener(\"pagehide\", cleanup);\r\n    hero.removeEventListener(\"pointermove\", onHeroPointerMove);\r\n    hero.removeEventListener(\"pointerleave\", onHeroPointerLeave);\r\n\r\n    if (canvasObserver) {\r\n      canvasObserver.disconnect();\r\n      canvasObserver = null;\r\n    }\r\n    if (themeObserver) {\r\n      themeObserver.disconnect();\r\n      themeObserver = null;\r\n    }\r\n\r\n    reducedMotionQuery?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\r\n    coarsePointerQuery?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\r\n    connection?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\r\n\r\n    reducedMotionQuery?.removeListener?.(onMediaOrNetworkChange);\r\n    coarsePointerQuery?.removeListener?.(onMediaOrNetworkChange);\r\n    connection?.removeListener?.(onMediaOrNetworkChange);\r\n  }\r\n\r\n  if (canvas) {\r\n    canvas.setAttribute(\"aria-hidden\", \"true\");\r\n    canvas.dataset.particlesState = \"disabled\";\r\n  }\r\n\r\n  hero.dataset.heroMotion = \"off\";\r\n  hero.dataset.heroTilt = \"disabled\";\r\n\r\n  hero.addEventListener(\"pointermove\", onHeroPointerMove, { passive: true });\r\n  hero.addEventListener(\"pointerleave\", onHeroPointerLeave, { passive: true });\r\n  window.addEventListener(\"resize\", onResize, { passive: true });\r\n  document.addEventListener(\"visibilitychange\", onVisibilityChange);\r\n  window.addEventListener(\"beforeunload\", cleanup, { once: true });\r\n  window.addEventListener(\"pagehide\", cleanup, { once: true });\r\n\r\n  if (canvas && \"IntersectionObserver\" in window) {\r\n    canvasObserver = new IntersectionObserver((entries) => {\r\n      for (const entry of entries) {\r\n        heroVisible = entry.isIntersecting;\r\n      }\r\n      syncParticlesMode();\r\n    });\r\n    canvasObserver.observe(canvas);\r\n  }\r\n\r\n  themeObserver = new MutationObserver(() => {\r\n    if (particlesEnabled) {\r\n      updateColorCache();\r\n      initParticles();\r\n    }\r\n  });\r\n  themeObserver.observe(document.body, {\r\n    attributes: true,\r\n    attributeFilter: [\"class\"],\r\n  });\r\n\r\n  reducedMotionQuery?.addEventListener?.(\"change\", onMediaOrNetworkChange);\r\n  coarsePointerQuery?.addEventListener?.(\"change\", onMediaOrNetworkChange);\r\n  connection?.addEventListener?.(\"change\", onMediaOrNetworkChange);\r\n\r\n  reducedMotionQuery?.addListener?.(onMediaOrNetworkChange);\r\n  coarsePointerQuery?.addListener?.(onMediaOrNetworkChange);\r\n  connection?.addListener?.(onMediaOrNetworkChange);\r\n\r\n  resizeCanvas();\r\n  setMotionMode(resolveMotionMode());\r\n});\r\n"]}