{"version":3,"file":"hero-particles.min.js","names":["document","addEventListener","hero","getElementById","canvas","heroImage","querySelector","ctx","HTMLCanvasElement","getContext","connection","navigator","mozConnection","webkitConnection","reducedMotionQuery","window","matchMedia","coarsePointerQuery","FRAME_INTERVAL","motionMode","heroVisible","pageVisible","hidden","particlesEnabled","rafId","resizeTimer","destroyed","particles","lastFrameTime","colorCache","r","g","b","colorCacheTs","canvasObserver","themeObserver","mouse","x","y","radius","resolveMotionMode","matches","saveData","Boolean","type","String","effectiveType","toLowerCase","includes","isNetworkConstrained","isBoundaryViewport","innerWidth","cores","Number","hardwareConcurrency","memory","deviceMemory","isLowPowerDevice","setMotionMode","nextMode","dataset","heroMotion","syncTiltMode","syncParticlesMode","resizeCanvas","rect","getBoundingClientRect","width","Math","max","round","height","innerHeight","updateColorCache","now","Date","match","getComputedStyle","documentElement","getPropertyValue","trim","parseInt","Particle","constructor","vx","vy","size","this","draw","beginPath","arc","PI","fillStyle","fill","update","dx","dy","hypot","initParticles","count","min","floor","i","random","push","stopParticles","cancelAnimationFrame","clearRect","renderParticles","ts","requestAnimationFrame","length","maxDistanceSq","linked","j","distanceSq","alpha","strokeStyle","lineWidth","moveTo","lineTo","stroke","drawConnections","active","particlesState","tiltEnabled","next","HTMLElement","heroTilt","style","transform","onHeroPointerMove","event","clientX","clientY","rotateY","left","rotateX","top","toFixed","onHeroPointerLeave","onVisibilityChange","onMediaOrNetworkChange","onResize","clearTimeout","setTimeout","cleanup","removeEventListener","disconnect","removeListener","setAttribute","passive","once","IntersectionObserver","entries","entry","isIntersecting","observe","MutationObserver","body","attributes","attributeFilter","addListener"],"sources":["hero-particles.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  const hero = document.getElementById(\"hero\");\n  if (!hero) {\n    return;\n  }\n\n  const canvas = document.getElementById(\"hero-particles\");\n  const heroImage = hero.querySelector(\".profile-image\");\n  const ctx = canvas instanceof HTMLCanvasElement ? canvas.getContext(\"2d\") : null;\n\n  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n  const reducedMotionQuery = window.matchMedia\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\n    : null;\n  const coarsePointerQuery = window.matchMedia\n    ? window.matchMedia(\"(pointer: coarse)\")\n    : null;\n\n  const MIN_FULL_MOTION_VIEWPORT = 1100;\n  const PARTICLE_DENSITY = 22000;\n  const MIN_PARTICLES = 16;\n  const MAX_PARTICLES = 72;\n  const TARGET_FPS = 30;\n  const FRAME_INTERVAL = 1000 / TARGET_FPS;\n\n  let motionMode = \"full\";\n  let heroVisible = true;\n  let pageVisible = !document.hidden;\n  let particlesEnabled = false;\n  let rafId = null;\n  let resizeTimer = null;\n  let destroyed = false;\n  let particles = [];\n  let lastFrameTime = 0;\n  let colorCache = { r: 59, g: 130, b: 246 };\n  let colorCacheTs = 0;\n  let canvasObserver = null;\n  let themeObserver = null;\n\n  const mouse = {\n    x: null,\n    y: null,\n    radius: 135,\n  };\n\n  function isNetworkConstrained() {\n    if (!connection) {\n      return false;\n    }\n\n    const saveData = Boolean(connection.saveData);\n    const type = String(connection.effectiveType || \"\").toLowerCase();\n    return saveData || type.includes(\"2g\") || type.includes(\"slow-2g\");\n  }\n\n  function isLowPowerDevice() {\n    const cores = Number(navigator.hardwareConcurrency || 0);\n    const memory = Number(navigator.deviceMemory || 0);\n    const fewCores = cores > 0 && cores <= 4;\n    const lowMemory = memory > 0 && memory <= 4;\n    return fewCores || lowMemory;\n  }\n\n  function resolveMotionMode() {\n    if (reducedMotionQuery?.matches || isNetworkConstrained()) {\n      return \"off\";\n    }\n\n    const isBoundaryViewport = window.innerWidth < MIN_FULL_MOTION_VIEWPORT;\n    if (coarsePointerQuery?.matches || isBoundaryViewport || isLowPowerDevice()) {\n      return \"lite\";\n    }\n\n    return \"full\";\n  }\n\n  function setMotionMode(nextMode) {\n    if (motionMode === nextMode && hero.dataset.heroMotion === nextMode) {\n      return;\n    }\n\n    motionMode = nextMode;\n    hero.dataset.heroMotion = nextMode;\n    syncTiltMode();\n    syncParticlesMode();\n  }\n\n  function shouldAnimateParticles() {\n    return (\n      !destroyed &&\n      motionMode === \"full\" &&\n      heroVisible &&\n      pageVisible &&\n      Boolean(ctx)\n    );\n  }\n\n  function resizeCanvas() {\n    if (!canvas || !ctx) {\n      return;\n    }\n\n    const rect = canvas.getBoundingClientRect();\n    const width = Math.max(1, Math.round(rect.width || window.innerWidth));\n    const height = Math.max(1, Math.round(rect.height || window.innerHeight));\n    canvas.width = width;\n    canvas.height = height;\n  }\n\n  function updateColorCache() {\n    const now = Date.now();\n    if (now - colorCacheTs < 900) {\n      return;\n    }\n\n    colorCacheTs = now;\n    const fromCss = getComputedStyle(document.documentElement)\n      .getPropertyValue(\"--particle-color\")\n      .trim();\n\n    const match = (fromCss || \"\").match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/i);\n    if (match) {\n      colorCache = {\n        r: Number.parseInt(match[1], 10),\n        g: Number.parseInt(match[2], 10),\n        b: Number.parseInt(match[3], 10),\n      };\n    }\n  }\n\n  class Particle {\n    constructor(x, y, vx, vy, size) {\n      this.x = x;\n      this.y = y;\n      this.vx = vx;\n      this.vy = vy;\n      this.size = size;\n    }\n\n    draw() {\n      if (!ctx) {\n        return;\n      }\n\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n      ctx.fillStyle = `rgba(${colorCache.r}, ${colorCache.g}, ${colorCache.b}, 0.42)`;\n      ctx.fill();\n    }\n\n    update() {\n      if (!canvas) {\n        return;\n      }\n\n      if (this.x > canvas.width || this.x < 0) {\n        this.vx = -this.vx;\n      }\n      if (this.y > canvas.height || this.y < 0) {\n        this.vy = -this.vy;\n      }\n\n      if (mouse.x !== null && mouse.y !== null) {\n        const dx = mouse.x - this.x;\n        const dy = mouse.y - this.y;\n        const dist = Math.hypot(dx, dy);\n        if (dist < mouse.radius + this.size) {\n          this.x -= dx * 0.008;\n          this.y -= dy * 0.008;\n        }\n      }\n\n      this.x += this.vx;\n      this.y += this.vy;\n      this.draw();\n    }\n  }\n\n  function initParticles() {\n    if (!canvas) {\n      return;\n    }\n\n    particles = [];\n    const count = Math.min(\n      MAX_PARTICLES,\n      Math.max(MIN_PARTICLES, Math.floor((canvas.width * canvas.height) / PARTICLE_DENSITY))\n    );\n\n    for (let i = 0; i < count; i += 1) {\n      const size = Math.random() * 2.8 + 1;\n      const x = Math.random() * Math.max(1, canvas.width - size * 2) + size;\n      const y = Math.random() * Math.max(1, canvas.height - size * 2) + size;\n      const vx = Math.random() * 1.1 - 0.55;\n      const vy = Math.random() * 1.1 - 0.55;\n      particles.push(new Particle(x, y, vx, vy, size));\n    }\n  }\n\n  function drawConnections() {\n    if (!ctx || !canvas || particles.length < 2) {\n      return;\n    }\n\n    const maxDistanceSq = Math.min(20000, (canvas.width * canvas.height) / 42);\n    const lineLimit = 6;\n\n    for (let i = 0; i < particles.length; i += 1) {\n      let linked = 0;\n      for (let j = i + 1; j < particles.length && linked < lineLimit; j += 1) {\n        const dx = particles[i].x - particles[j].x;\n        const dy = particles[i].y - particles[j].y;\n        const distanceSq = dx * dx + dy * dy;\n\n        if (distanceSq < maxDistanceSq) {\n          const alpha = Math.max(0, 0.26 - distanceSq / (maxDistanceSq * 3.8));\n          ctx.strokeStyle = `rgba(${colorCache.r}, ${colorCache.g}, ${colorCache.b}, ${alpha})`;\n          ctx.lineWidth = 1;\n          ctx.beginPath();\n          ctx.moveTo(particles[i].x, particles[i].y);\n          ctx.lineTo(particles[j].x, particles[j].y);\n          ctx.stroke();\n          linked += 1;\n        }\n      }\n    }\n  }\n\n  function stopParticles() {\n    if (rafId !== null) {\n      cancelAnimationFrame(rafId);\n      rafId = null;\n    }\n\n    if (ctx && canvas) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  }\n\n  function renderParticles(ts) {\n    if (!particlesEnabled || destroyed || !ctx || !canvas) {\n      rafId = null;\n      return;\n    }\n\n    if (ts - lastFrameTime < FRAME_INTERVAL) {\n      rafId = requestAnimationFrame(renderParticles);\n      return;\n    }\n\n    lastFrameTime = ts;\n    updateColorCache();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    for (let i = 0; i < particles.length; i += 1) {\n      particles[i].update();\n    }\n    drawConnections();\n\n    rafId = requestAnimationFrame(renderParticles);\n  }\n\n  function setParticlesMode(active) {\n    if (!canvas || !ctx) {\n      return;\n    }\n\n    if (active === particlesEnabled) {\n      canvas.dataset.particlesState = active ? \"active\" : \"disabled\";\n      return;\n    }\n\n    particlesEnabled = active;\n    canvas.dataset.particlesState = active ? \"active\" : \"disabled\";\n\n    if (!active) {\n      stopParticles();\n      return;\n    }\n\n    resizeCanvas();\n    updateColorCache();\n    initParticles();\n    lastFrameTime = 0;\n    if (rafId === null) {\n      rafId = requestAnimationFrame(renderParticles);\n    }\n  }\n\n  function syncParticlesMode() {\n    setParticlesMode(shouldAnimateParticles());\n  }\n\n  let tiltEnabled = false;\n\n  function syncTiltMode() {\n    const next = motionMode === \"full\" && !document.hidden && heroImage instanceof HTMLElement;\n    tiltEnabled = Boolean(next);\n    hero.dataset.heroTilt = tiltEnabled ? \"enabled\" : \"disabled\";\n\n    if (!tiltEnabled && heroImage instanceof HTMLElement) {\n      heroImage.style.transform = \"\";\n    }\n  }\n\n  function onHeroPointerMove(event) {\n    mouse.x = event.clientX;\n    mouse.y = event.clientY;\n\n    if (!tiltEnabled || !(heroImage instanceof HTMLElement)) {\n      return;\n    }\n\n    const rect = hero.getBoundingClientRect();\n    if (rect.width <= 0 || rect.height <= 0) {\n      return;\n    }\n\n    const rx = (event.clientX - rect.left) / rect.width;\n    const ry = (event.clientY - rect.top) / rect.height;\n    const rotateY = (rx - 0.5) * 10;\n    const rotateX = (ry - 0.5) * -10;\n\n    heroImage.style.transform = `perspective(920px) rotateY(${rotateY.toFixed(2)}deg) rotateX(${rotateX.toFixed(2)}deg) scale(1.025)`;\n  }\n\n  function onHeroPointerLeave() {\n    mouse.x = null;\n    mouse.y = null;\n    if (heroImage instanceof HTMLElement) {\n      heroImage.style.transform = \"\";\n    }\n  }\n\n  function onVisibilityChange() {\n    pageVisible = !document.hidden;\n    syncTiltMode();\n    syncParticlesMode();\n  }\n\n  function onMediaOrNetworkChange() {\n    setMotionMode(resolveMotionMode());\n  }\n\n  function onResize() {\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(() => {\n      resizeCanvas();\n      setMotionMode(resolveMotionMode());\n      if (particlesEnabled) {\n        initParticles();\n      }\n    }, 140);\n  }\n\n  function cleanup() {\n    destroyed = true;\n    clearTimeout(resizeTimer);\n    stopParticles();\n\n    if (canvas) {\n      canvas.dataset.particlesState = \"disabled\";\n    }\n    hero.dataset.heroTilt = \"disabled\";\n\n    window.removeEventListener(\"resize\", onResize);\n    document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    window.removeEventListener(\"beforeunload\", cleanup);\n    window.removeEventListener(\"pagehide\", cleanup);\n    hero.removeEventListener(\"pointermove\", onHeroPointerMove);\n    hero.removeEventListener(\"pointerleave\", onHeroPointerLeave);\n\n    if (canvasObserver) {\n      canvasObserver.disconnect();\n      canvasObserver = null;\n    }\n    if (themeObserver) {\n      themeObserver.disconnect();\n      themeObserver = null;\n    }\n\n    reducedMotionQuery?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\n    coarsePointerQuery?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\n    connection?.removeEventListener?.(\"change\", onMediaOrNetworkChange);\n\n    reducedMotionQuery?.removeListener?.(onMediaOrNetworkChange);\n    coarsePointerQuery?.removeListener?.(onMediaOrNetworkChange);\n    connection?.removeListener?.(onMediaOrNetworkChange);\n  }\n\n  if (canvas) {\n    canvas.setAttribute(\"aria-hidden\", \"true\");\n    canvas.dataset.particlesState = \"disabled\";\n  }\n\n  hero.dataset.heroMotion = \"off\";\n  hero.dataset.heroTilt = \"disabled\";\n\n  hero.addEventListener(\"pointermove\", onHeroPointerMove, { passive: true });\n  hero.addEventListener(\"pointerleave\", onHeroPointerLeave, { passive: true });\n  window.addEventListener(\"resize\", onResize, { passive: true });\n  document.addEventListener(\"visibilitychange\", onVisibilityChange);\n  window.addEventListener(\"beforeunload\", cleanup, { once: true });\n  window.addEventListener(\"pagehide\", cleanup, { once: true });\n\n  if (canvas && \"IntersectionObserver\" in window) {\n    canvasObserver = new IntersectionObserver((entries) => {\n      for (const entry of entries) {\n        heroVisible = entry.isIntersecting;\n      }\n      syncParticlesMode();\n    });\n    canvasObserver.observe(canvas);\n  }\n\n  themeObserver = new MutationObserver(() => {\n    if (particlesEnabled) {\n      updateColorCache();\n      initParticles();\n    }\n  });\n  themeObserver.observe(document.body, {\n    attributes: true,\n    attributeFilter: [\"class\"],\n  });\n\n  reducedMotionQuery?.addEventListener?.(\"change\", onMediaOrNetworkChange);\n  coarsePointerQuery?.addEventListener?.(\"change\", onMediaOrNetworkChange);\n  connection?.addEventListener?.(\"change\", onMediaOrNetworkChange);\n\n  reducedMotionQuery?.addListener?.(onMediaOrNetworkChange);\n  coarsePointerQuery?.addListener?.(onMediaOrNetworkChange);\n  connection?.addListener?.(onMediaOrNetworkChange);\n\n  resizeCanvas();\n  setMotionMode(resolveMotionMode());\n});\r\n"]}