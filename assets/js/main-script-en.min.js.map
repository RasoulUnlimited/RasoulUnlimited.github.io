{"version":3,"file":"main-script-en.min.js","names":["noop","on","el","evt","fn","opts","addEventListener","wrapped","result","apply","this","arguments","then","catch","err","reportRuntimeError","capture","RUNTIME_ERRORS_KEY","RUNTIME_ERRORS_MAX","pushRuntimeError","scope","payload","Error","name","message","stack","JSON","stringify","String","serializeRuntimeError","entry","ts","Date","toISOString","raw","sessionStorage","getItem","prev","parse","next","Array","isArray","concat","slice","setItem","document","documentElement","dataset","runtimeErrorCount","length","window","dispatchEvent","CustomEvent","detail","classList","add","console","error","safeRun","throttle","limit","inThrottle","lastFunc","lastRan","ctx","args","clearTimeout","setTimeout","now","Math","max","debounce","delay","t","ric","requestIdleCallback","cb","timeRemaining","didTimeout","storage","cancelIdleCallback","get","key","fallback","v","localStorage","set","value","retryCount","attemptSet","e","oldKeys","Object","keys","filter","k","includes","removeItem","innerE","warn","setRaw","getRaw","remove","ENV","mq","q","matchMedia","matches","removeEventListener","addListener","removeListener","mqs","reduced","dark","coarse","conn","navigator","connection","mozConnection","webkitConnection","state","saveData","lowThroughput","test","effectiveType","lowPowerCPU","hardwareConcurrency","listeners","notify","forEach","l","bindMQL","m","onChange","push","FLAGS","s","low","ENABLE_AOS","ENABLE_SOUNDS","ENABLE_HAPTICS","ENABLE_CONFETTI","ENABLE_IDENTITY_PINGS","loadStylesheetWithTimeout","href","timeoutMs","Promise","resolve","reject","link","createElement","rel","crossOrigin","done","timer","onload","onerror","head","appendChild","hasFontAwesome","fonts","check","probe","className","style","position","width","height","overflow","opacity","body","family","getComputedStyle","fontFamily","async","waitForFontAwesome","maxWaitMs","start","initCriticalStyleFallbacks","fallbacks","delayMs","scheduleFontAwesomeRecoveryCheck","run","STRINGS_EN","themeDark","themeLight","reachedEnd","welcomeMorning","welcomeNoon","welcomeEvening","welcomeNight","welcomeBack","emailCopied","emailCopyError","shareOk","shareErr","linkCopied","clipboardUnsupported","closeToast","scrollTop","share","themeToggle","FUN_FACTS_EN","SKILL_TOOLTIPS_EN","python","c","javascript","fullstack","karate","diligence","teamwork","foresight","sql","nodejs","seo","aeo","cybersecurity","ai","nlp","teardown","AbortController","signal","abortSignal","vibrate","pattern","audioContext","clickBuffer","toastBuffer","createToneBuffer","duration","wave","sr","sampleRate","buffer","createBuffer","floor","data","getChannelData","i","playSound","kind","src","createBufferSource","connect","destination","showToast","optionsOrType","createToast","setDynamicDates","yearEl","getElementById","textContent","getFullYear","lastUpdated","year","month","day","toLocaleDateString","setAttribute","setIdentityHooks","id","hiddenInfo","upsertMeta","content","meta","querySelector","authorFullName","orcidId","queueIdentityPings","fetch","targets","url","aborted","mode","ping","Ctx","AudioContext","webkitAudioContext","ensureAudioContext","resume","sin","PI","f","once","hidden","suspend","__ruToastFeedback","aosLoaded","aosScriptRequested","setAOSDisabledCSS","disabled","toggle","scheduleAOSRefresh","debouncedRefresh","AOS","refreshHard","initAOS","init","maxDelay","querySelectorAll","node","HTMLElement","rawDelay","getAttribute","parsedDelay","Number","parseInt","isFinite","normalizeAOSDelays","startEvent","initClassName","animatedClassName","debounceDelay","throttleDelay","offset","easing","mirror","anchorPlacement","defer","applyTheme","theme","notifyToast","checked","parent","parentElement","createSparkle","initTheme","preventDefault","initAnchorScrolling","smoothAllowed","scrollRefreshDelay","a","targetId","navH","offsetHeight","progH","padTop","parseFloat","paddingTop","y","offsetTop","isSkipLink","contains","scrollTo","top","behavior","location","hash","history","replaceState","syncHash","target","hadTabindex","hasAttribute","focus","preventScroll","removeAttribute","focusTargetForSkipLink","initClickEffects","event","card","closest","interactionSource","interactive","userAction","MouseEvent","bubbles","rafTasks","Set","rafPending","initScrollUI","bar","role","inner","prepend","btn","update","total","scrollHeight","innerHeight","scrolled","scrollY","progress","min","setProperty","progressTone","round","type","innerHTML","onScrollResize","scheduleRaf","requestAnimationFrame","tasks","from","clear","passive","exploreHint","hintAuthor","hero","obs","IntersectionObserver","entries","vis","isIntersecting","threshold","observe","disconnect","hideSkillTooltip","chip","tooltip","applySkillFilter","section","chips","filters","activeFilter","expanded","button","isActive","group","skillGroup","priority","skillPriority","hiddenByFilter","hiddenByCollapse","isHidden","syncSkillsVisibility","initSkillsUI","list","toggleButton","pointerFine","index","skillOwner","tabIndex","skillKey","hideTimeout","revealTooltip","tooltipText","showSkillTooltip","concealTooltip","blur","nextExpanded","expandLabel","labelExpand","collapseLabel","labelCollapse","toggleSkillsExpansion","initFAQ","items","toggleFAQ","item","open","scrollIntoView","summary","block","rect","getBoundingClientRect","scrollBy","idx","answer","qId","questionId","faqAuthor","tagName","other","it","showWelcomeToast","msg","hour","getHours","customClass","iconClass","iconColor","copyToClipboard","text","okId","errId","okMsg","clipboard","writeText","initLazyImages","lazyImages","loadImg","img","decoding","loading","imageLoader","srcset","observer","unobserve","rootMargin","initShareButton","shareBtn","onScroll","isVisible","pageUrl","title","initTimelineMicroInteractions","children","markVisible","targetTimer","focusHashTarget","abs","ticking","updateParallax","viewH","centerDelta","ratio","toFixed","requestParallaxUpdate","removeProperty","initExplorationMilestones","sections","visited","announced","milestones","count","ceil","icon","isFinal","arr","findIndex","x","sort","b","lastToastAt","cooldown","size","has","bio","Event","createConfetti","sec","canvas","innerWidth","celebrationEvent","getContext","colors","pieces","random","color","angle","speed","drift","performance","rafId","cleanup","cancelAnimationFrame","parentNode","loop","elapsed","clearRect","p","save","translate","rotate","fillStyle","fillRect","restore","MutationObserver","childList","subtree","initFunFacts","idleTimeout","toastRef","reset","fact","closeButton","show","ev","element","sparkle","sparkleSource","sparkleColor","animation","animate","transform","fill","initCTAs","ctaOwner","initEndOfPageToast","handler","initMobileMenu","hamburger","navLinks","links","booted","boot","hydrateRuntimeErrorState","reason","readyState","abort"],"sources":["main-script-en.js"],"mappings":"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","ignoreList":[],"sourcesContent":["/*\r\n  Mohammad Rasoul Sohrabi — Site UX Utilities (v2)\r\n  ORCID: 0009-0004-7177-2080\r\n*/\r\n\r\n(function () {\r\n  \"use strict\";\r\n\r\n  // ==========================\r\n  // Utilities & Environment\r\n  // ==========================\r\n\r\n  const noop = () => {};\r\n\r\n  const on = (el, evt, fn, opts) => {\r\n    if (!el || !el.addEventListener || typeof fn !== \"function\") {return null;}\r\n\r\n    const wrapped = function () {\r\n      try {\r\n        const result = fn.apply(this, arguments);\r\n        if (result && typeof result.then === \"function\") {\r\n          return result.catch((err) => {\r\n            reportRuntimeError(`event:${evt}`, err);\r\n            return undefined;\r\n          });\r\n        }\r\n        return result;\r\n      } catch (err) {\r\n        reportRuntimeError(`event:${evt}`, err);\r\n        return undefined;\r\n      }\r\n    };\r\n\r\n    el.addEventListener(evt, wrapped, { capture: false, ...(opts || {}) });\r\n    return wrapped;\r\n  };\r\n\r\n  const off = (el, evt, fn, opts) =>\r\n    el &&\r\n    el.removeEventListener &&\r\n    el.removeEventListener(evt, fn, { capture: false, ...(opts || {}) });\r\n\r\n  const RUNTIME_ERRORS_KEY = \"runtimeErrors\";\r\n  const RUNTIME_ERRORS_MAX = 30;\r\n\r\n  function serializeRuntimeError(err) {\r\n    if (!err) {\r\n      return { name: \"UnknownError\", message: \"Unknown runtime error\", stack: \"\" };\r\n    }\r\n    if (err instanceof Error) {\r\n      return {\r\n        name: err.name || \"Error\",\r\n        message: err.message || \"Error\",\r\n        stack: err.stack || \"\",\r\n      };\r\n    }\r\n    if (typeof err === \"string\") {\r\n      return { name: \"Error\", message: err, stack: \"\" };\r\n    }\r\n    return {\r\n      name: \"ErrorObject\",\r\n      message: (() => {\r\n        try {\r\n          return JSON.stringify(err);\r\n        } catch {\r\n          return String(err);\r\n        }\r\n      })(),\r\n      stack: \"\",\r\n    };\r\n  }\r\n\r\n  function pushRuntimeError(scope, err) {\r\n    const payload = serializeRuntimeError(err);\r\n    const entry = {\r\n      scope,\r\n      name: payload.name,\r\n      message: payload.message,\r\n      stack: payload.stack,\r\n      ts: new Date().toISOString(),\r\n    };\r\n\r\n    try {\r\n      const raw = sessionStorage.getItem(RUNTIME_ERRORS_KEY);\r\n      const prev = raw ? JSON.parse(raw) : [];\r\n      const next = (Array.isArray(prev) ? prev : []).concat(entry).slice(\r\n        -RUNTIME_ERRORS_MAX\r\n      );\r\n      sessionStorage.setItem(RUNTIME_ERRORS_KEY, JSON.stringify(next));\r\n      document.documentElement.dataset.runtimeErrorCount = String(next.length);\r\n    } catch {}\r\n\r\n    try {\r\n      window.dispatchEvent(new CustomEvent(\"app-runtime-error\", { detail: entry }));\r\n    } catch {}\r\n  }\r\n\r\n  function reportRuntimeError(scope, err) {\r\n    try {\r\n      document.documentElement.classList.add(\"runtime-degraded\");\r\n    } catch {}\r\n    pushRuntimeError(scope, err);\r\n    console.error(`[runtime:${scope}]`, err);\r\n  }\r\n\r\n  function hydrateRuntimeErrorState() {\r\n    try {\r\n      const raw = sessionStorage.getItem(RUNTIME_ERRORS_KEY);\r\n      const list = raw ? JSON.parse(raw) : [];\r\n      const count = Array.isArray(list) ? list.length : 0;\r\n      if (count > 0) {\r\n        document.documentElement.dataset.runtimeErrorCount = String(count);\r\n      }\r\n    } catch {}\r\n  }\r\n\r\n  function safeRun(scope, fn) {\r\n    try {\r\n      return fn();\r\n    } catch (err) {\r\n      reportRuntimeError(scope, err);\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  function throttle(fn, limit) {\r\n    let inThrottle, lastFunc, lastRan;\r\n    return function () {\r\n      const ctx = this;\r\n      const args = arguments;\r\n      if (!inThrottle) {\r\n        fn.apply(ctx, args);\r\n        lastRan = Date.now();\r\n        inThrottle = true;\r\n      } else {\r\n        clearTimeout(lastFunc);\r\n        lastFunc = setTimeout(function () {\r\n          if (Date.now() - lastRan >= limit) {\r\n            fn.apply(ctx, args);\r\n            lastRan = Date.now();\r\n          }\r\n        }, Math.max(0, limit - (Date.now() - lastRan)));\r\n      }\r\n    };\r\n  }\r\n\r\n  function debounce(fn, delay) {\r\n    let t;\r\n    return function () {\r\n      clearTimeout(t);\r\n      t = setTimeout(() => fn.apply(this, arguments), delay);\r\n    };\r\n  }\r\n\r\n  // requestIdleCallback polyfill (lightweight)\r\n  const ric =\r\n    window.requestIdleCallback ||\r\n    function (cb) {\r\n      return setTimeout(\r\n        () => cb({ timeRemaining: () => 0, didTimeout: true }),\r\n        1\r\n      );\r\n    };\r\n  const cic = window.cancelIdleCallback || clearTimeout;\r\n\r\n  // Safe localStorage access\r\n  const storage = {\r\n    get(key, fallback = null) {\r\n      try {\r\n        const v = localStorage.getItem(key);\r\n        return v === null ? fallback : JSON.parse(v);\r\n      } catch {\r\n        return fallback;\r\n      }\r\n    },\r\n    set(key, value) {\r\n      const maxRetries = 5;\r\n      let retryCount = 0;\r\n\r\n      const attemptSet = () => {\r\n        try {\r\n          localStorage.setItem(key, JSON.stringify(value));\r\n          return true;\r\n        } catch (e) {\r\n          if (e.name === \"QuotaExceededError\" && retryCount < maxRetries) {\r\n            retryCount++;\r\n\r\n            // Get sortable keys (excluding protected ones)\r\n            const oldKeys = Object.keys(localStorage).filter(\r\n              (k) => ![\"theme\", \"hasVisited\"].includes(k)\r\n            );\r\n\r\n            if (oldKeys.length > 0) {\r\n              try {\r\n                // Remove oldest key first\r\n                localStorage.removeItem(oldKeys[0]);\r\n                return attemptSet(); // Recursive retry\r\n              } catch (innerE) {\r\n                console.error(\r\n                  `Failed to recover from quota exceeded for ${key}:`,\r\n                  innerE\r\n                );\r\n                return false;\r\n              }\r\n            }\r\n          } else if (e.name === \"QuotaExceededError\") {\r\n            console.warn(\r\n              `localStorage quota exceeded. Could not store ${key} after ${maxRetries} retries`\r\n            );\r\n          } else {\r\n            console.error(`Failed to store ${key}:`, e);\r\n          }\r\n          return false;\r\n        }\r\n      };\r\n\r\n      return attemptSet();\r\n    },\r\n    setRaw(key, value) {\r\n      try {\r\n        localStorage.setItem(key, value);\r\n      } catch (e) {\r\n        if (e.name === \"QuotaExceededError\") {\r\n          console.warn(`localStorage quota exceeded. Could not store ${key}`);\r\n        } else {\r\n          console.error(`Failed to store ${key}:`, e);\r\n        }\r\n      }\r\n    },\r\n    getRaw(key, fallback = null) {\r\n      try {\r\n        const v = localStorage.getItem(key);\r\n        return v === null ? fallback : v;\r\n      } catch {\r\n        return fallback;\r\n      }\r\n    },\r\n    remove(key) {\r\n      try {\r\n        localStorage.removeItem(key);\r\n      } catch {}\r\n    },\r\n  };\r\n\r\n  // Live environment that reacts to user’s system changes\r\n  const ENV = (() => {\r\n    const mq = (q) =>\r\n      window.matchMedia\r\n        ? window.matchMedia(q)\r\n        : {\r\n          matches: false,\r\n          addEventListener: noop,\r\n          removeEventListener: noop,\r\n          addListener: noop,\r\n          removeListener: noop,\r\n        };\r\n\r\n    const mqs = {\r\n      reduced: mq(\"(prefers-reduced-motion: reduce)\"),\r\n      dark: mq(\"(prefers-color-scheme: dark)\"),\r\n      coarse: mq(\"(pointer: coarse)\"),\r\n    };\r\n\r\n    const conn =\r\n      navigator.connection ||\r\n      navigator.mozConnection ||\r\n      navigator.webkitConnection;\r\n\r\n    const state = {\r\n      get reduced() {\r\n        return !!mqs.reduced.matches;\r\n      },\r\n      get dark() {\r\n        return !!mqs.dark.matches;\r\n      },\r\n      get coarse() {\r\n        return !!mqs.coarse.matches;\r\n      },\r\n      get saveData() {\r\n        return !!(conn && conn.saveData);\r\n      },\r\n      get lowThroughput() {\r\n        return !!(conn && /2g|slow-2g/.test(String(conn.effectiveType || \"\")));\r\n      },\r\n      get lowPowerCPU() {\r\n        return navigator.hardwareConcurrency\r\n          ? navigator.hardwareConcurrency <= 4\r\n          : false;\r\n      },\r\n    };\r\n\r\n    const listeners = [];\r\n    const notify = () => {\r\n      listeners.forEach((l) => {\r\n        try {\r\n          l();\r\n        } catch (err) {\r\n          reportRuntimeError(\"env.change\", err);\r\n        }\r\n      });\r\n    };\r\n\r\n    const bindMQL = (m) => {\r\n      if (!m) {return;}\r\n      if (typeof m.addEventListener === \"function\") {\r\n        on(m, \"change\", notify);\r\n      } else if (typeof m.addListener === \"function\") {\r\n        m.addListener(notify);\r\n      }\r\n    };\r\n\r\n    bindMQL(mqs.reduced);\r\n    bindMQL(mqs.dark);\r\n    bindMQL(mqs.coarse);\r\n\r\n    if (conn) {\r\n      if (conn.addEventListener) {\r\n        on(conn, \"change\", notify);\r\n      } else if (typeof conn.addListener === \"function\") {\r\n        conn.addListener(notify);\r\n      }\r\n    }\r\n\r\n    return {\r\n      state,\r\n      onChange: (fn) => {\r\n        if (typeof fn === \"function\") {listeners.push(fn);}\r\n      },\r\n    };\r\n  })();\r\n\r\n  const FLAGS = () => {\r\n    const s = ENV.state;\r\n    const low = s.saveData || s.lowThroughput;\r\n    return {\r\n      ENABLE_AOS: !s.coarse && !s.reduced && !low,\r\n      ENABLE_SOUNDS: !s.coarse && !s.reduced && !low,\r\n      ENABLE_HAPTICS: !s.reduced && s.coarse && !low,\r\n      ENABLE_CONFETTI: !s.reduced && !low && !s.coarse,\r\n      ENABLE_IDENTITY_PINGS: false,\r\n    };\r\n  };\r\n\r\n  function loadStylesheetWithTimeout(href, timeoutMs = 3000) {\r\n    return new Promise((resolve, reject) => {\r\n      const link = document.createElement(\"link\");\r\n      link.rel = \"stylesheet\";\r\n      link.href = href;\r\n      link.crossOrigin = \"anonymous\";\r\n\r\n      let done = false;\r\n      const timer = setTimeout(() => {\r\n        if (done) {return;}\r\n        done = true;\r\n        try {\r\n          link.remove();\r\n        } catch {}\r\n        reject(new Error(`stylesheet timeout: ${href}`));\r\n      }, timeoutMs);\r\n\r\n      link.onload = () => {\r\n        if (done) {return;}\r\n        done = true;\r\n        clearTimeout(timer);\r\n        resolve(true);\r\n      };\r\n\r\n      link.onerror = () => {\r\n        if (done) {return;}\r\n        done = true;\r\n        clearTimeout(timer);\r\n        try {\r\n          link.remove();\r\n        } catch {}\r\n        reject(new Error(`stylesheet load failed: ${href}`));\r\n      };\r\n\r\n      document.head.appendChild(link);\r\n    });\r\n  }\r\n\r\n  function hasFontAwesome() {\r\n    try {\r\n      if (\r\n        document.fonts &&\r\n        typeof document.fonts.check === \"function\" &&\r\n        document.fonts.check('1em \"Font Awesome 6 Free\"')\r\n      ) {\r\n        return true;\r\n      }\r\n    } catch {}\r\n\r\n    try {\r\n      const probe = document.createElement(\"i\");\r\n      probe.className = \"fas fa-circle\";\r\n      probe.style.position = \"absolute\";\r\n      probe.style.width = \"0\";\r\n      probe.style.height = \"0\";\r\n      probe.style.overflow = \"hidden\";\r\n      probe.style.opacity = \"0\";\r\n      document.body.appendChild(probe);\r\n      const family = getComputedStyle(probe).fontFamily || \"\";\r\n      probe.remove();\r\n      return /font awesome/i.test(family);\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async function waitForFontAwesome(maxWaitMs = 1500) {\r\n    const start = Date.now();\r\n    while (Date.now() - start < maxWaitMs) {\r\n      if (hasFontAwesome()) {return true;}\r\n      await new Promise((resolve) => setTimeout(resolve, 120));\r\n    }\r\n    return hasFontAwesome();\r\n  }\r\n\r\n  function scheduleFontAwesomeRecoveryCheck(delayMs = 6500) {\r\n    setTimeout(async () => {\r\n      if (await waitForFontAwesome(1200)) {\r\n        document.documentElement.classList.remove(\"icons-degraded\");\r\n      }\r\n    }, delayMs);\r\n  }\r\n\r\n  function initCriticalStyleFallbacks() {\r\n    const run = async () => {\r\n      const ready = await waitForFontAwesome(1500);\r\n      if (ready) {\r\n        document.documentElement.classList.remove(\"icons-degraded\");\r\n        return;\r\n      }\r\n\r\n      const fallbacks = [\r\n        \"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css\",\r\n        \"https://use.fontawesome.com/releases/v6.0.0/css/all.css\",\r\n      ];\r\n\r\n      for (const href of fallbacks) {\r\n        try {\r\n          await loadStylesheetWithTimeout(href, 2800);\r\n          if (await waitForFontAwesome(1200)) {\r\n            document.documentElement.classList.remove(\"icons-degraded\");\r\n            return;\r\n          }\r\n        } catch (err) {\r\n          console.warn(\"[fontawesome.fallback]\", err);\r\n        }\r\n      }\r\n\r\n      document.documentElement.classList.add(\"icons-degraded\");\r\n      scheduleFontAwesomeRecoveryCheck();\r\n    };\r\n\r\n    run().catch((err) => reportRuntimeError(\"fontawesome.bootstrap\", err));\r\n  }\r\n\r\n  // i18n (FA)\r\n  const STRINGS_EN = {\r\n    toasts: {\r\n      themeDark: \"Theme changed to dark mode.\",\r\n      themeLight: \"Theme changed to light mode.\",\r\n      reachedEnd: \"You've reached the end of the page. Thank you for visiting! ??\",\r\n      welcomeMorning: \"Good morning! Welcome to Rasoul Unlimited official website.\",\r\n      welcomeNoon: \"Good afternoon! Welcome to Rasoul Unlimited official website.\",\r\n      welcomeEvening: \"Good evening! Welcome to Rasoul Unlimited official website.\",\r\n      welcomeNight: \"Good night! Welcome to Rasoul Unlimited official website.\",\r\n      welcomeBack: \"Welcome back! Glad to see you again.\",\r\n      emailCopied: \"Email copied. ?\",\r\n      emailCopyError: \"Failed to copy email.\",\r\n      shareOk: \"Page link shared successfully! ?\",\r\n      shareErr: \"Sharing failed.\",\r\n      linkCopied: (name) => `${name} link copied! ?`,\r\n      clipboardUnsupported: \"Your browser does not support clipboard copy.\",\r\n    },\r\n    funFactsPrefix: \"Did you know:\",\r\n    aria: {\r\n      closeToast: \"Close message\",\r\n      scrollTop: \"Back to top\",\r\n      share: \"Share page\",\r\n      themeToggle: \"Toggle website theme\",\r\n    },\r\n  };\r\n\r\n  const FUN_FACTS_EN = [\r\n    \"Honey never spoils.\",\r\n    \"Octopuses have three hearts.\",\r\n    \"The human body is about 60% water.\",\r\n    \"Banana is botanically a berry.\",\r\n    \"Dolphins sleep with one half of their brain at a time.\",\r\n  ];\r\n\r\n  const SKILL_TOOLTIPS_EN = {\r\n    python: \"Strong for automation, backend services, and production scripting.\",\r\n    c: \"Solid low-level logic and memory-oriented problem solving foundation.\",\r\n    javascript: \"Daily language for interactive web products and tooling.\",\r\n    fullstack:\r\n      \"Builds full product flow from UI layer to APIs and deployment.\",\r\n    \"software-engineering\":\r\n      \"Applies architecture, maintainability, and testing-first thinking.\",\r\n    \"biomedical-engineering\":\r\n      \"Connects engineering decisions to real healthcare constraints.\",\r\n    \"digital-health\":\r\n      \"Designs practical digital pathways for patient and clinical workflows.\",\r\n    \"content-strategy\":\r\n      \"Turns technical depth into clear, outcome-oriented communication.\",\r\n    \"social-media\": \"Builds consistent channels for product and brand narrative.\",\r\n    karate: \"Discipline and consistency under pressure, trained through karate.\",\r\n    diligence: \"Delivers with persistence, pace, and execution focus.\",\r\n    teamwork:\r\n      \"Collaborated in a 10-person product team on a verified Discord bot.\",\r\n    foresight: \"Uses structured analysis for long-term technical decisions.\",\r\n    \"english-language\":\r\n      \"Fluent working proficiency for technical documentation and collaboration.\",\r\n    \"persian-language\":\r\n      \"Native language communication with strong clarity and precision.\",\r\n    \"react-native\":\r\n      \"Builds cross-platform app experiences with shared component logic.\",\r\n    sql: \"Comfortable with relational modeling, querying, and optimization basics.\",\r\n    nodejs: \"Builds API services and integration layers in JavaScript runtime.\",\r\n    \"machine-learning\":\r\n      \"Uses practical ML methods for data-driven feature exploration.\",\r\n    \"mobile-development\":\r\n      \"Understands delivery constraints and UX tradeoffs on mobile platforms.\",\r\n    \"ui-ux\":\r\n      \"Translates user journeys into coherent, implementation-ready interfaces.\",\r\n    \"open-source\":\r\n      \"Publishes academic and open-source outputs with DOI-backed traceability.\",\r\n    seo: \"Optimizes structure and content for discoverability in search engines.\",\r\n    aeo: \"Adapts content for answer engines and AI-first retrieval contexts.\",\r\n    \"data-analysis\":\r\n      \"Extracts patterns from datasets for product and research decisions.\",\r\n    cybersecurity:\r\n      \"Applies baseline security principles in software design and operations.\",\r\n    \"project-management\":\r\n      \"Plans scope, sequencing, and delivery rhythm for multi-step projects.\",\r\n    ai: \"Builds and evaluates AI capabilities with product-level pragmatism.\",\r\n    nlp: \"Explores language modeling and text-processing use cases.\",\r\n    \"github-actions\":\r\n      \"Implements CI/CD workflows for faster, safer releases.\",\r\n  };\r\n\r\n  // Abort controller for idle/async work cleanup\r\n  const teardown = new AbortController();\r\n  const { signal: abortSignal } = teardown;\r\n\r\n  // ==========================\r\n  // Haptics / Vibrate\r\n  // ==========================\r\n  function vibrate(pattern = [50]) {\r\n    if (!FLAGS().ENABLE_HAPTICS || ENV.state.reduced) {return;}\r\n    if (navigator.vibrate) {navigator.vibrate(pattern);}\r\n  }\r\n\r\n  // ==========================\r\n  // Audio (click/toast) — lazy, mobile-safe\r\n  // ==========================\r\n  let audioContext, clickBuffer, toastBuffer;\r\n\r\n  function ensureAudioContext() {\r\n    if (!FLAGS().ENABLE_SOUNDS || audioContext) {return;}\r\n    const Ctx = window.AudioContext || window.webkitAudioContext;\r\n    if (Ctx) {audioContext = new Ctx();}\r\n  }\r\n\r\n  function createToneBuffer(duration, wave) {\r\n    if (!audioContext) {return null;}\r\n    const sr = audioContext.sampleRate;\r\n    const buffer = audioContext.createBuffer(\r\n      1,\r\n      Math.max(1, Math.floor(sr * duration)),\r\n      sr\r\n    );\r\n    const data = buffer.getChannelData(0);\r\n    for (let i = 0; i < data.length; i++) {data[i] = wave(i, sr);}\r\n    return buffer;\r\n  }\r\n\r\n  function loadSounds() {\r\n    if (!audioContext) {return;}\r\n    clickBuffer = createToneBuffer(\r\n      0.05,\r\n      (i, sr) => Math.sin(2 * Math.PI * 440 * (i / sr)) * 0.08\r\n    );\r\n    toastBuffer = createToneBuffer(0.1, (i, sr) => {\r\n      const t = i / sr;\r\n      const d = 0.1;\r\n      const f = 880 + (1200 - 880) * (t / d);\r\n      return (\r\n        Math.sin(2 * Math.PI * f * t) *\r\n        0.12 *\r\n        Math.max(0, 1 - t / d)\r\n      );\r\n    });\r\n  }\r\n\r\n  // 🔊 BUG FIX: playSound implementation\r\n  function playSound(kind) {\r\n    if (!FLAGS().ENABLE_SOUNDS || !audioContext) {return;}\r\n\r\n    const buffer =\r\n      kind === \"toast\" ? toastBuffer : kind === \"click\" ? clickBuffer : null;\r\n    if (!buffer) {return;}\r\n\r\n    try {\r\n      const src = audioContext.createBufferSource();\r\n      src.buffer = buffer;\r\n      src.connect(audioContext.destination);\r\n      src.start(0);\r\n    } catch (err) {\r\n      console.warn(\"Audio playback failed:\", err);\r\n    }\r\n  }\r\n\r\n  on(\r\n    document,\r\n    \"pointerdown\",\r\n    () => {\r\n      ensureAudioContext();\r\n      audioContext?.resume?.();\r\n      loadSounds();\r\n    },\r\n    { once: true }\r\n  );\r\n\r\n  on(document, \"visibilitychange\", () => {\n    if (document.hidden) {audioContext?.suspend?.();}\n    else {audioContext?.resume?.();}\n  });\n\n  // ==========================\n  // Toasts (delegated to unified global engine)\n  // ==========================\n  window.__ruToastFeedback = () => {\n    if (FLAGS().ENABLE_SOUNDS && audioContext) {\n      playSound(\"toast\");\n    }\n  };\n\n  function showToast(message, optionsOrType = {}) {\n    if (!message || typeof window.createToast !== \"function\") {return null;}\n    try {\n      return window.createToast(message, optionsOrType);\n    } catch {\n      return null;\n    }\n  }\n\r\n  // ==========================\r\n  // Dates & Identity\r\n  // ==========================\r\n  function setDynamicDates() {\r\n    const yearEl =\r\n      document.getElementById(\"current-year\") ||\r\n      document.getElementById(\"footer-year\");\r\n    if (yearEl) {yearEl.textContent = String(new Date().getFullYear());}\r\n\r\n    const lastUpdated = document.getElementById(\"last-updated-date\");\r\n    if (lastUpdated) {\r\n      const opts = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n      lastUpdated.textContent = new Date().toLocaleDateString(\r\n        \"fa-IR\",\r\n        opts\r\n      );\r\n      lastUpdated.setAttribute(\r\n        \"data-last-updated-by\",\r\n        \"Mohammad Rasoul Sohrabi\"\r\n      );\r\n    }\r\n  }\r\n\r\n  function setIdentityHooks() {\r\n    document.body.id = \"sohrabi-verified-identity\";\r\n    document.body.classList.add(\r\n      \"sohrabi-orcid\",\r\n      \"github-verified\",\r\n      \"academic-entity\"\r\n    );\r\n\r\n    const hiddenInfo = document.createElement(\"div\");\r\n    hiddenInfo.classList.add(\"visually-hidden\");\r\n    hiddenInfo.dataset.authorFullName = \"Mohammad Rasoul Sohrabi\";\r\n    hiddenInfo.dataset.orcidId = \"0009-0004-7177-2080\";\r\n    hiddenInfo.setAttribute(\"aria-hidden\", \"true\");\r\n    hiddenInfo.textContent =\r\n      \"Mohammad Rasoul Sohrabi is a verified contributor on ORCID, Zenodo, GitHub, and Wikipedia. Known for Persian Bot and biomedical engineering content.\";\r\n    document.body.appendChild(hiddenInfo);\r\n\r\n    function upsertMeta(name, content) {\r\n      let meta = document.head.querySelector(`meta[name=\"${name}\"]`);\r\n      if (!meta) {\r\n        meta = document.createElement(\"meta\");\r\n        meta.name = name;\r\n        document.head.appendChild(meta);\r\n      }\r\n      meta.content = content;\r\n    }\r\n\r\n    upsertMeta(\r\n      \"generator\",\r\n      \"Mohammad Rasoul Sohrabi - Biomedical Engineering, ORCID Verified\"\r\n    );\r\n    upsertMeta(\"author\", \"Mohammad Rasoul Sohrabi\");\r\n  }\r\n\r\n  function queueIdentityPings() {\r\n    if (\r\n      !FLAGS().ENABLE_IDENTITY_PINGS ||\r\n      ENV.state.coarse ||\r\n      ENV.state.saveData ||\r\n      typeof fetch !== \"function\"\r\n    )\r\n    {return;}\r\n\r\n    const targets = [\r\n      { name: \"GitHub\", url: \"https://github.com/RasoulUnlimited\" },\r\n      {\r\n        name: \"LinkedIn\",\r\n        url: \"https://www.linkedin.com/in/rasoulunlimited/\",\r\n      },\r\n      {\r\n        name: \"ResearchGate\",\r\n        url: \"https://www.researchgate.net/profile/Mohammad-Rasoul-Sohrabi\",\r\n      },\r\n      { name: \"About.me\", url: \"https://about.me/rasoulunlimited\" },\r\n      { name: \"ORCID\", url: \"https://orcid.org/0009-0004-7177-2080\" },\r\n    ];\r\n\r\n    const ping = (t) =>\r\n      fetch(t.url, { mode: \"no-cors\" }).catch(() => {});\r\n\r\n    ric(() =>\r\n      targets.forEach((t, i) =>\r\n        setTimeout(() => {\r\n          if (abortSignal.aborted) {return;}\r\n          ping(t);\r\n        }, i * 1000)\r\n      )\r\n    );\r\n  }\r\n\r\n  // ==========================\r\n  // AOS (Animations) — gated\r\n  // ==========================\r\n  let aosLoaded = false;\n  let aosScriptRequested = false;\n  const AOS_DELAY_CLAMP_MAX = 200;\n  const AOS_REFRESH_DEBOUNCE_MS = 90;\n  const AOS_REFRESH_DELAY_SMOOTH_SCROLL_MS = 300;\n  const AOS_REFRESH_DELAY_INSTANT_SCROLL_MS = 40;\n  const AOS_REFRESH_DELAY_HASH_BOOT_MS = 220;\n\r\n  function setAOSDisabledCSS(disabled) {\n    document.documentElement.classList.toggle(\"aos-disabled\", disabled);\n  }\n\n  function normalizeAOSDelays(maxDelay = AOS_DELAY_CLAMP_MAX) {\n    document.querySelectorAll(\"[data-aos-delay]\").forEach((node) => {\n      if (!(node instanceof HTMLElement)) {return;}\n      const rawDelay = node.getAttribute(\"data-aos-delay\");\n      const parsedDelay = Number.parseInt(rawDelay || \"\", 10);\n      if (!Number.isFinite(parsedDelay) || parsedDelay <= maxDelay) {return;}\n      node.setAttribute(\"data-aos-delay\", String(maxDelay));\n    });\n  }\n\n  const scheduleAOSRefresh = (() => {\n    const debouncedRefresh = debounce((scope = \"aos.refreshHard\") => {\n      if (!FLAGS().ENABLE_AOS || typeof window.AOS?.refreshHard !== \"function\") {\n        return;\n      }\n      try {\n        window.AOS.refreshHard();\n      } catch (err) {\n        reportRuntimeError(scope, err);\n      }\n    }, AOS_REFRESH_DEBOUNCE_MS);\n\n    return (scope = \"aos.refreshHard\", delay = 0) => {\n      if (delay > 0) {\n        setTimeout(() => debouncedRefresh(scope), delay);\n        return;\n      }\n      debouncedRefresh(scope);\n    };\n  })();\n\n  function initAOS() {\n    // Keep content visible by default; only disable this fallback after\r\n    // a successful AOS initialization.\r\n    setAOSDisabledCSS(true);\r\n\r\n    if (!FLAGS().ENABLE_AOS) {return;}\r\n\r\n    if (window.AOS?.init) {\n      try {\n        normalizeAOSDelays();\n        window.AOS.init({\n          startEvent: \"DOMContentLoaded\",\n          initClassName: \"aos-init\",\n          animatedClassName: \"aos-animate\",\n          debounceDelay: 50,\n          throttleDelay: 99,\n          offset: 0,\n          duration: 500,\n          easing: \"ease-out\",\n          once: false,\n          mirror: false,\n          anchorPlacement: \"top-bottom\",\n        });\n        aosLoaded = true;\n        setAOSDisabledCSS(false);\n        scheduleAOSRefresh(\"aos.init\", AOS_REFRESH_DELAY_INSTANT_SCROLL_MS);\n      } catch {\n        setAOSDisabledCSS(true);\n      }\n      return;\r\n    }\r\n\r\n    if (aosLoaded || aosScriptRequested) {return;}\r\n    aosScriptRequested = true;\r\n\r\n    const s = document.createElement(\"script\");\r\n    s.src = \"/assets/vendor/aos/aos.min.js\";\r\n    s.defer = true;\r\n    s.onload = () => {\r\n      aosLoaded = true;\r\n      initAOS();\r\n    };\r\n    s.onerror = () => {\r\n      aosScriptRequested = false;\r\n      setAOSDisabledCSS(true);\r\n    };\r\n    document.head.appendChild(s);\r\n  }\r\n\r\n  // ==========================\r\n  // Theme Handling\r\n  // ==========================\r\n  function applyTheme(theme, notifyToast = false) {\n    document.body.classList.toggle(\"dark-mode\", theme === \"dark\");\r\n    document.body.classList.toggle(\"light-mode\", theme === \"light\");\r\n\r\n    const toggle = document.getElementById(\"theme-toggle\");\r\n    if (toggle) {toggle.checked = theme === \"dark\";}\r\n\r\n    if (notifyToast) {\n      const parent = toggle?.parentElement;\r\n      if (parent) {createSparkle(parent);}\r\n      vibrate([30]);\r\n    }\r\n  }\r\n\r\n  function initTheme() {\r\n    const toggle = document.getElementById(\"theme-toggle\");\r\n    if (toggle)\r\n    {toggle.setAttribute(\"aria-label\", STRINGS_EN.aria.themeToggle);}\r\n\r\n    const saved = storage.getRaw(\"theme\");\r\n    applyTheme(saved || (ENV.state.dark ? \"dark\" : \"light\"));\r\n\r\n    if (!toggle) {return;}\r\n\r\n    on(toggle, \"change\", () => {\r\n      const next = toggle.checked ? \"dark\" : \"light\";\r\n      applyTheme(next, true);\r\n      storage.setRaw(\"theme\", next);\r\n    });\r\n\r\n    on(toggle, \"keydown\", (e) => {\r\n      if (e.key === \"Enter\" || e.key === \" \") {\r\n        e.preventDefault();\r\n        toggle.checked = !toggle.checked;\r\n        const next = toggle.checked ? \"dark\" : \"light\";\r\n        applyTheme(next, true);\r\n        storage.setRaw(\"theme\", next);\r\n      }\r\n    });\r\n\r\n    // auto-switch if system theme changes and user hasn't chosen explicitly\r\n    ENV.onChange(() => {\r\n      if (!storage.getRaw(\"theme\")) {\r\n        applyTheme(ENV.state.dark ? \"dark\" : \"light\");\r\n      }\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // Smooth Anchor Scrolling (respects reduced motion)\r\n  // ==========================\r\n  function initAnchorScrolling() {\n    const smoothAllowed = !ENV.state.reduced;\n    const scrollRefreshDelay = smoothAllowed\n      ? AOS_REFRESH_DELAY_SMOOTH_SCROLL_MS\n      : AOS_REFRESH_DELAY_INSTANT_SCROLL_MS;\n\r\n    function focusTargetForSkipLink(target) {\r\n      if (!(target instanceof HTMLElement)) {return;}\r\n      const hadTabindex = target.hasAttribute(\"tabindex\");\r\n\r\n      if (!hadTabindex) {\r\n        target.setAttribute(\"tabindex\", \"-1\");\r\n      }\r\n\r\n      target.focus({ preventScroll: true });\r\n\r\n      if (!hadTabindex) {\r\n        on(target, \"blur\", () => {\r\n          target.removeAttribute(\"tabindex\");\r\n        }, { once: true });\r\n      }\r\n    }\r\n\r\n    function syncHash(targetId) {\r\n      if (!targetId || window.location.hash === targetId) {return;}\r\n      if (history.replaceState) {\r\n        history.replaceState(null, \"\", targetId);\r\n      } else {\r\n        window.location.hash = targetId;\r\n      }\r\n    }\r\n\r\n    document.querySelectorAll('a[href^=\"#\"]').forEach((a) => {\r\n      on(a, \"click\", (e) => {\r\n        const targetId = a.getAttribute(\"href\");\r\n        if (!targetId || targetId === \"#\") {return;}\r\n\r\n        let el;\r\n        try {\r\n          el = document.querySelector(targetId);\r\n        } catch {\r\n          // invalid selector (e.g. malformed id)\r\n          return;\r\n        }\r\n\r\n        if (!el) {return;}\r\n\r\n        e.preventDefault();\r\n\r\n        const navH =\r\n          document.querySelector(\".navbar\")?.offsetHeight || 0;\r\n        const progH =\r\n          document.getElementById(\"scroll-progress-bar\")?.offsetHeight ||\r\n          0;\r\n        const padTop = parseFloat(getComputedStyle(el).paddingTop) || 0;\r\n        const y = Math.max(0, el.offsetTop + padTop - navH - progH);\r\n        const isSkipLink = a.classList.contains(\"skip-link\");\r\n\r\n        if (smoothAllowed)\n        {window.scrollTo({ top: y, behavior: \"smooth\" });}\n        else {window.scrollTo(0, y);}\n        scheduleAOSRefresh(\"aos.anchor-scroll\", scrollRefreshDelay);\n\n        syncHash(targetId);\n\r\n        if (isSkipLink) {\r\n          const focusDelay = smoothAllowed ? 280 : 0;\r\n          setTimeout(() => {\r\n            focusTargetForSkipLink(el);\r\n          }, focusDelay);\r\n        }\r\n\r\n        vibrate([20]);\n      });\n    });\n\n    if (window.location.hash) {\n      scheduleAOSRefresh(\"aos.hash-on-boot\", AOS_REFRESH_DELAY_HASH_BOOT_MS);\n    }\n\n    on(window, \"hashchange\", () => {\n      scheduleAOSRefresh(\"aos.hashchange\", AOS_REFRESH_DELAY_HASH_BOOT_MS);\n    });\n  }\n\r\n  // ==========================\r\n  // Click Feedback\r\n  // ==========================\r\n  function initClickEffects() {\r\n    on(document, \"click\", (event) => {\r\n      const card = event.target.closest?.(\".card\");\r\n      if (card) {\r\n        card.classList.add(\"clicked-pop\");\r\n        card.dataset.interactionSource =\r\n          \"Mohammad Rasoul Sohrabi user engagement\";\r\n        setTimeout(() => card.classList.remove(\"clicked-pop\"), 300);\r\n        vibrate([30]);\r\n      }\r\n\r\n      const interactive = event.target.closest?.(\r\n        'button, a:not([href^=\"#\"]), input[type=\"submit\"], [role=\"button\"], [tabindex=\"0\"]'\r\n      );\r\n      if (\r\n        interactive &&\r\n        !interactive.classList.contains(\"no-click-feedback\") &&\r\n        !interactive.matches('a[href^=\"#\"]')\r\n      ) {\r\n        interactive.classList.add(\"click-feedback-effect\");\r\n        interactive.dataset.userAction =\r\n          \"verified interaction by Mohammad Rasoul Sohrabi's website functionality\";\r\n        on(\r\n          interactive,\r\n          \"animationend\",\r\n          () => interactive.classList.remove(\"click-feedback-effect\"),\r\n          { once: true }\r\n        );\r\n        if (!interactive.closest(\".faq-item\")) {vibrate([8]);}\r\n        playSound(\"click\");\r\n      }\r\n    });\r\n\r\n    on(document, \"keydown\", (e) => {\r\n      if (e.key !== \"Enter\" && e.key !== \" \") {return;}\r\n      const card = e.target.closest?.(\".card\");\r\n      if (card) {\r\n        e.preventDefault();\r\n        card.dispatchEvent(\r\n          new MouseEvent(\"click\", { bubbles: true })\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // rAF Task Queue\r\n  // ==========================\r\n  const rafTasks = new Set();\r\n  let rafPending = false;\r\n\r\n  function scheduleRaf(fn) {\r\n    rafTasks.add(fn);\r\n    if (!rafPending) {\r\n      rafPending = true;\r\n      requestAnimationFrame(() => {\r\n        rafPending = false;\r\n        const tasks = Array.from(rafTasks);\r\n        rafTasks.clear();\r\n        tasks.forEach((t) => {\r\n          try {\r\n            t();\r\n          } catch {}\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  // ==========================\r\n  // Scroll Progress + Scroll-to-top + Explore Hint\r\n  // ==========================\r\n  function initScrollUI() {\r\n    let bar = document.getElementById(\"scroll-progress-bar\");\r\n    if (!bar) {\r\n      bar = document.createElement(\"div\");\r\n      bar.id = \"scroll-progress-bar\";\r\n      bar.className = \"sohrabi-progress\";\r\n      bar.role = \"progressbar\";\r\n      bar.setAttribute(\"aria-valuemin\", \"0\");\r\n      bar.setAttribute(\"aria-valuemax\", \"100\");\r\n      const inner = document.createElement(\"div\");\r\n      inner.className = \"sohrabi-progress-inner\";\r\n      bar.appendChild(inner);\r\n      document.body.prepend(bar);\r\n    }\r\n    const innerBar = bar.querySelector(\".sohrabi-progress-inner\") || bar;\r\n\r\n    let btn = document.getElementById(\"scroll-to-top\");\r\n    if (!btn) {\r\n      btn = document.createElement(\"button\");\r\n      btn.id = \"scroll-to-top\";\r\n      btn.type = \"button\";\r\n      btn.innerHTML =\r\n        '<i class=\"fas fa-arrow-up\" aria-hidden=\"true\"></i>';\r\n      btn.setAttribute(\"aria-label\", STRINGS_EN.aria.scrollTop);\r\n      btn.classList.add(\r\n        \"sohrabi-nav-button\",\r\n        \"hidden\",\r\n        \"cta-pulse-effect\"\r\n      );\r\n      document.body.appendChild(btn);\r\n    }\r\n\r\n    function update() {\r\n      const total = Math.max(\r\n        1,\r\n        document.documentElement.scrollHeight - window.innerHeight\r\n      );\r\n      const scrolled = window.scrollY;\r\n      const progress = Math.min(1, Math.max(0, scrolled / total));\r\n\r\n      bar.style.setProperty(\"--sohrabi-progress\", progress);\r\n      bar.dataset.progressTone =\r\n        progress > 0.9 ? \"high\" : progress > 0.5 ? \"mid\" : \"low\";\r\n\r\n      bar.setAttribute(\r\n        \"aria-valuenow\",\r\n        String(Math.round(progress * 100))\r\n      );\r\n\r\n      btn.classList.toggle(\"visible\", scrolled > 300);\r\n      btn.classList.toggle(\"hidden\", scrolled <= 300);\r\n    }\r\n\r\n    const onScrollResize = () => scheduleRaf(update);\r\n    on(window, \"scroll\", onScrollResize, { passive: true });\r\n    on(window, \"resize\", onScrollResize);\r\n    update();\r\n\r\n    on(btn, \"click\", () => {\r\n      const smooth =\r\n        !ENV.state.reduced &&\r\n        \"scrollBehavior\" in document.documentElement.style;\r\n      if (smooth) {window.scrollTo({ top: 0, behavior: \"smooth\" });}\r\n      else {window.scrollTo(0, 0);}\r\n      vibrate([16]);\r\n    });\r\n\r\n    const exploreHint =\r\n      document.getElementById(\"explore-hint\") ||\r\n      (() => {\r\n        const a = document.createElement(\"a\");\r\n        a.href = \"#projects\";\r\n        a.id = \"explore-hint\";\r\n        a.innerHTML =\r\n          '<i class=\"fas fa-lightbulb\" aria-hidden=\"true\"></i> <span class=\"hint-text\">Discover My Projects.</span>';\r\n        a.dataset.hintAuthor = \"Mohammad Rasoul Sohrabi\";\r\n        a.classList.add(\"sohrabi-hint-module\", \"hidden\");\r\n        document.body.appendChild(a);\r\n        return a;\r\n      })();\r\n\r\n    const hero = document.getElementById(\"hero\");\r\n    if (hero && \"IntersectionObserver\" in window) {\r\n      const obs = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            const vis = entry.isIntersecting;\r\n            exploreHint.classList.toggle(\"visible\", vis);\r\n            exploreHint.classList.toggle(\"pulse-animation\", vis);\r\n            exploreHint.classList.toggle(\"hidden\", !vis);\r\n          });\r\n        },\r\n        { threshold: 0.5 }\r\n      );\r\n      obs.observe(hero);\r\n      on(\r\n        window,\r\n        \"beforeunload\",\r\n        () => obs.disconnect(),\r\n        { once: true }\r\n      );\r\n    }\r\n\r\n    on(exploreHint, \"click\", (e) => {\r\n      e.preventDefault();\r\n      exploreHint.classList.add(\"hidden\");\r\n      exploreHint.classList.remove(\"visible\", \"pulse-animation\");\r\n\r\n      const target = document.querySelector(\"#projects\");\r\n      if (target) {\r\n        const navH =\r\n          document.querySelector(\".navbar\")?.offsetHeight || 0;\r\n        const progH =\r\n          document.getElementById(\"scroll-progress-bar\")?.offsetHeight ||\r\n          0;\r\n        const padTop =\r\n          parseFloat(getComputedStyle(target).paddingTop) || 0;\r\n        const y = Math.max(\r\n          0,\r\n          target.offsetTop + padTop - navH - progH\r\n        );\r\n        const smooth = !ENV.state.reduced;\r\n        if (smooth) {window.scrollTo({ top: y, behavior: \"smooth\" });}\r\n        else {window.scrollTo(0, y);}\r\n      }\r\n      vibrate([16]);\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // Skills UI (filters, tiering, tooltip, collapse)\r\n  // ==========================\r\n  function showSkillTooltip(chip, tooltipText) {\r\n    if (!(chip instanceof HTMLElement)) {return;}\r\n\r\n    let tooltip = chip.querySelector(\".skill-hover-message\");\r\n    if (!(tooltip instanceof HTMLElement)) {\r\n      tooltip = document.createElement(\"span\");\r\n      tooltip.className = \"skill-hover-message\";\r\n      chip.appendChild(tooltip);\r\n    }\r\n\r\n    const skillKey = chip.dataset.skillKey || `skill-${Date.now()}`;\r\n    if (!tooltip.id) {tooltip.id = `skill-tooltip-${skillKey}`;}\r\n    tooltip.setAttribute(\"role\", \"tooltip\");\r\n    tooltip.textContent = tooltipText;\r\n    tooltip.classList.add(\"show-message\");\r\n\r\n    chip.classList.add(\"skill-hover-effect\");\r\n    chip.setAttribute(\"aria-describedby\", tooltip.id);\r\n  }\r\n\r\n  function hideSkillTooltip(chip) {\r\n    if (!(chip instanceof HTMLElement)) {return;}\r\n    const tooltip = chip.querySelector(\".skill-hover-message\");\r\n    if (tooltip instanceof HTMLElement)\r\n    {tooltip.classList.remove(\"show-message\");}\r\n    chip.classList.remove(\"skill-hover-effect\");\r\n    chip.removeAttribute(\"aria-describedby\");\r\n  }\r\n\r\n  function syncSkillsVisibility(section, chips, activeFilter, expanded) {\r\n    chips.forEach((chip) => {\r\n      const group = chip.dataset.skillGroup || \"\";\r\n      const priority = chip.dataset.skillPriority || \"secondary\";\r\n      const hiddenByFilter =\r\n        activeFilter !== \"all\" && activeFilter !== group;\r\n      const hiddenByCollapse = !expanded && priority === \"secondary\";\r\n      const isHidden = hiddenByFilter || hiddenByCollapse;\r\n\r\n      chip.classList.toggle(\"is-filter-hidden\", hiddenByFilter);\r\n      chip.classList.toggle(\"is-collapsed-hidden\", !hiddenByFilter && hiddenByCollapse);\r\n      chip.setAttribute(\"aria-hidden\", String(isHidden));\r\n\r\n      if (isHidden) {hideSkillTooltip(chip);}\r\n    });\r\n\r\n    section.classList.toggle(\"is-expanded\", expanded);\r\n    section.classList.toggle(\"is-collapsed\", !expanded);\r\n  }\r\n\r\n  function applySkillFilter(section, chips, filters, activeFilter, expanded) {\r\n    filters.forEach((button) => {\r\n      const isActive = (button.dataset.filter || \"all\") === activeFilter;\r\n      button.classList.toggle(\"is-active\", isActive);\r\n      button.setAttribute(\"aria-pressed\", String(isActive));\r\n    });\r\n    syncSkillsVisibility(section, chips, activeFilter, expanded);\r\n  }\r\n\r\n  function toggleSkillsExpansion(\r\n    section,\r\n    chips,\r\n    filters,\r\n    toggleButton,\r\n    activeFilter,\r\n    expanded\r\n  ) {\r\n    const nextExpanded = !expanded;\r\n    toggleButton.setAttribute(\"aria-expanded\", String(nextExpanded));\r\n\r\n    const expandLabel =\r\n      toggleButton.dataset.labelExpand || \"Show more skills\";\r\n    const collapseLabel =\r\n      toggleButton.dataset.labelCollapse || \"Show fewer skills\";\r\n    toggleButton.textContent = nextExpanded ? collapseLabel : expandLabel;\r\n\r\n    applySkillFilter(\r\n      section,\r\n      chips,\r\n      filters,\r\n      activeFilter,\r\n      nextExpanded\r\n    );\r\n\r\n    return nextExpanded;\r\n  }\r\n\r\n  function initSkillsUI() {\r\n    const section = document.getElementById(\"skills\");\r\n    const list = section?.querySelector(\".skills-list\");\r\n    const filters = section\r\n      ? [...section.querySelectorAll(\".skills-filter\")]\r\n      : [];\r\n    const toggleButton = section?.querySelector(\"#skills-expand-toggle\");\r\n\r\n    if (!section || !list || !filters.length || !(toggleButton instanceof HTMLElement))\r\n    {return;}\r\n\r\n    const chips = [...list.querySelectorAll(\".skill-chip\")];\r\n    if (!chips.length) {return;}\r\n\r\n    const pointerFine =\r\n      window.matchMedia &&\r\n      window.matchMedia(\"(hover: hover) and (pointer: fine)\").matches;\r\n\r\n    section.classList.add(\"skills-enhanced\", \"is-collapsed\");\r\n    section.classList.remove(\"is-expanded\");\r\n\r\n    let activeFilter = \"all\";\r\n    let expanded = false;\r\n\r\n    chips.forEach((chip, index) => {\r\n      chip.dataset.skillOwner = \"Mohammad Rasoul Sohrabi\";\r\n      chip.classList.add(\"sohrabi-skill-item\");\r\n      if (chip.tabIndex < 0) {chip.tabIndex = 0;}\r\n\r\n      const key = chip.dataset.skillKey || `chip-${index + 1}`;\r\n      let hideTimeout = null;\r\n\r\n      const tooltipMessage = () =>\r\n        SKILL_TOOLTIPS_EN[key] ||\r\n        \"Additional context is available in project and case-study sections.\";\r\n\r\n      const revealTooltip = () => {\r\n        if (hideTimeout) {\r\n          clearTimeout(hideTimeout);\r\n          hideTimeout = null;\r\n        }\r\n        if (\r\n          chip.classList.contains(\"is-filter-hidden\") ||\r\n          chip.classList.contains(\"is-collapsed-hidden\")\r\n        ) {return;}\r\n        showSkillTooltip(chip, tooltipMessage());\r\n      };\r\n\r\n      const concealTooltip = () => {\r\n        if (hideTimeout) {clearTimeout(hideTimeout);}\r\n        hideTimeout = setTimeout(() => {\r\n          hideSkillTooltip(chip);\r\n        }, 120);\r\n      };\r\n\r\n      if (pointerFine && !ENV.state.coarse) {\r\n        on(chip, \"pointerenter\", revealTooltip);\r\n        on(chip, \"pointerleave\", concealTooltip);\r\n      }\r\n\r\n      on(chip, \"focusin\", revealTooltip);\r\n      on(chip, \"focusout\", concealTooltip);\r\n      on(chip, \"keydown\", (event) => {\r\n        if (event.key === \"Escape\") {\r\n          hideSkillTooltip(chip);\r\n          chip.blur();\r\n        }\r\n      });\r\n    });\r\n\r\n    filters.forEach((button) => {\r\n      on(button, \"click\", () => {\r\n        activeFilter = button.dataset.filter || \"all\";\r\n        applySkillFilter(section, chips, filters, activeFilter, expanded);\r\n      });\r\n    });\r\n\r\n    on(toggleButton, \"click\", () => {\r\n      expanded = toggleSkillsExpansion(\r\n        section,\r\n        chips,\r\n        filters,\r\n        toggleButton,\r\n        activeFilter,\r\n        expanded\r\n      );\r\n    });\r\n\r\n    toggleButton.textContent =\r\n      toggleButton.dataset.labelExpand || \"Show more skills\";\r\n    applySkillFilter(section, chips, filters, activeFilter, expanded);\r\n  }\r\n\r\n  // ==========================\r\n  // FAQ Accordion (ARIA preserved)\r\n  // ==========================\r\n  function initFAQ() {\r\n    const container = document.querySelector(\".faq-container\");\r\n    if (!container) {return;}\r\n\r\n    const items = [...document.querySelectorAll(\".faq-item\")];\r\n\r\n    items.forEach((item, idx) => {\r\n      const summary = item.querySelector(\"summary\");\r\n      const answer = item.querySelector(\"p\");\r\n      const qId = item.dataset.questionId || `faq-q-${idx + 1}`;\r\n      if (!summary) {return;}\r\n\r\n      summary.dataset.faqAuthor = \"Mohammad Rasoul Sohrabi\";\r\n\r\n      if (!summary.hasAttribute(\"aria-expanded\"))\r\n      {summary.setAttribute(\r\n        \"aria-expanded\",\r\n        item.open ? \"true\" : \"false\"\r\n      );}\r\n\r\n      if (answer) {\r\n        if (!answer.id) {answer.id = `faq-answer-${qId}`;}\r\n        if (!summary.hasAttribute(\"aria-controls\"))\r\n        {summary.setAttribute(\"aria-controls\", answer.id);}\r\n      }\r\n\r\n      item.classList.toggle(\"is-open\", !!item.open);\r\n\r\n      on(summary, \"click\", (e) => {\r\n        if (e.target.tagName === \"A\") {return;}\r\n        e.preventDefault();\r\n        createSparkle(summary);\r\n\r\n        items.forEach((other) => {\r\n          if (other !== item && other.open) {toggleFAQ(other, false);}\r\n        });\r\n\r\n        toggleFAQ(item, !item.open);\r\n      });\r\n    });\r\n\r\n    function toggleFAQ(item, open, scrollIntoView = false) {\r\n      item.open = open;\r\n      const summary = item.querySelector(\"summary\");\r\n      item.classList.toggle(\"is-open\", !!open);\r\n\r\n      if (summary)\r\n      {summary.setAttribute(\"aria-expanded\", open ? \"true\" : \"false\");}\r\n\r\n      if (scrollIntoView && open) {\r\n        setTimeout(() => {\r\n          const navH =\r\n            document.querySelector(\".navbar\")?.offsetHeight || 0;\r\n          item.scrollIntoView({\r\n            behavior: ENV.state.reduced ? \"auto\" : \"smooth\",\r\n            block: \"start\",\r\n          });\r\n          setTimeout(() => {\r\n            const rect = item.getBoundingClientRect();\r\n            if (rect.top < navH)\r\n            {window.scrollBy({\r\n              top: rect.top - navH,\r\n              behavior: ENV.state.reduced ? \"auto\" : \"smooth\",\r\n            });}\r\n          }, 90);\r\n        }, 80);\r\n      }\r\n    }\r\n\r\n    // Deep-link to FAQ using hash\r\n    const hash = window.location.hash;\r\n    if (hash) {\r\n      const target = document.querySelector(hash);\r\n      if (target && target.classList.contains(\"faq-item\")) {\r\n        items.forEach(\r\n          (it) => it !== target && it.open && toggleFAQ(it, false)\r\n        );\r\n        toggleFAQ(target, true, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  // ==========================\r\n  // Welcome Toast\r\n  // ==========================\r\n  function showWelcomeToast() {\r\n    const hasVisited = storage.getRaw(\"hasVisited\");\r\n    let msg = \"\";\r\n\r\n    if (hasVisited) {msg = STRINGS_EN.toasts.welcomeBack;}\r\n    else {\r\n      const hour = new Date().getHours();\r\n      msg =\r\n        hour >= 5 && hour < 10\r\n          ? STRINGS_EN.toasts.welcomeMorning\r\n          : hour < 16\r\n            ? STRINGS_EN.toasts.welcomeNoon\r\n            : hour < 20\r\n              ? STRINGS_EN.toasts.welcomeEvening\r\n              : STRINGS_EN.toasts.welcomeNight;\r\n      storage.setRaw(\"hasVisited\", \"true\");\r\n    }\r\n\r\n    if (msg)\n    {showToast(msg, {\n      id: \"welcome-toast\",\n      kind: \"info\",\n      customClass: \"welcome-toast\",\n      iconClass: \"fas fa-hand-sparkles\",\n      iconColor: \"var(--highlight-color)\",\n      duration: ENV.state.coarse ? 2500 : 3500,\n    });}\n  }\r\n\r\n  // ==========================\r\n  // Clipboard generic\r\n  // ==========================\r\n  async function copyToClipboard(text, okId, errId, okMsg) {\r\n    try {\r\n      if (!navigator.clipboard || !navigator.clipboard.writeText) {\r\n        throw new Error(\"clipboard-unsupported\");\r\n      }\r\n      await navigator.clipboard.writeText(text);\r\n      showToast(okMsg, {\n        id: okId,\n        kind: \"success\",\n        iconClass: \"fas fa-check-circle\",\n        iconColor: \"var(--highlight-color)\",\n        duration: 1600,\n      });\n      vibrate([40]);\r\n    } catch (err) {\r\n      console.error(\"Clipboard error:\", err);\r\n      showToast(STRINGS_EN.toasts.clipboardUnsupported, {\n        id: errId,\n        kind: \"error\",\n        iconClass: \"fas fa-exclamation-triangle\",\n        iconColor: \"var(--toast-danger)\",\n        duration: 2800,\n      });\n    }\r\n  }\r\n\r\n  window.copyToClipboard = copyToClipboard;\n\r\n  // ==========================\r\n  // Lazy Images (IO + decoding=async)\r\n  // ==========================\r\n  function initLazyImages() {\r\n    const lazyImages = document.querySelectorAll(\"img[data-src]\");\r\n    if (!lazyImages.length) {return;}\r\n\r\n    const loadImg = (img) => {\r\n      img.decoding = \"async\";\r\n      img.loading = \"lazy\";\r\n      img.classList.add(\"lazy-image\");\r\n      img.classList.add(\"is-loading\");\r\n      img.dataset.imageLoader =\r\n        \"Mohammad Rasoul Sohrabi's optimized script\";\r\n\r\n      img.src = img.dataset.src;\r\n      if (img.dataset.srcset) {img.srcset = img.dataset.srcset;}\r\n\r\n      img.onload = () => {\r\n        img.classList.remove(\"is-loading\");\r\n        img.classList.add(\"loaded\");\r\n        img.removeAttribute(\"data-src\");\r\n        img.removeAttribute(\"data-srcset\");\r\n      };\r\n\r\n      img.onerror = () => {\r\n        console.error(\"Failed to load image:\", img.src);\r\n        img.classList.remove(\"is-loading\");\r\n        img.classList.add(\"load-error\");\r\n        img.src =\r\n          \"https://placehold.co/400x300/cccccc/000000?text=Error\";\r\n      };\r\n    };\r\n\r\n    if (!(\"IntersectionObserver\" in window)) {\r\n      lazyImages.forEach((img) => loadImg(img));\r\n      return;\r\n    }\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries, obs) => {\r\n        entries.forEach((entry) => {\r\n          if (!entry.isIntersecting) {return;}\r\n          const img = entry.target;\r\n          loadImg(img);\r\n          obs.unobserve(img);\r\n        });\r\n      },\r\n      { rootMargin: \"0px 0px 180px 0px\", threshold: 0.01 }\r\n    );\r\n\r\n    lazyImages.forEach((img) => observer.observe(img));\r\n    on(\r\n      window,\r\n      \"beforeunload\",\r\n      () => observer.disconnect(),\r\n      { once: true }\r\n    );\r\n  }\r\n\r\n  // ==========================\r\n  // Share Button\r\n  // ==========================\r\n  function initShareButton() {\r\n    let shareBtn = document.getElementById(\"share-page-button\");\r\n    if (!shareBtn) {\r\n      shareBtn = document.createElement(\"button\");\r\n      shareBtn.id = \"share-page-button\";\r\n      shareBtn.type = \"button\";\r\n      shareBtn.innerHTML =\r\n        '<i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i>';\r\n      shareBtn.setAttribute(\"aria-label\", STRINGS_EN.aria.share);\r\n      shareBtn.classList.add(\r\n        \"sohrabi-share-feature\",\r\n        \"hidden\",\r\n        \"cta-pulse-effect\"\r\n      );\r\n      document.body.appendChild(shareBtn);\r\n    }\r\n\r\n    const onScroll = throttle(() => {\r\n      const isVisible = window.scrollY > 500;\r\n      shareBtn.classList.toggle(\"visible\", isVisible);\r\n      shareBtn.classList.toggle(\"hidden\", !isVisible);\r\n    }, 120);\r\n\r\n    on(window, \"scroll\", onScroll, { passive: true });\r\n    onScroll();\r\n\r\n    on(shareBtn, \"click\", async () => {\r\n      const pageUrl = window.location.href;\r\n      if (navigator.share) {\r\n        try {\r\n          await navigator.share({ title: document.title, url: pageUrl });\r\n          showToast(STRINGS_EN.toasts.shareOk, {\n            id: \"share-success-toast\",\n            kind: \"success\",\n            iconClass: \"fas fa-check-circle\",\n            iconColor: \"var(--highlight-color)\",\n            duration: 1800,\n          });\n          vibrate([40]);\r\n        } catch (error) {\r\n          if (error?.name !== \"AbortError\") {\r\n            console.error(\"Share error:\", error);\r\n            showToast(STRINGS_EN.toasts.shareErr, {\n              id: \"share-error-toast\",\n              kind: \"error\",\n              iconClass: \"fas fa-exclamation-triangle\",\n              iconColor: \"var(--toast-danger)\",\n              duration: 2800,\n            });\n          }\r\n        }\r\n      } else {\r\n        await copyToClipboard(\r\n          pageUrl,\r\n          \"share-copy-toast\",\r\n          \"share-error-toast\",\r\n          STRINGS_EN.toasts.linkCopied(\"Page\")\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // Timeline Micro-interactions\r\n  // ==========================\r\n  function initTimelineMicroInteractions() {\r\n    const section = document.getElementById(\"timeline\");\r\n    const list = section?.querySelector(\".timeline\");\r\n    if (!section || !list) {return;}\r\n\r\n    const items = Array.from(list.children).filter(\r\n      (node) => node instanceof HTMLElement && node.tagName === \"LI\"\r\n    );\r\n    if (!items.length) {return;}\r\n\r\n    items.forEach((item) => item.classList.add(\"timeline-item\"));\r\n    section.classList.add(\"timeline-enhanced\");\r\n\r\n    const markVisible = (item) => {\r\n      item.classList.add(\"is-visible\", \"timeline-item-visible\");\r\n    };\r\n\r\n    const reduced = ENV.state.reduced;\r\n    const coarse = ENV.state.coarse;\r\n    const supportsObserver = \"IntersectionObserver\" in window;\r\n\r\n    if (!supportsObserver || reduced) {\r\n      items.forEach(markVisible);\r\n    } else {\r\n      const observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (!entry.isIntersecting) {return;}\r\n            markVisible(entry.target);\r\n            observer.unobserve(entry.target);\r\n          });\r\n        },\r\n        {\r\n          threshold: coarse ? 0.1 : 0.24,\r\n          rootMargin: \"0px 0px -8% 0px\",\r\n        }\r\n      );\r\n\r\n      items.forEach((item, index) => {\r\n        if (coarse) {\r\n          observer.observe(item);\r\n          return;\r\n        }\r\n\r\n        setTimeout(() => {\r\n          if (!abortSignal.aborted) {\r\n            observer.observe(item);\r\n          }\r\n        }, Math.min(320, index * 38));\r\n      });\r\n\r\n      on(window, \"beforeunload\", () => observer.disconnect(), { once: true });\r\n    }\r\n\r\n    let targetTimer = null;\r\n    const clearTargets = () =>\r\n      items.forEach((item) => item.classList.remove(\"is-targeted\"));\r\n\r\n    const focusHashTarget = () => {\r\n      const hash = window.location.hash || \"\";\r\n      if (!hash) {return;}\r\n\r\n      let target = null;\r\n      try {\r\n        target = section.querySelector(hash);\r\n      } catch {\r\n        return;\r\n      }\r\n\r\n      if (!(target instanceof HTMLElement)) {return;}\r\n      if (!target.classList.contains(\"timeline-item\")) {return;}\r\n\r\n      clearTargets();\r\n      markVisible(target);\r\n      target.classList.add(\"is-targeted\");\r\n\r\n      if (targetTimer) {\r\n        clearTimeout(targetTimer);\r\n      }\r\n      targetTimer = setTimeout(() => {\r\n        target.classList.remove(\"is-targeted\");\r\n      }, 2200);\r\n\r\n      const navbarHeight = document.querySelector(\".navbar\")?.offsetHeight || 0;\r\n      const progressHeight =\r\n        document.getElementById(\"scroll-progress-bar\")?.offsetHeight || 0;\r\n      const offset = navbarHeight + progressHeight + 20;\r\n      const rect = target.getBoundingClientRect();\r\n      const top = window.scrollY + rect.top - offset;\r\n\r\n      if (Math.abs(rect.top - offset) > 24) {\r\n        window.scrollTo({\r\n          top: Math.max(0, top),\r\n          behavior: reduced ? \"auto\" : \"smooth\",\r\n        });\r\n      }\r\n    };\r\n\r\n    setTimeout(focusHashTarget, 120);\r\n    on(window, \"hashchange\", focusHashTarget);\r\n\r\n    if (reduced || coarse) {return;}\r\n\r\n    let ticking = false;\r\n    const updateParallax = () => {\r\n      ticking = false;\r\n      const rect = section.getBoundingClientRect();\r\n      const viewH = Math.max(window.innerHeight, 1);\r\n      const centerDelta = rect.top + rect.height / 2 - viewH / 2;\r\n      const ratio = Math.max(-1, Math.min(1, centerDelta / viewH));\r\n\r\n      section.style.setProperty(\r\n        \"--timeline-line-shift\",\r\n        `${(-ratio * 8).toFixed(2)}px`\r\n      );\r\n      section.style.setProperty(\r\n        \"--timeline-icon-shift\",\r\n        `${(-ratio * 3).toFixed(2)}px`\r\n      );\r\n    };\r\n\r\n    const requestParallaxUpdate = () => {\r\n      if (ticking) {return;}\r\n      ticking = true;\r\n      requestAnimationFrame(updateParallax);\r\n    };\r\n\r\n    on(window, \"scroll\", requestParallaxUpdate, { passive: true });\r\n    on(window, \"resize\", requestParallaxUpdate, { passive: true });\r\n    on(\r\n      window,\r\n      \"beforeunload\",\r\n      () => {\r\n        section.style.removeProperty(\"--timeline-line-shift\");\r\n        section.style.removeProperty(\"--timeline-icon-shift\");\r\n        if (targetTimer) {\r\n          clearTimeout(targetTimer);\r\n          targetTimer = null;\r\n        }\r\n      },\r\n      { once: true }\r\n    );\r\n\r\n    requestParallaxUpdate();\r\n  }\r\n\r\n  // ==========================\r\n  // Section Milestones & Confetti\r\n  // ==========================\r\n  function initExplorationMilestones() {\r\n    const sections = document.querySelectorAll(\"section[id]\");\r\n    const total = sections.length;\r\n    if (!total) {return;}\r\n    if (!(\"IntersectionObserver\" in window)) {return;}\r\n\r\n    const visited = new Set(storage.get(\"sectionsVisited\", []));\r\n    const announced = new Set(storage.get(\"announcedMilestones\", []));\r\n\r\n    const milestones = [\r\n      {\r\n        count: Math.max(1, Math.ceil(total * 0.25)),\r\n        message: \"You have explored 25% of the site. Great start! ✨ Keep going!\",\r\n        icon: \"fas fa-map-marker-alt\",\r\n      },\r\n      {\r\n        count: Math.max(\r\n          Math.ceil(total * 0.25) + 1,\r\n          Math.ceil(total * 0.5)\r\n        ),\r\n        message:\r\n          \"Halfway there. You have explored 50% of the site. Excellent! 🚀\",\r\n        icon: \"fas fa-rocket\",\r\n      },\r\n      {\r\n        count: Math.max(\r\n          Math.ceil(total * 0.5) + 1,\r\n          Math.ceil(total * 0.75)\r\n        ),\r\n        message: \"You reached 75%. Almost there! 🌟\",\r\n        icon: \"fas fa-star\",\r\n      },\r\n      {\r\n        count: total,\r\n        message: `Congratulations! You have explored all ${total} sections of the site. You are a true explorer! 🎉`,\r\n        icon: \"fas fa-trophy\",\r\n        isFinal: true,\r\n      },\r\n    ]\r\n      .filter(\r\n        (m, i, arr) =>\r\n          m.count > 0 && arr.findIndex((x) => x.count === m.count) === i\r\n      )\r\n      .sort((a, b) => a.count - b.count);\r\n\r\n    let lastToastAt = 0;\r\n    const cooldown = ENV.state.coarse ? 12000 : 8000;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        const now = Date.now();\r\n\r\n        entries.forEach((entry) => {\r\n          if (!entry.isIntersecting) {return;}\r\n\r\n          visited.add(entry.target.id);\r\n          storage.set(\"sectionsVisited\", [...visited]);\r\n          observer.unobserve(entry.target);\r\n\r\n          const count = visited.size;\r\n          for (const m of milestones) {\r\n            if (\r\n              count >= m.count &&\r\n              !announced.has(m.count) &&\r\n              now - lastToastAt > cooldown\r\n            ) {\r\n              showToast(m.message, {\n                id: `exploration-milestone-${m.count}`,\n                kind: m.isFinal ? \"success\" : \"info\",\n                customClass: m.isFinal\n                  ? \"exploration-toast final-exploration-toast\"\n                  : \"exploration-toast\",\n                iconClass: m.icon,\r\n                iconColor: m.isFinal\r\n                  ? \"var(--primary-color)\"\r\n                  : \"var(--accent-color)\",\r\n                duration: 4200,\r\n              });\r\n\r\n              const bio = document.getElementById(\"sohrabi-bio\");\r\n              bio?.dispatchEvent(new Event(\"mouseenter\"));\r\n\r\n              announced.add(m.count);\r\n              storage.set(\"announcedMilestones\", [...announced]);\r\n              lastToastAt = now;\r\n\r\n              if (m.isFinal && FLAGS().ENABLE_CONFETTI)\r\n              {setTimeout(createConfetti, 500);}\r\n              break;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.3, rootMargin: \"0px 0px -10% 0px\" }\r\n    );\r\n\r\n    sections.forEach((sec) => observer.observe(sec));\r\n    on(\r\n      window,\r\n      \"beforeunload\",\r\n      () => observer.disconnect(),\r\n      { once: true }\r\n    );\r\n  }\r\n\r\n  function createConfetti() {\r\n    if (ENV.state.reduced || ENV.state.coarse) {return;}\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.id = \"confetti-canvas\";\r\n    canvas.classList.add(\"confetti-canvas\");\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n\r\n    canvas.dataset.celebrationEvent =\r\n      \"page_completion_by_Mohammad_Rasoul_Sohrabi_user\";\r\n\r\n    document.body.appendChild(canvas);\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) {\r\n      canvas.remove();\r\n      return;\r\n    }\r\n\r\n    const colors = [\r\n      \"#ffc107\",\r\n      \"#007acc\",\r\n      \"#005a9e\",\r\n      \"#f0f0f0\",\r\n      \"#e0a800\",\r\n      \"#FF4081\",\r\n      \"#64FFDA\",\r\n    ];\r\n\r\n    const pieces = Array.from({ length: 48 }, () => ({\r\n      x: Math.random() * canvas.width,\r\n      y: -Math.random() * canvas.height,\r\n      size: Math.random() * 8 + 4,\r\n      color: colors[(Math.random() * colors.length) | 0],\r\n      angle: Math.random() * 360,\r\n      speed: Math.random() * 2 + 1,\r\n      drift: Math.random() * 2 - 1,\r\n    }));\r\n\r\n    const start = performance.now();\r\n    let rafId = null;\r\n\r\n    const cleanup = () => {\r\n      if (rafId) {cancelAnimationFrame(rafId);}\r\n      if (canvas && canvas.parentNode) {\r\n        canvas.remove();\r\n      }\r\n    };\r\n\r\n    const loop = () => {\r\n      const elapsed = performance.now() - start;\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      for (const p of pieces) {\r\n        p.y += p.speed;\r\n        p.x += p.drift;\r\n        p.angle += 2;\r\n\r\n        ctx.save();\r\n        ctx.translate(p.x, p.y);\r\n        ctx.rotate((p.angle * Math.PI) / 180);\r\n        ctx.fillStyle = p.color;\r\n        ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);\r\n        ctx.restore();\r\n      }\r\n\r\n      if (elapsed < 3400) {\r\n        rafId = requestAnimationFrame(loop);\r\n      } else {\r\n        cleanup();\r\n      }\r\n    };\r\n\r\n    rafId = requestAnimationFrame(loop);\r\n\r\n    const observer = new MutationObserver(() => {\r\n      if (!document.body.contains(canvas)) {\r\n        cleanup();\r\n        observer.disconnect();\r\n      }\r\n    });\r\n\r\n    observer.observe(document.body, { childList: true, subtree: true });\r\n  }\r\n\r\n  // ==========================\r\n  // Fun Fact idle toast\r\n  // ==========================\r\n  function initFunFacts() {\r\n    if (ENV.state.coarse || ENV.state.saveData) {return;}\r\n\r\n    let toastRef = null;\r\n    let idleTimeout;\r\n\r\n    const show = () => {\r\n      const fact = FUN_FACTS_EN[(Math.random() * FUN_FACTS_EN.length) | 0];\r\n      toastRef = showToast(`${STRINGS_EN.funFactsPrefix} ${fact}`, {\n        id: \"fun-fact-toast\",\n        kind: \"info\",\n        customClass: \"fun-fact-toast\",\n        iconClass: \"fas fa-lightbulb\",\n        iconColor: \"var(--primary-color)\",\n        position: \"top\",\r\n        duration: 5200,\r\n        closeButton: true,\r\n      });\r\n    };\r\n\r\n    const reset = debounce(() => {\r\n      clearTimeout(idleTimeout);\r\n      idleTimeout = setTimeout(() => {\r\n        if (!toastRef || !toastRef.classList.contains(\"show\")) {\r\n          show();\r\n        }\r\n      }, 24000);\r\n    }, 600);\r\n\r\n    const evs = [\"mousemove\", \"keydown\", \"scroll\", \"touchstart\"];\r\n    evs.forEach((ev) => {\r\n      const opts =\r\n        ev === \"scroll\" || ev === \"touchstart\" ? { passive: true } : {};\r\n      on(window, ev, reset, opts);\r\n    });\r\n\r\n    reset();\r\n\r\n    on(document, \"visibilitychange\", () => {\r\n      if (document.hidden) {\r\n        clearTimeout(idleTimeout);\r\n      } else {\r\n        reset();\r\n      }\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // Sparkle Effect\r\n  // ==========================\r\n  function createSparkle(element) {\r\n    if (\r\n      !element ||\r\n      ENV.state.reduced ||\r\n      ENV.state.saveData ||\r\n      ENV.state.lowPowerCPU\r\n    )\r\n    {return;}\r\n\r\n    const sparkle = document.createElement(\"div\");\r\n    sparkle.className = \"sparkle-effect\";\r\n    sparkle.dataset.sparkleSource =\r\n      \"Mohammad Rasoul Sohrabi's interactive elements\";\r\n\r\n    const size = Math.random() * 10 + 5;\r\n\r\n    sparkle.style.setProperty(\"--sparkle-size\", `${size}px`);\r\n    sparkle.style.setProperty(\r\n      \"--sparkle-x\",\r\n      `${(Math.random() * 100).toFixed(2)}%`\r\n    );\r\n    sparkle.style.setProperty(\r\n      \"--sparkle-y\",\r\n      `${(Math.random() * 100).toFixed(2)}%`\r\n    );\r\n\r\n    sparkle.dataset.sparkleColor = [\"primary\", \"accent\", \"highlight\"][\r\n      (Math.random() * 3) | 0\r\n    ];\r\n\r\n    element.classList.add(\"sparkle-host\");\r\n\r\n    element.appendChild(sparkle);\r\n\r\n    const animation = sparkle.animate?.(\r\n      [\r\n        {\r\n          opacity: 0,\r\n          transform: `scale(0) rotate(${(\r\n            Math.random() * 360\r\n          ).toFixed(1)}deg)`,\r\n        },\r\n        {\r\n          opacity: 1,\r\n          transform: `scale(1) rotate(${(\r\n            360 + Math.random() * 360\r\n          ).toFixed(1)}deg)`,\r\n        },\r\n        {\r\n          opacity: 0,\r\n          transform: `scale(0.5) rotate(${(\r\n            720 + Math.random() * 360\r\n          ).toFixed(1)}deg)`,\r\n        },\r\n      ],\r\n      { duration: 650, easing: \"ease-out\", fill: \"forwards\" }\r\n    );\r\n\r\n    if (animation) {\r\n      on(animation, \"finish\", () => sparkle.remove(), { once: true });\r\n    } else {\r\n      setTimeout(() => sparkle.remove(), 700);\r\n    }\r\n  }\r\n\r\n  // ==========================\r\n  // CTA Buttons cosmetics\r\n  // ==========================\r\n  function initCTAs() {\r\n    document.querySelectorAll(\".main-cta-button\").forEach((btn) => {\r\n      btn.classList.add(\"cta-pulse-effect\", \"sohrabi-cta-action\");\r\n      btn.dataset.ctaOwner = \"Mohammad Rasoul Sohrabi\";\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // End-of-page toast (once per session)\r\n  // ==========================\r\n  function initEndOfPageToast() {\r\n    let announced = false;\r\n\r\n    const handler = throttle(() => {\r\n      if (announced) {return;}\r\n      const nearBottom =\r\n        window.innerHeight + window.scrollY >=\r\n        document.body.offsetHeight - 50;\r\n      if (nearBottom) {\r\n        showToast(STRINGS_EN.toasts.reachedEnd, {\n          id: \"end-of-page-toast\",\n          kind: \"info\",\n          customClass: \"end-of-page-toast\",\n          iconClass: \"fas fa-flag-checkered\",\n          iconColor: \"var(--highlight-color)\",\n          duration: 3600,\r\n        });\r\n        announced = true;\r\n      }\r\n    }, 140);\r\n\r\n    on(window, \"scroll\", handler, { passive: true });\r\n  }\r\n\r\n  // ==========================\r\n  // Mobile Menu\r\n  // ==========================\r\n  function initMobileMenu() {\r\n    const hamburger = document.querySelector(\".hamburger\");\r\n    const navLinks = document.querySelector(\".nav-links\");\r\n    const links = document.querySelectorAll(\".nav-links a\");\r\n\r\n    if (!hamburger || !navLinks) {return;}\r\n\r\n    on(hamburger, \"click\", () => {\r\n      hamburger.classList.toggle(\"active\");\r\n      navLinks.classList.toggle(\"active\");\r\n      const expanded =\r\n        hamburger.getAttribute(\"aria-expanded\") === \"true\";\r\n      hamburger.setAttribute(\"aria-expanded\", String(!expanded));\r\n    });\r\n\r\n    links.forEach((link) => {\r\n      on(link, \"click\", () => {\r\n        hamburger.classList.remove(\"active\");\r\n        navLinks.classList.remove(\"active\");\r\n        hamburger.setAttribute(\"aria-expanded\", \"false\");\r\n      });\r\n    });\r\n\r\n    // Close menu when clicking outside\r\n    on(document, \"click\", (e) => {\r\n      if (\r\n        !hamburger.contains(e.target) &&\r\n        !navLinks.contains(e.target) &&\r\n        navLinks.classList.contains(\"active\")\r\n      ) {\r\n        hamburger.classList.remove(\"active\");\r\n        navLinks.classList.remove(\"active\");\r\n        hamburger.setAttribute(\"aria-expanded\", \"false\");\r\n      }\r\n    });\r\n  }\r\n\r\n  // ==========================\r\n  // Boot & Live Updates\r\n  // ==========================\r\n  let booted = false;\r\n\r\n  function boot() {\r\n    if (booted) {return;}\r\n    booted = true;\r\n\r\n    const initSteps = [\r\n      [\"mobile-menu\", initMobileMenu],\r\n      [\"aos\", initAOS],\r\n      [\"critical-styles\", initCriticalStyleFallbacks],\r\n      [\"dynamic-dates\", setDynamicDates],\r\n      [\"identity-hooks\", setIdentityHooks],\r\n      [\"identity-pings\", queueIdentityPings],\r\n      [\"theme\", initTheme],\r\n      [\"anchor-scrolling\", initAnchorScrolling],\r\n      [\"click-effects\", initClickEffects],\r\n      [\"scroll-ui\", initScrollUI],\r\n      [\"timeline-micro-interactions\", initTimelineMicroInteractions],\r\n      [\"skills-ui\", initSkillsUI],\r\n      [\"faq\", initFAQ],\r\n      [\"lazy-images\", initLazyImages],\r\n      [\"share-button\", initShareButton],\r\n      [\"exploration-milestones\", initExplorationMilestones],\r\n      [\"fun-facts\", initFunFacts],\r\n      [\"ctas\", initCTAs],\r\n      [\"end-of-page-toast\", initEndOfPageToast],\r\n      [\"welcome-toast\", showWelcomeToast],\r\n    ];\r\n\r\n    initSteps.forEach(([scope, fn]) => {\r\n      safeRun(scope, fn);\r\n    });\r\n  }\r\n\r\n  function installGlobalErrorHandlers() {\r\n    on(window, \"error\", (event) => {\r\n      reportRuntimeError(\"window.error\", event.error || event.message);\r\n    });\r\n\r\n    on(window, \"unhandledrejection\", (event) => {\r\n      reportRuntimeError(\"unhandledrejection\", event.reason);\r\n    });\r\n  }\r\n\r\n  hydrateRuntimeErrorState();\r\n  installGlobalErrorHandlers();\r\n\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", () => safeRun(\"boot\", boot), {\r\n      once: true,\r\n    });\r\n  } else {\r\n    safeRun(\"boot\", boot);\r\n  }\r\n\r\n  // Re-evaluate dynamic flags on env change (e.g., user toggles reduced motion or system theme)\r\n  ENV.onChange(() => {\r\n    // Refresh only the pieces that depend on flags\r\n    safeRun(\"env-change.aos\", initAOS);\r\n  });\r\n\r\n  // Teardown on page hide/unload\r\n  on(window, \"pagehide\", () => teardown.abort(), { once: true });\r\n})();\r\n"]}