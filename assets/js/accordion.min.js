!function(){"use strict";if("undefined"==typeof window||"undefined"==typeof document)return;const e=new Map,t=!(!window.matchMedia||!window.matchMedia("(prefers-reduced-motion: reduce)").matches);function n(n){if(!n)return;const i=n.dataset.accordionId||"main",o="true"===n.getAttribute("data-allow-multiple")||n.hasAttribute("data-allow-multiple"),a="false"!==n.getAttribute("data-allow-toggle"),r=[],s=[],d=t,c=Array.from(n.querySelectorAll(".accordion-item"));if(!c.length)return;const l=new WeakMap,u=new WeakMap;function f(e){const t=l.get(e);t&&(e.removeEventListener("transitionend",t),l.delete(e));const n=u.get(e);null!=n&&(clearTimeout(n),u.delete(e))}function p(e,t){f(e);let n=!1;function i(i){n||(n=!0,f(e),t(i))}const o=e=>{"max-height"===e.propertyName&&i(e)};e.addEventListener("transitionend",o),l.set(e,o);const a=window.setTimeout(()=>{i()},500);u.set(e,a)}if(c.forEach((e,t)=>{const n=e.querySelector(".accordion-header"),o=e.querySelector(".accordion-content");if(!n||!o)return;const a=n.id||`accordion-header-${i}-${t}`,d=o.id||`accordion-panel-${i}-${t}`;n.id=a,o.id=d;const c=e.classList.contains("is-open")||e.hasAttribute("data-open");n.setAttribute("role","button"),n.setAttribute("aria-controls",d),n.setAttribute("aria-expanded",c?"true":"false"),n.setAttribute("tabindex","0"),o.setAttribute("role","region"),o.setAttribute("aria-labelledby",a),o.setAttribute("aria-hidden",c?"false":"true"),o.hidden=!c,c?(e.classList.add("is-open"),o.style.maxHeight="none",o.style.opacity="1"):(e.classList.remove("is-open"),o.style.maxHeight="0px",o.style.opacity="0"),s.push(n),r.push({item:e,header:n,panel:o})}),r.length){if(!a){if(!r.some(e=>h(e))&&r[0]){const{item:e,header:t,panel:n}=r[0];t.setAttribute("aria-expanded","true"),e.classList.add("is-open"),n.setAttribute("aria-hidden","false"),n.hidden=!1,n.style.maxHeight="none",n.style.opacity="1"}}r.forEach(e=>{const{header:t}=e;t.addEventListener("click",()=>{t.hasAttribute("aria-disabled")||w(e)}),t.addEventListener("keydown",n=>{const i=n.key;if(t.hasAttribute("aria-disabled"))return;if("Enter"===i||" "===i)return n.preventDefault(),void w(e);const o=s.indexOf(t);if(-1!==o)if("ArrowDown"===i){n.preventDefault();(s[o+1]||s[0]).focus()}else if("ArrowUp"===i){n.preventDefault();(s[o-1]||s[s.length-1]).focus()}else"Home"===i?(n.preventDefault(),s[0].focus()):"End"===i&&(n.preventDefault(),s[s.length-1].focus())})}),e.set(i,{root:n,itemRefs:r,allowMultiple:o,allowToggle:a,expandItem:y,collapseItem:g,toggleItem:w,isItemExpanded:h})}function m(e,t,n){if(!e)return;const i=function(e,t){if("function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:!0,detail:t});const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!1,t),n}(t,{item:e,accordionId:n});e.dispatchEvent(i)}function h(e){return"true"===e.header.getAttribute("aria-expanded")}function g(e){const{item:t,header:n,panel:o}=e;if(n&&o){if(n.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),o.setAttribute("aria-hidden","true"),f(o),d)o.style.maxHeight="0px",o.style.opacity="0",o.hidden=!0;else{o.hidden=!1;const e=o.scrollHeight;o.style.maxHeight=e+"px",o.offsetHeight,p(o,()=>{o.hidden=!0,o.style.maxHeight="0px"}),requestAnimationFrame(()=>{o.style.maxHeight="0px",o.style.opacity="0"})}m(t,"accordion:collapse",i)}}function y(e){const{item:t,header:n,panel:o}=e;n&&o&&(n.setAttribute("aria-expanded","true"),t.classList.add("is-open"),o.setAttribute("aria-hidden","false"),o.hidden=!1,d?(o.style.maxHeight="none",o.style.opacity="1"):(o.style.maxHeight="0px",o.style.opacity="0",f(o),p(o,()=>{o.style.maxHeight="none"}),requestAnimationFrame(()=>{const e=o.scrollHeight;o.style.maxHeight=e+"px",o.style.opacity="1"})),m(t,"accordion:expand",i))}function w(e){const{item:t}=e,n=h(e);!a&&n&&r.reduce((e,t)=>h(t)?e+1:e,0)<=1||(o||r.forEach(e=>{e.item!==t&&h(e)&&g(e)}),n?g(e):y(e))}}function i(t){if(!t)return null;if("string"==typeof t)return e.get(t)||null;if(t instanceof HTMLElement){const n=t.dataset?t.dataset.accordionId:null;return n&&e.get(n)||null}return null}function o(e,t){if(!e||null==t)return null;const{itemRefs:n}=e;return"number"==typeof t?n[t]||null:"string"==typeof t&&n.find(e=>e.item.id===t||e.header.id===t||e.panel.id===t)||null}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".accordion").forEach((e,t)=>{e.dataset.accordionId||(e.dataset.accordionId=String(t+1)),n(e)})}),window.Accordion=window.Accordion||{},window.Accordion.open=function(e,t){const n=i(e);if(!n)return;const a=o(n,t);a&&n.expandItem(a)},window.Accordion.close=function(e,t){const n=i(e);if(!n)return;const a=o(n,t);a&&n.collapseItem(a)},window.Accordion.toggle=function(e,t){const n=i(e);if(!n)return;const a=o(n,t);a&&n.toggleItem(a)},window.Accordion.openAll=function(e){const t=i(e);if(!t)return;const{allowMultiple:n,itemRefs:o,expandItem:a}=t;n?o.forEach(e=>a(e)):o[0]&&a(o[0])},window.Accordion.closeAll=function(e){const t=i(e);if(!t)return;const{allowToggle:n,itemRefs:o,collapseItem:a,isItemExpanded:r,expandItem:s}=t;if(!n){let e=o.find(e=>r(e));return!e&&o[0]&&(e=o[0]),o.forEach(t=>{t!==e&&a(t)}),void(e&&!r(e)&&s(e))}o.forEach(e=>a(e))},window.Accordion.init=function(t){if(t)if("string"==typeof t){document.querySelectorAll(t).forEach((t,i)=>{t.dataset.accordionId||(t.dataset.accordionId=String(e.size+i+1)),n(t)})}else t instanceof HTMLElement&&(t.dataset.accordionId||(t.dataset.accordionId=String(e.size+1)),n(t))}}();
//# sourceMappingURL=accordion.min.js.map
