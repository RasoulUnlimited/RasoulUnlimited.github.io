document.addEventListener("DOMContentLoaded",()=>{"use strict";const e=Array.from(document.querySelectorAll(".faq-item")),t=document.querySelector(".faq-navigation"),n=document.getElementById("faq-search"),a=document.getElementById("clear-search"),c=Array.from(document.querySelectorAll(".faq-section")),o=(document.querySelector(".main-content")||document.getElementById("faq-container"),document.querySelector(".page-header"),document.getElementById("expand-all-faq")),s=document.getElementById("collapse-all-faq");if(!e.length)return;if(t&&t.addEventListener("click",e=>{const t=e.target.closest("a");if(!t)return;const n=t.dataset.category||"unknown";"function"==typeof gtag&&gtag("event","faq_nav_click",{event_category:"FAQ Navigation",event_label:`Clicked category: ${n}`,value:1}),"function"==typeof hj&&hj("event",`faq_nav_clicked_category_${n.replace(/\s/g,"_").toLowerCase()}`)}),document.querySelectorAll(".button-link").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.ctaType||"generic";"function"==typeof gtag&&gtag("event","faq_cta_click",{event_category:"FAQ Call to Action",event_label:`CTA Clicked: ${t}`,value:1}),"function"==typeof hj&&hj("event",`faq_cta_clicked_${t}`)})}),document.querySelectorAll(".faq-answer .text-link").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.linkType||"generic";"function"==typeof gtag&&gtag("event","faq_text_link_click",{event_category:"FAQ Internal Link",event_label:`Text link clicked: ${t}`,value:1}),"function"==typeof hj&&hj("event",`faq_text_link_clicked_${t}`)})}),n){let t=document.getElementById("faq-search-status");t||(t=document.createElement("div"),t.id="faq-search-status",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="faq-search-status sr-only",(n.closest("form")||n.parentNode).appendChild(t)),a&&!a.getAttribute("aria-label")&&a.setAttribute("aria-label","پاک کردن جستجوی پرسش‌ها");const o=(n,a)=>{const c=e.length,o=n.trim(),s=document.getElementById("faq-no-results");o?a?(t.textContent=`${a} نتیجه برای «${o}» یافت شد.`,s&&(s.style.display="none")):(t.textContent=`هیچ نتیجه‌ای برای «${o}» پیدا نشد.`,s&&(s.style.display="block",s.textContent=`نتیجه‌ای برای «${o}» یافت نشد. لطفاً کلمات کلیدی دیگری را امتحان کنید.`)):(t.textContent=`نمایش ${c} پرسش موجود.`,s&&(s.style.display="none"))},s=()=>{const e=(n.value||"").trim().toLowerCase();a&&(a.style.display=e?"block":"none");let t=0;(c.length?c:[document.getElementById("faq-container")||document.body]).forEach(n=>{let a=!1;n.querySelectorAll(".faq-item").forEach(n=>{const c=n.querySelector(".accordion-header"),o=c?c.textContent.toLowerCase():"",s=n.querySelector(".faq-answer"),l=s?s.textContent.toLowerCase():"",r=(n.dataset.keywords||"").toLowerCase();!e||o.includes(e)||l.includes(e)||r.includes(e)?(n.style.display="",a=!0,t++,e&&!n.classList.contains("is-open")&&(i(n,!0),n.dataset.openedBySearch="true")):(n.style.display="none",n.classList.contains("is-open")&&n.dataset.openedBySearch&&(i(n,!1),delete n.dataset.openedBySearch))}),n.classList.contains("faq-section")&&(n.hidden=!a)}),"function"==typeof gtag&&e.length>2&&gtag("event","faq_search",{event_category:"FAQ Search",search_term:e,results_count:t}),o(e,t)},l=function(e){let t;return function(){const n=this,a=arguments;clearTimeout(t),t=setTimeout(()=>e.apply(n,a),200)}}(s);n.addEventListener("input",l),n.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),n.value="",a&&(a.style.display="none"),s())}),a&&a.addEventListener("click",()=>{n.value="",a.style.display="none",e.forEach(e=>{e.style.display="",e.classList.contains("is-open")&&e.dataset.openedBySearch&&(i(e,!1),delete e.dataset.openedBySearch)}),c.forEach(e=>{e.hidden=!1}),o("",e.length),n.focus()})}function i(e,t=null){const n=e.querySelector(".accordion-header"),a=e.querySelector(".accordion-content");if(!n||!a)return;const c=e.classList.contains("is-open");(null!==t?t:!c)?(e.classList.add("is-open"),n.setAttribute("aria-expanded","true")):(e.classList.remove("is-open"),n.setAttribute("aria-expanded","false"))}const l=document.getElementById("faq-container")||document.querySelector(".main-content");l&&(l.addEventListener("click",e=>{const t=e.target.closest(".accordion-header");if(!t)return;if(e.target.closest(".copy-faq-link")||e.target.closest("a"))return;const n=t.closest(".accordion-item");if(!n)return;i(n);const a=n.dataset.questionId||"unknown",c=n.classList.contains("is-open")?"expand":"collapse";"function"==typeof gtag&&gtag("event",`faq_${c}`,{event_category:"FAQ Interaction",event_label:`Question ${c}ed: ${a}`})}),l.addEventListener("keydown",e=>{const t=e.target.closest(".accordion-header");t&&("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()))})),o&&o.addEventListener("click",()=>{e.forEach(e=>{"none"!==e.style.display&&i(e,!0)})}),s&&s.addEventListener("click",()=>{e.forEach(e=>i(e,!1))}),document.querySelectorAll(".copy-faq-link").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const n=e.dataset.link;if(!n)return;const a=window.location.origin+window.location.pathname+n;navigator.clipboard.writeText(a).then(()=>{const t=e.innerHTML;e.innerHTML='<i class="fas fa-check"></i>',e.classList.add("copied"),setTimeout(()=>{e.innerHTML=t,e.classList.remove("copied")},2e3)})})}),document.querySelectorAll(".btn-feedback").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.closest(".faq-feedback").querySelectorAll(".btn-feedback").forEach(e=>e.classList.remove("active")),e.classList.add("active")})}),window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches});
//# sourceMappingURL=faq-fa.min.js.map
