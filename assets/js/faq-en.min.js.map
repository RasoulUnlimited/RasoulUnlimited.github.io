{"version":3,"file":"faq-en.min.js","names":["document","addEventListener","faqItems","Array","from","querySelectorAll","faqNavigation","querySelector","searchInput","getElementById","clearSearchButton","allSections","faqContainer","header","mainContent","length","debounce","func","delay","timeout","context","this","args","arguments","clearTimeout","setTimeout","apply","event","link","target","closest","category","dataset","gtag","event_category","event_label","value","hj","replace","toLowerCase","forEach","button","ctaType","linkType","status","createElement","id","setAttribute","className","parentNode","appendChild","getAttribute","updateStatus","term","count","total","trimmed","trim","textContent","handleSearch","searchTerm","style","display","visibleItemsCount","section","sectionHasVisibleItems","item","summary","questionText","answerEl","answerText","keywords","includes","hidden","open","openedByUser","openedBySearch","search_term","results_count","debouncedSearch","e","key","preventDefault","focus","clickedLink","contains","window","location","href","parentElement","questionId","wasAlreadyOpen","otherItem","otherSummary","question_text","rect","getBoundingClientRect","top","bottom","innerHeight","scrollIntoView","behavior","block","primary","getComputedStyle","documentElement","getPropertyValue","outline","outlineOffset","matchMedia","matches","opacity","transform","transition"],"sources":["faq-en.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  \"use strict\";\r\n\r\n  const faqItems = Array.from(document.querySelectorAll(\".faq-item\"));\r\n  const faqNavigation = document.querySelector(\".faq-navigation\");\r\n  const searchInput = document.getElementById(\"faq-search\");\r\n  const clearSearchButton = document.getElementById(\"clear-search\");\r\n  const allSections = Array.from(document.querySelectorAll(\".faq-section\"));\r\n  const faqContainer = document.querySelector(\".main-content\");\r\n  const header = document.querySelector(\".page-header\");\r\n  const mainContent = document.querySelector(\".main-content\");\r\n\r\n  // اگر کلاً FAQ نداریم، ادامه دادن لازم نیست\r\n  if (!faqItems.length && !header && !mainContent) {return;}\r\n\r\n  // Utility: simple debounce helper\r\n  function debounce(func, delay) {\r\n    let timeout;\r\n    return function () {\r\n      const context = this;\r\n      const args = arguments;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => func.apply(context, args), delay);\r\n    };\r\n  }\r\n\r\n  // --- GA4 & Hotjar Event Tracking Integration ---\r\n\r\n  // Track clicks on navigation links\r\n  if (faqNavigation) {\r\n    faqNavigation.addEventListener(\"click\", (event) => {\r\n      const link = event.target.closest(\"a\");\r\n      if (!link) {return;}\r\n      const category = link.dataset.category || \"unknown\";\r\n\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_nav_click\", {\r\n          event_category: \"FAQ Navigation\",\r\n          event_label: `Clicked category: ${category}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\r\n          \"event\",\r\n          `faq_nav_clicked_category_${category.replace(/\\s/g, \"_\").toLowerCase()}`\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // Track Clicks on Call-to-Action Buttons\r\n  document.querySelectorAll(\".button-link\").forEach((button) => {\r\n    button.addEventListener(\"click\", () => {\r\n      const ctaType = button.dataset.ctaType || \"generic\";\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_cta_click\", {\r\n          event_category: \"FAQ Call to Action\",\r\n          event_label: `CTA Clicked: ${ctaType}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", `faq_cta_clicked_${ctaType}`);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Track Clicks on Internal Text Links\r\n  document.querySelectorAll(\".faq-answer .text-link\").forEach((link) => {\r\n    link.addEventListener(\"click\", () => {\r\n      const linkType = link.dataset.linkType || \"generic\";\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_text_link_click\", {\r\n          event_category: \"FAQ Internal Link\",\r\n          event_label: `Text link clicked: ${linkType}`,\r\n          value: 1,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", `faq_text_link_clicked_${linkType}`);\r\n      }\r\n    });\r\n  });\r\n\r\n  // --- FAQ Search Functionality (Cognitive Load Reduction - Information Foraging) ---\r\n  if (searchInput && clearSearchButton && allSections.length) {\r\n    // live region برای اعلام نتایج سرچ\r\n    let status = document.getElementById(\"faq-search-status\");\r\n    if (!status) {\r\n      status = document.createElement(\"div\");\r\n      status.id = \"faq-search-status\";\r\n      status.setAttribute(\"aria-live\", \"polite\");\r\n      status.setAttribute(\"aria-atomic\", \"true\");\r\n      status.className = \"faq-search-status sr-only\";\r\n      (searchInput.closest(\"form\") || searchInput.parentNode).appendChild(\r\n        status\r\n      );\r\n    }\r\n\r\n    if (!clearSearchButton.getAttribute(\"aria-label\")) {\r\n      clearSearchButton.setAttribute(\"aria-label\", \"Clear FAQ search\");\r\n    }\r\n\r\n    const updateStatus = (term, count) => {\r\n      const total = faqItems.length;\r\n      const trimmed = term.trim();\r\n      if (!trimmed) {\r\n        status.textContent = `Showing all ${total} questions.`;\r\n      } else if (!count) {\r\n        status.textContent = `No results found for “${trimmed}”.`;\r\n      } else {\r\n        status.textContent = `${count} result${\r\n          count === 1 ? \"\" : \"s\"\r\n        } found for “${trimmed}”.`;\r\n      }\r\n    };\r\n\r\n    const handleSearch = () => {\r\n      const rawTerm = searchInput.value || \"\";\r\n      const searchTerm = rawTerm.trim().toLowerCase();\r\n      clearSearchButton.style.display = searchTerm ? \"block\" : \"none\";\r\n\r\n      let visibleItemsCount = 0;\r\n\r\n      allSections.forEach((section) => {\r\n        let sectionHasVisibleItems = false;\r\n        const itemsInSection = section.querySelectorAll(\".faq-item\");\r\n\r\n        itemsInSection.forEach((item) => {\r\n          const summary = item.querySelector(\"summary\");\r\n          const questionText = summary\r\n            ? summary.textContent.toLowerCase()\r\n            : \"\";\r\n          const answerEl = item.querySelector(\".faq-answer\");\r\n          const answerText = answerEl ? answerEl.textContent.toLowerCase() : \"\";\r\n          const keywords = (item.dataset.keywords || \"\").toLowerCase();\r\n\r\n          const matches =\r\n            !searchTerm ||\r\n            questionText.includes(searchTerm) ||\r\n            answerText.includes(searchTerm) ||\r\n            keywords.includes(searchTerm);\r\n\r\n          if (matches) {\r\n            item.hidden = false;\r\n            sectionHasVisibleItems = true;\r\n            visibleItemsCount++;\r\n\r\n            // اگر سرچ فعال است و آیتم توسط یوزر باز نشده، با سرچ بازش کن\r\n            if (searchTerm && !item.open && !item.dataset.openedByUser) {\r\n              item.open = true;\r\n              item.dataset.openedBySearch = \"true\";\r\n              if (summary) {summary.setAttribute(\"aria-expanded\", \"true\");}\r\n            }\r\n          } else {\r\n            item.hidden = true;\r\n            // اگر با سرچ باز شده بود، الان که می‌ره بیرون نتیجه، ببندش\r\n            if (item.open && item.dataset.openedBySearch) {\r\n              item.open = false;\r\n              delete item.dataset.openedBySearch;\r\n              if (summary) {summary.setAttribute(\"aria-expanded\", \"false\");}\r\n            }\r\n          }\r\n        });\r\n\r\n        section.hidden = !sectionHasVisibleItems;\r\n      });\r\n\r\n      // Track search event in GA4\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_search\", {\r\n          event_category: \"FAQ Search\",\r\n          search_term: searchTerm,\r\n          results_count: visibleItemsCount,\r\n        });\r\n      }\r\n      if (typeof hj === \"function\" && searchTerm) {\r\n        hj(\r\n          \"event\",\r\n          `faq_searched_${searchTerm.replace(/\\s/g, \"_\").toLowerCase()}`\r\n        );\r\n      }\r\n\r\n      updateStatus(searchTerm, visibleItemsCount);\r\n    };\r\n\r\n    const debouncedSearch = debounce(handleSearch, 200);\r\n    searchInput.addEventListener(\"input\", debouncedSearch);\r\n\r\n    // ESC برای پاک کردن سریع سرچ\r\n    searchInput.addEventListener(\"keydown\", (e) => {\r\n      if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        searchInput.value = \"\";\r\n        clearSearchButton.style.display = \"none\";\r\n        handleSearch();\r\n      }\r\n    });\r\n\r\n    clearSearchButton.addEventListener(\"click\", () => {\r\n      searchInput.value = \"\";\r\n      clearSearchButton.style.display = \"none\";\r\n\r\n      // Show all FAQ items and sections again and collapse items that were opened by search\r\n      faqItems.forEach((item) => {\r\n        item.hidden = false;\r\n        if (item.open && item.dataset.openedBySearch) {\r\n          item.open = false;\r\n          delete item.dataset.openedBySearch;\r\n        }\r\n        const summary = item.querySelector(\"summary\");\r\n        if (summary) {\r\n          summary.setAttribute(\"aria-expanded\", item.open ? \"true\" : \"false\");\r\n        }\r\n      });\r\n      allSections.forEach((section) => {\r\n        section.hidden = false;\r\n      });\r\n\r\n      updateStatus(\"\", faqItems.length);\r\n\r\n      // Track clear search event in GA4\r\n      if (typeof gtag === \"function\") {\r\n        gtag(\"event\", \"faq_search_cleared\", {\r\n          event_category: \"FAQ Search\",\r\n          event_label: \"Search input cleared\",\r\n        });\r\n      }\r\n      if (typeof hj === \"function\") {\r\n        hj(\"event\", \"faq_search_cleared\");\r\n      }\r\n\r\n      searchInput.focus();\r\n    });\r\n\r\n    // وضعیت اولیه\r\n    clearSearchButton.style.display = \"none\";\r\n    updateStatus(\"\", faqItems.length);\r\n  }\r\n\r\n  // --- Accordion Logic ---\r\n  if (faqContainer && faqItems.length) {\r\n    faqContainer.addEventListener(\"click\", (event) => {\r\n      const summary = event.target.closest(\".faq-item summary\");\r\n      if (!summary) {return;}\r\n\r\n      const clickedLink = event.target.closest(\"a\");\n      if (clickedLink && summary.contains(clickedLink)) {\n        event.preventDefault();\n        window.location.href = clickedLink.href;\n        return;\n      }\n\r\n      event.preventDefault();\r\n\r\n      const item = summary.parentElement;\r\n      const questionId = item.dataset.questionId || \"unknown\";\r\n      const wasAlreadyOpen = item.open;\r\n\r\n      // بستن بقیه\r\n      faqItems.forEach((otherItem) => {\r\n        if (otherItem !== item) {\r\n          otherItem.open = false;\r\n          delete otherItem.dataset.openedByUser;\r\n          delete otherItem.dataset.openedBySearch;\r\n          const otherSummary = otherItem.querySelector(\"summary\");\r\n          if (otherSummary) {\r\n            otherSummary.setAttribute(\"aria-expanded\", \"false\");\r\n          }\r\n        }\r\n      });\r\n\r\n      if (wasAlreadyOpen) {\r\n        item.open = false;\r\n        summary.setAttribute(\"aria-expanded\", \"false\");\r\n\r\n        if (typeof gtag === \"function\") {\r\n          gtag(\"event\", \"faq_collapse\", {\r\n            event_category: \"FAQ Interaction\",\r\n            event_label: `Question collapsed: ${questionId}`,\r\n            question_text: summary.textContent.trim(),\r\n          });\r\n        }\r\n        if (typeof hj === \"function\") {\r\n          hj(\"event\", `faq_collapsed_${questionId}`);\r\n        }\r\n        delete item.dataset.openedBySearch;\r\n        delete item.dataset.openedByUser;\r\n      } else {\r\n        item.open = true;\r\n        summary.setAttribute(\"aria-expanded\", \"true\");\r\n        item.dataset.openedByUser = \"true\";\r\n        delete item.dataset.openedBySearch;\r\n\r\n        setTimeout(() => {\r\n          const rect = item.getBoundingClientRect();\r\n          if (rect.top < 0 || rect.bottom > window.innerHeight) {\r\n            item.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          }\r\n        }, 450);\r\n\r\n        if (typeof gtag === \"function\") {\r\n          gtag(\"event\", \"faq_expand\", {\r\n            event_category: \"FAQ Interaction\",\r\n            event_label: `Question expanded: ${questionId}`,\r\n            question_text: summary.textContent.trim(),\r\n          });\r\n        }\r\n        if (typeof hj === \"function\") {\r\n          hj(\"event\", `faq_expanded_${questionId}`);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Focus outlines + aria-expanded initial sync\r\n  faqItems.forEach((item) => {\r\n    const summary = item.querySelector(\"summary\");\r\n    if (!summary) {return;}\r\n\r\n    // sync aria-expanded on load\r\n    summary.setAttribute(\"aria-expanded\", item.open ? \"true\" : \"false\");\r\n\r\n    summary.addEventListener(\"focus\", () => {\r\n      const primary =\r\n        getComputedStyle(document.documentElement).getPropertyValue(\r\n          \"--primary-blue\"\r\n        ) || \"#007bff\";\r\n      summary.style.outline = `3px solid ${primary.trim()}66`;\r\n      summary.style.outlineOffset = \"5px\";\r\n    });\r\n\r\n    summary.addEventListener(\"blur\", () => {\r\n      summary.style.outline = \"none\";\r\n      summary.style.outlineOffset = \"0\";\r\n    });\r\n  });\r\n\r\n  // --- Page entry animation (Primacy Effect) با احترام به prefers-reduced-motion ---\r\n  const prefersReducedMotion = window.matchMedia\r\n    ? window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\r\n    : false;\r\n\r\n  if (!prefersReducedMotion) {\r\n    if (header) {\r\n      header.style.opacity = \"0\";\r\n      header.style.transform = \"translateY(-20px)\";\r\n      setTimeout(() => {\r\n        header.style.transition = \"opacity 1s ease-out, transform 1s ease-out\";\r\n        header.style.opacity = \"1\";\r\n        header.style.transform = \"translateY(0)\";\r\n      }, 100);\r\n    }\r\n\r\n    if (mainContent) {\r\n      mainContent.style.opacity = \"0\";\r\n      mainContent.style.transform = \"translateY(20px)\";\r\n      setTimeout(() => {\r\n        mainContent.style.transition =\r\n          \"opacity 1s ease-out, transform 1s ease-out\";\r\n        mainContent.style.opacity = \"1\";\r\n        mainContent.style.transform = \"translateY(0)\";\r\n      }, 300);\r\n    }\r\n  }\r\n});\r\n"]}