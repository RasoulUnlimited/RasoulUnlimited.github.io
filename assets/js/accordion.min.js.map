{"version":3,"file":"accordion.min.js","names":["initAccordion","root","allowMultiple","getAttribute","hasAttribute","items","Array","from","querySelectorAll","headers","toggleItem","item","header","querySelector","panel","isExpanded","forEach","otherItem","collapseItem","expandItem","setAttribute","hidden","classList","remove","dispatchEvent","CustomEvent","bubbles","detail","accordionId","dataset","add","index","accId","headerId","id","panelId","initiallyOpen","contains","push","addEventListener","e","key","preventDefault","currentIndex","indexOf","focus","length","document","acc","String"],"sources":["accordion.js"],"mappings":"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","ignoreList":[],"sourcesContent":["// js/accordion.js\r\n(function () {\r\n  \"use strict\";\r\n\r\n  /**\r\n   * Initialize a single accordion container.\r\n   * @param {HTMLElement} root\r\n   */\r\n  function initAccordion(root) {\r\n    if (!root) {return;}\r\n\r\n    const allowMultiple =\r\n      root.getAttribute(\"data-allow-multiple\") === \"true\" ||\r\n      root.hasAttribute(\"data-allow-multiple\");\r\n\r\n    const items = Array.from(root.querySelectorAll(\".accordion-item\"));\r\n    const headers = [];\r\n\r\n    // First pass: Collect all headers and setup ARIA attributes\r\n    items.forEach((item, index) => {\r\n      const header = item.querySelector(\".accordion-header\");\r\n      const panel = item.querySelector(\".accordion-content\");\r\n\r\n      if (!header || !panel) {return;}\r\n\r\n      const accId = root.dataset.accordionId || \"main\";\r\n      const headerId = header.id || `accordion-header-${accId}-${index}`;\r\n      const panelId = panel.id || `accordion-panel-${accId}-${index}`;\r\n\r\n      header.id = headerId;\r\n      panel.id = panelId;\r\n\r\n      // آیا این آیتم در HTML به صورت پیش‌فرض باز است؟\r\n      const initiallyOpen =\r\n        item.classList.contains(\"is-open\") || item.hasAttribute(\"data-open\");\r\n\r\n      // ARIA wiring\r\n      header.setAttribute(\"role\", \"button\");\r\n      header.setAttribute(\"aria-controls\", panelId);\r\n      header.setAttribute(\"aria-expanded\", initiallyOpen ? \"true\" : \"false\");\r\n      header.setAttribute(\"tabindex\", \"0\");\r\n\r\n      panel.setAttribute(\"role\", \"region\");\r\n      panel.setAttribute(\"aria-labelledby\", headerId);\r\n      panel.hidden = !initiallyOpen;\r\n\r\n      if (initiallyOpen) {\r\n        item.classList.add(\"is-open\");\r\n      } else {\r\n        item.classList.remove(\"is-open\");\r\n      }\r\n\r\n      // Add to headers array for keyboard navigation\r\n      headers.push(header);\r\n    });\r\n\r\n    // Second pass: Attach event listeners using complete headers array\r\n    items.forEach((item, index) => {\r\n      const header = item.querySelector(\".accordion-header\");\r\n      const panel = item.querySelector(\".accordion-content\");\r\n\r\n      if (!header || !panel) {return;}\r\n\r\n      // Click / keyboard handlers\r\n      header.addEventListener(\"click\", () => {\r\n        toggleItem(item, allowMultiple);\r\n      });\r\n\r\n      header.addEventListener(\"keydown\", (e) => {\r\n        const key = e.key;\r\n\r\n        if (key === \"Enter\" || key === \" \") {\r\n          e.preventDefault();\r\n          toggleItem(item, allowMultiple);\r\n          return;\r\n        }\r\n\r\n        const currentIndex = headers.indexOf(header);\r\n        if (currentIndex === -1) {return;}\r\n\r\n        if (key === \"ArrowDown\") {\r\n          e.preventDefault();\r\n          const next = headers[currentIndex + 1] || headers[0];\r\n          next.focus();\r\n        } else if (key === \"ArrowUp\") {\r\n          e.preventDefault();\r\n          const prev = headers[currentIndex - 1] || headers[headers.length - 1];\r\n          prev.focus();\r\n        } else if (key === \"Home\") {\r\n          e.preventDefault();\r\n          headers[0].focus();\r\n        } else if (key === \"End\") {\r\n          e.preventDefault();\r\n          headers[headers.length - 1].focus();\r\n        }\r\n      });\r\n    });\r\n\r\n    /**\r\n     * Toggle one accordion item\r\n     * @param {HTMLElement} item\r\n     * @param {boolean} allowMultiple\r\n     */\r\n    function toggleItem(item, allowMultiple) {\r\n      const header = item.querySelector(\".accordion-header\");\r\n      const panel = item.querySelector(\".accordion-content\");\r\n      if (!header || !panel) {return;}\r\n\r\n      const isExpanded = header.getAttribute(\"aria-expanded\") === \"true\";\r\n\r\n      if (!allowMultiple) {\r\n        items.forEach((otherItem) => {\r\n          if (otherItem === item) {return;}\r\n          collapseItem(otherItem);\r\n        });\r\n      }\r\n\r\n      if (isExpanded) {\r\n        collapseItem(item);\r\n      } else {\r\n        expandItem(item);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Collapse item\r\n     * @param {HTMLElement} item\r\n     */\r\n    function collapseItem(item) {\r\n      const header = item.querySelector(\".accordion-header\");\r\n      const panel = item.querySelector(\".accordion-content\");\r\n      if (!header || !panel) {return;}\r\n\r\n      header.setAttribute(\"aria-expanded\", \"false\");\r\n      panel.hidden = true;\r\n      item.classList.remove(\"is-open\");\r\n\r\n      // Custom event for hooks / analytics / extra animations\r\n      item.dispatchEvent(\r\n        new CustomEvent(\"accordion:collapse\", {\r\n          bubbles: true,\r\n          detail: { item, accordionId: root.dataset.accordionId },\r\n        })\r\n      );\r\n    }\r\n\r\n    /**\r\n     * Expand item\r\n     * @param {HTMLElement} item\r\n     */\r\n    function expandItem(item) {\r\n      const header = item.querySelector(\".accordion-header\");\r\n      const panel = item.querySelector(\".accordion-content\");\r\n      if (!header || !panel) {return;}\r\n\r\n      header.setAttribute(\"aria-expanded\", \"true\");\r\n      panel.hidden = false;\r\n      item.classList.add(\"is-open\");\r\n\r\n      // Custom event for hooks / analytics / extra animations\r\n      item.dispatchEvent(\r\n        new CustomEvent(\"accordion:expand\", {\r\n          bubbles: true,\r\n          detail: { item, accordionId: root.dataset.accordionId },\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", () => {\r\n    const accordions = document.querySelectorAll(\".accordion\");\r\n    accordions.forEach((acc, index) => {\r\n      if (!acc.dataset.accordionId) {\r\n        acc.dataset.accordionId = String(index + 1);\r\n      }\r\n      initAccordion(acc);\r\n    });\r\n  });\r\n})();\r\n"]}