!function(){"use strict";if("undefined"==typeof window||"undefined"==typeof document)return;const e=new Map,t={fa:{empty:"هنوز بازخورد منتخب منتشر نشده است.",errorPrefix:"نمایش بازخوردهای منتخب ممکن نبود.",sourceCta:"مشاهده همه گفتگوها",authorFallback:"کاربر GitHub",roleFallback:"بازدیدکننده"},en:{empty:"No featured feedback has been published yet.",errorPrefix:"Featured feedback could not be loaded.",sourceCta:"View all discussions",authorFallback:"GitHub user",roleFallback:"Visitor"}};function a(e,t,a){const r=document.createElement("article");r.className="featured-feedback-card",r.setAttribute("data-featured-feedback-item",e.id||""),r.setAttribute("data-feedback-lang",t);const n=document.createElement("p");n.className="featured-feedback-quote",n.textContent=e.quote||"",r.appendChild(n);const d=document.createElement("div");d.className="featured-feedback-meta";const c=document.createElement("div"),o=document.createElement("div");o.className="featured-feedback-author",o.textContent=e.author||a.authorFallback;const u=document.createElement("div");u.className="featured-feedback-role",u.textContent=e.role||a.roleFallback,c.appendChild(o),c.appendChild(u),d.appendChild(c);const s=document.createElement("a");s.className="featured-feedback-link",s.target="_blank",s.rel="noopener noreferrer",s.href=e.source_url||"#",s.textContent=e.source_label||a.sourceCta,d.appendChild(s),r.appendChild(d);const i=function(e,t){if(!e)return"";const a=new Date(e);if(Number.isNaN(a.getTime()))return"";const r="fa"===t?"fa-IR":"en-US";try{return new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric"}).format(a)}catch{return e}}(e.date,t);if(i){const t=document.createElement("time");t.className="featured-feedback-date",t.dateTime=e.date,t.textContent=i,r.appendChild(t)}return r}async function r(r){if(!r)return;const n=function(e){return(e.dataset.featuredFeedbackLang||document.documentElement.lang||"en").toLowerCase().startsWith("fa")?"fa":"en"}(r),d=t[n],c=r.dataset.featuredFeedbackSource||"",o=r.dataset.featuredFeedbackFallback||"";r.dataset.featuredFeedbackStatus="loading",function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(r);try{const t=(await async function(t){if(!t)throw new Error("missing-source");if(e.has(t))return e.get(t);const a=fetch(t,{cache:"no-store"}).then(e=>{if(!e.ok)throw new Error(`http-${e.status}`);return e.json()}).then(e=>{if(!e||!Array.isArray(e.items))throw new Error("invalid-shape");return e.items});return e.set(t,a),a}(c)).filter(e=>e&&e.lang===n).slice(0,3);if(!t.length)return void function(e,t){const a=document.createElement("p");a.className="featured-feedback-empty",a.textContent=t.empty,e.appendChild(a),e.dataset.featuredFeedbackStatus="empty"}(r,d);t.forEach(e=>{r.appendChild(a(e,n,d))}),r.dataset.featuredFeedbackStatus="ready",r.dispatchEvent(new CustomEvent("featured-feedback:ready",{bubbles:!0}))}catch{!function(e,t,a){const r=document.createElement("p");if(r.className="featured-feedback-error",r.textContent=`${t.errorPrefix} `,a){const e=document.createElement("a");e.className="featured-feedback-link",e.href=a,e.target="_blank",e.rel="noopener noreferrer",e.textContent=t.sourceCta,r.appendChild(e)}e.appendChild(r),e.dataset.featuredFeedbackStatus="error"}(r,d,o),r.dispatchEvent(new CustomEvent("featured-feedback:error",{bubbles:!0}))}}function n(){const e=Array.from(document.querySelectorAll("[data-featured-feedback-root]"));e.length&&e.forEach(e=>{r(e)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n,{once:!0}):n()}();
//# sourceMappingURL=featured-feedback.min.js.map
