!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){"function"!=typeof window.createToast&&(window.createToast=function(e){const t=document.createElement("div");t.className="toast-notification",t.textContent=e,t.style.cssText="\n          position: fixed;\n          bottom: 20px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: rgba(0,0,0,0.8);\n          color: white;\n          padding: 10px 20px;\n          border-radius: 20px;\n          z-index: 10000;\n          opacity: 0;\n          transition: opacity 0.3s;\n          font-family: inherit;\n          font-size: 0.9rem;\n        ",document.body.appendChild(t),requestAnimationFrame(()=>t.style.opacity="1"),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},3e3)});const e=document.getElementById("faq-search"),t=document.getElementById("clear-search"),o=Array.from(document.querySelectorAll(".faq-item")),a=document.getElementById("expand-all-faq"),n=document.getElementById("collapse-all-faq");if(!e||!t||!o.length)return;let s,r=document.getElementById("faq-search-status");r||(r=document.createElement("div"),r.id="faq-search-status",r.setAttribute("aria-live","polite"),r.setAttribute("aria-atomic","true"),r.className="faq-search-status sr-only",(e.closest("form")||e.parentNode).appendChild(r)),t.getAttribute("aria-label")||t.setAttribute("aria-label","پاک کردن جستجو");const c=new Map;function i(e,t){if(!e)return;if(c.has(e)&&(e.innerHTML=c.get(e)),!t)return;const o=e.innerHTML,a=(new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),o.replace(new RegExp(`(?![^<]+>)(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),'<span class="highlight-term">$1</span>'));e.innerHTML=a}function l(a){const n=((void 0!==a?a:e.value)||"").trim().toLowerCase(),s=n.length>0;let c=0;o.forEach(e=>{const t=e.querySelector(".accordion-header h3")||e.querySelector("summary"),o=e.querySelector(".accordion-content")||e.querySelector(".faq-answer"),a=!e.tagName||"details"!==e.tagName.toLowerCase(),r=t?t.textContent.toLowerCase():"",l=o?o.textContent.toLowerCase():"",d=(e.dataset.keywords||"").toLowerCase();if(!s||r.includes(n)||l.includes(n)||d.includes(n)){if(e.hidden=!1,e.style.display="",c++,t&&i(t,s?n:null),o&&i(o,s?n:null),s)if(a){if(!e.classList.contains("is-open")){e.classList.add("is-open");const t=e.querySelector(".accordion-header");t&&t.setAttribute("aria-expanded","true"),e.dataset.openedBySearch="true",o&&(o.style.maxHeight=o.scrollHeight+50+"px",o.style.opacity="1")}}else e.open||(e.open=!0,e.dataset.openedBySearch="true");if(!s&&e.dataset.openedBySearch){if(a){e.classList.remove("is-open");const t=e.querySelector(".accordion-header");t&&t.setAttribute("aria-expanded","false"),o&&(o.style.maxHeight=null,o.style.opacity="0")}else e.open=!1;delete e.dataset.openedBySearch}}else e.hidden=!0,e.style.display="none"});const l=document.getElementById("faq-no-results");l&&(l.style.display=0===c?"block":"none"),t.style.display=s?"block":"none",function(e,t){const a=o.length,n=e.trim();r.textContent=n?0===t?`نتیجه‌ای برای «${n}» یافت نشد.`:`${t} نتیجه برای «${n}» پیدا شد.`:`نمایش همه ${a} سوال.`}(n,c)}if(o.forEach(e=>{const t=e.querySelector(".accordion-header h3")||e.querySelector("summary"),o=e.querySelector(".accordion-content")||e.querySelector(".faq-answer");t&&c.set(t,t.innerHTML),o&&c.set(o,o.innerHTML)}),e.addEventListener("input",function(){clearTimeout(s),s=setTimeout(()=>l(),300)}),e.addEventListener("keydown",t=>{"Escape"===t.key&&(t.preventDefault(),e.value="",l(),e.focus())}),t.addEventListener("click",function(){e.value="",l(),e.focus()}),a&&a.addEventListener("click",()=>{o.forEach(e=>{if(!e.hidden&&"none"!==e.style.display)if(e.tagName&&"details"===e.tagName.toLowerCase())e.open=!0;else{e.classList.add("is-open");const t=e.querySelector(".accordion-header"),o=e.querySelector(".accordion-content");t&&t.setAttribute("aria-expanded","true"),o&&(o.style.maxHeight=o.scrollHeight+50+"px",o.style.opacity="1")}}),a.setAttribute("aria-pressed","true"),n&&n.setAttribute("aria-pressed","false")}),n&&n.addEventListener("click",()=>{o.forEach(e=>{if(!e.hidden&&"none"!==e.style.display)if(e.tagName&&"details"===e.tagName.toLowerCase())e.open=!1;else{e.classList.remove("is-open");const t=e.querySelector(".accordion-header"),o=e.querySelector(".accordion-content");t&&t.setAttribute("aria-expanded","false"),o&&(o.style.maxHeight=null,o.style.opacity="0")}}),n.setAttribute("aria-pressed","true"),a&&a.setAttribute("aria-pressed","false")}),document.querySelectorAll(".copy-faq-link").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const o=e.dataset.link;if(!o)return;const a=window.location.origin+window.location.pathname+o;navigator.clipboard.writeText(a).then(()=>{const t=e.innerHTML;e.innerHTML='<i class="fas fa-check"></i>',e.style.color="#2ecc71",window.createToast&&window.createToast("لینک کپی شد!"),setTimeout(()=>{e.innerHTML=t,e.style.color=""},2e3)}).catch(e=>{})})}),document.querySelectorAll(".faq-item").forEach(e=>{const t=e.id,o=localStorage.getItem(`faq-feedback-${t}`);if(o){const t=e.querySelector(`.btn-feedback.${o}`);t&&t.classList.add("active")}}),document.querySelectorAll(".btn-feedback").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const o=e.closest(".faq-feedback"),a=e.closest(".faq-item").id;o.querySelectorAll(".btn-feedback").forEach(e=>e.classList.remove("active")),e.classList.add("active");const n=e.classList.contains("up");localStorage.setItem(`faq-feedback-${a}`,n?"up":"down");const s=o.querySelector(".feedback-label");if(s){const t="آیا این پاسخ مفید بود؟";s.textContent="بازخورد شما ثبت شد. ممنون!",s.style.color="#27ae60",s.style.fontWeight="bold",setTimeout(()=>{s.textContent=t,s.style.color="",s.style.fontWeight="",e.classList.remove("active")},3e3)}e.closest(".faq-item").id,window.createToast&&window.createToast("بازخورد شما ثبت شد. ممنون!")})}),window.location.hash){const e=window.location.hash.substring(1),t=document.getElementById(e);t&&t.classList.contains("faq-item")&&setTimeout(()=>{if(t.tagName&&"details"===t.tagName.toLowerCase())t.open=!0;else{t.classList.add("is-open");const e=t.querySelector(".accordion-header"),o=t.querySelector(".accordion-content");e&&e.setAttribute("aria-expanded","true"),o&&(o.style.maxHeight=o.scrollHeight+50+"px",o.style.opacity="1")}t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.transition="background-color 0.5s";const e=t.style.backgroundColor;t.style.backgroundColor="rgba(52, 152, 219, 0.1)",setTimeout(()=>{t.style.backgroundColor=e},1500)},500)}})}();
//# sourceMappingURL=faq-search.min.js.map
