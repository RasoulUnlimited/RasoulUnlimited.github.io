!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("faq-search"),t=document.getElementById("clear-search"),a=Array.from(document.querySelectorAll(".faq-item")),n=document.getElementById("expand-all-faq"),r=document.getElementById("collapse-all-faq");if(!e||!t||!a.length)return;let s,o=document.getElementById("faq-search-status");o||(o=document.createElement("div"),o.id="faq-search-status",o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),o.className="faq-search-status sr-only",(e.closest("form")||e.parentNode).appendChild(o)),t.getAttribute("aria-label")||t.setAttribute("aria-label","پاک کردن جستجو");const i=new Map;function c(e,t){if(!e)return;if(i.has(e)&&(e.innerHTML=i.get(e)),!t)return;const a=e.innerHTML,n=(new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),a.replace(new RegExp(`(?![^<]+>)(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),'<span class="highlight-term">$1</span>'));e.innerHTML=n}function d(n){const r=((void 0!==n?n:e.value)||"").trim().toLowerCase(),s=r.length>0;let i=0;a.forEach(e=>{const t=e.querySelector(".accordion-header h3")||e.querySelector("summary"),a=e.querySelector(".accordion-content")||e.querySelector(".faq-answer"),n=!e.tagName||"details"!==e.tagName.toLowerCase(),o=t?t.textContent.toLowerCase():"",d=a?a.textContent.toLowerCase():"",l=(e.dataset.keywords||"").toLowerCase();if(!s||o.includes(r)||d.includes(r)||l.includes(r)){if(e.hidden=!1,e.style.display="",i++,t&&c(t,s?r:null),a&&c(a,s?r:null),s)if(n){if(!e.classList.contains("is-open")){e.classList.add("is-open");const t=e.querySelector(".accordion-header");t&&t.setAttribute("aria-expanded","true"),e.dataset.openedBySearch="true",a&&(a.hidden=!1)}}else e.open||(e.open=!0,e.dataset.openedBySearch="true");if(!s&&e.dataset.openedBySearch){if(n){e.classList.remove("is-open");const t=e.querySelector(".accordion-header");t&&t.setAttribute("aria-expanded","false"),a&&(a.hidden=!0)}else e.open=!1;delete e.dataset.openedBySearch}}else e.hidden=!0,e.style.display="none"});const d=document.getElementById("faq-no-results");d&&(d.style.display=0===i?"block":"none"),t.style.display=s?"block":"none",function(e,t){const n=a.length,r=e.trim();o.textContent=r?0===t?`نتیجه‌ای برای «${r}» یافت نشد.`:`${t} نتیجه برای «${r}» پیدا شد.`:`نمایش همه ${n} سوال.`}(r,i)}a.forEach(e=>{const t=e.querySelector(".accordion-header h3")||e.querySelector("summary"),a=e.querySelector(".accordion-content")||e.querySelector(".faq-answer");t&&i.set(t,t.innerHTML),a&&i.set(a,a.innerHTML)}),e.addEventListener("input",function(){clearTimeout(s),s=setTimeout(()=>d(),300)}),e.addEventListener("keydown",t=>{"Escape"===t.key&&(t.preventDefault(),e.value="",d(),e.focus())}),t.addEventListener("click",function(){e.value="",d(),e.focus()}),n&&n.addEventListener("click",()=>{a.forEach(e=>{if(!e.hidden&&"none"!==e.style.display)if(e.tagName&&"details"===e.tagName.toLowerCase())e.open=!0;else{e.classList.add("is-open");const t=e.querySelector(".accordion-header"),a=e.querySelector(".accordion-content");t&&t.setAttribute("aria-expanded","true"),a&&(a.hidden=!1)}}),n.setAttribute("aria-pressed","true"),r&&r.setAttribute("aria-pressed","false")}),r&&r.addEventListener("click",()=>{a.forEach(e=>{if(!e.hidden&&"none"!==e.style.display)if(e.tagName&&"details"===e.tagName.toLowerCase())e.open=!1;else{e.classList.remove("is-open");const t=e.querySelector(".accordion-header"),a=e.querySelector(".accordion-content");t&&t.setAttribute("aria-expanded","false"),a&&(a.hidden=!0)}}),r.setAttribute("aria-pressed","true"),n&&n.setAttribute("aria-pressed","false")})})}();
//# sourceMappingURL=faq-search.min.js.map
