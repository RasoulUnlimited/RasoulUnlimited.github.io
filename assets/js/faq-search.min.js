!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("faq");if(!e)return;const t=document.body.getAttribute("data-lang")||document.documentElement.lang||"",o=String(t).toLowerCase().startsWith("fa")?{clearSearch:"پاک کردن جستجو",showAll:e=>`نمایش همه ${e} سوال.`,noResult:e=>`نتیجه‌ای برای «${e}» یافت نشد.`,matchCount:(e,t)=>`${e} نتیجه برای «${t}» پیدا شد.`,copyUnsupported:"مرورگر شما از کپی پشتیبانی نمی‌کند.",copySuccess:"لینک کپی شد.",copyFailed:"کپی لینک انجام نشد.",feedbackSaved:"بازخورد شما ثبت شد. ممنون!"}:{clearSearch:"Clear search",showAll:e=>`Showing all ${e} questions.`,noResult:e=>`No results found for "${e}".`,matchCount:(e,t)=>`${e} result(s) found for "${t}".`,copyUnsupported:"Your browser does not support clipboard copy.",copySuccess:"Link copied.",copyFailed:"Could not copy the link.",feedbackSaved:"Your feedback was saved. Thank you!"};const a=function(){try{const e="__faq_storage_probe__";return localStorage.setItem(e,"1"),localStorage.removeItem(e),localStorage}catch{return null}}();function n(e,t){if(e){if("function"==typeof window.createToast)try{return void window.createToast(e,t)}catch{}!function(e){const t=document.createElement("div");t.className="toast-notification",t.textContent=e,t.style.cssText=["position:fixed","bottom:20px","left:50%","transform:translateX(-50%)","background:rgba(0,0,0,0.8)","color:#fff","padding:10px 20px","border-radius:20px","z-index:10000","opacity:0","transition:opacity 0.3s","font-family:inherit","font-size:0.9rem"].join(";"),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1"}),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},2200)}(e)}}const r=e=>String(e||"").normalize("NFC").replace(/[ي]/g,"ی").replace(/[ك]/g,"ک").replace(/[\u064B-\u065F\u0670]/g,"").replace(/[\u200c\u200d]/g,"").toLowerCase(),c=e.querySelector("#faq-search"),i=e.querySelector("#clear-search"),s=Array.from(e.querySelectorAll(".faq-item")),d=e.querySelector("#expand-all-faq"),l=e.querySelector("#collapse-all-faq"),u=e.querySelector("#faq-no-results"),p=e.querySelector("#faq-container.accordion")||e.querySelector(".faq-container.accordion");if(!c||!i||!s.length)return;p&&!p.hasAttribute("data-allow-multiple")&&p.setAttribute("data-allow-multiple","true");let f=e.querySelector("#faq-search-status");f||(f=document.createElement("div"),f.id="faq-search-status",f.className="visually-hidden",f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true"),(c.closest("form")||c.parentNode).appendChild(f)),i.getAttribute("aria-label")||i.setAttribute("aria-label",o.clearSearch);const y=e=>!e.hidden&&"none"!==e.style.display,h=e=>e.querySelector(".accordion-header"),m=e=>e.querySelector(".accordion-content")||e.querySelector(".faq-answer"),b=e=>{if(window.Accordion&&p&&e.id){if(window.Accordion.open(p,e.id))return}e.classList.add("is-open");const t=h(e),o=m(e);t&&t.setAttribute("aria-expanded","true"),o&&o.setAttribute("aria-hidden","false")},q=e=>{if(window.Accordion&&p&&e.id){if(window.Accordion.close(p,e.id))return}e.classList.remove("is-open");const t=h(e),o=m(e);t&&t.setAttribute("aria-expanded","false"),o&&o.setAttribute("aria-hidden","true")};async function S(e){const t=!(!navigator.clipboard||!navigator.clipboard.writeText);if(t)try{return await navigator.clipboard.writeText(e),{ok:!0,mode:"clipboard"}}catch{}const o=function(e){if(!document.body)return!1;const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.select();try{return!!document.execCommand("copy")}catch{return!1}finally{t.remove()}}(e);return o?{ok:!0,mode:"execCommand"}:{ok:!1,mode:t?"clipboard-failed":"unsupported"}}const w=(e,t)=>{if(!e)return;if((e=>{e&&e.querySelectorAll(".highlight-term").forEach(e=>{const t=e.parentNode;t&&(t.replaceChild(document.createTextNode(e.textContent||""),e),t.normalize())})})(e),!t)return;const o=r(t);if(!o)return;const a=o.split("").map(e=>{const t=String(e||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return"ی"===e?"[یي]":"ک"===e?"[کك]":t}).join("[\\u064B-\\u065F\\u0670\\u200c\\u200d]*"),n=new RegExp(`(${a})`,"i"),c=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=[];for(;c.nextNode();){const e=c.currentNode,t=e.parentNode;t&&e.nodeValue&&(t.classList&&t.classList.contains("highlight-term")||n.test(e.nodeValue)&&i.push(e))}i.forEach(e=>{const t=document.createDocumentFragment();e.nodeValue.split(n).forEach((e,o)=>{if(e)if(o%2==1){const o=document.createElement("span");o.className="highlight-term",o.textContent=e,t.appendChild(o)}else t.appendChild(document.createTextNode(e))}),e.parentNode&&e.parentNode.replaceChild(t,e)})},g=e=>{const t=void 0!==e?e:c.value,a=r(t),n=a.length>0;let d=0;s.forEach(e=>{const t=e.querySelector(".accordion-header .faq-question")||e.querySelector(".faq-question"),o=m(e),c=r(t?.textContent||""),i=r(o?.textContent||""),s=r(e.dataset.keywords||"");if(!(!n||c.includes(a)||i.includes(a)||s.includes(a)))return e.hidden=!0,void(e.style.display="none");d+=1,e.hidden=!1,e.style.display="",w(t,n?a:""),w(o,n?a:""),n&&!(e=>{if(window.Accordion&&p&&e.id){const t=window.Accordion.isOpen(p,e.id);if("boolean"==typeof t)return t}const t=h(e);return e.classList.contains("is-open")||t&&"true"===t.getAttribute("aria-expanded")})(e)&&(b(e),e.dataset.openedBySearch="true"),!n&&e.dataset.openedBySearch&&(q(e),delete e.dataset.openedBySearch)}),u&&(u.hidden=0!==d,u.style.display=0===d?"block":"none"),i.style.display=n?"block":"none",((e,t)=>{const a=s.length,n=String(e||"").trim();f.textContent=n?0===t?o.noResult(n):o.matchCount(t,n):o.showAll(a)})(t,d)};let v=null;if(c.addEventListener("input",()=>{clearTimeout(v),v=setTimeout(()=>g(),280)}),c.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),c.value="",g(""),c.focus())}),i.addEventListener("click",()=>{c.value="",g(""),c.focus()}),d&&d.addEventListener("click",()=>{s.forEach(e=>{y(e)&&(b(e),delete e.dataset.openedBySearch)}),d.setAttribute("aria-pressed","true"),l&&l.setAttribute("aria-pressed","false")}),l&&l.addEventListener("click",()=>{s.forEach(e=>{y(e)&&(q(e),delete e.dataset.openedBySearch)}),l.setAttribute("aria-pressed","true"),d&&d.setAttribute("aria-pressed","false")}),e.querySelectorAll(".copy-faq-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const a=e.dataset.link;if(!a)return;S(window.location.origin+window.location.pathname+a).then(t=>{if(!t.ok)return void("unsupported"===t.mode?n(o.copyUnsupported,{id:"faq-copy-unsupported-toast",kind:"info",duration:3e3}):n(o.copyFailed,{id:"faq-copy-failed-toast",kind:"error",duration:2600}));const a=e.innerHTML;e.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',e.classList.add("copied"),n(o.copySuccess,{id:"faq-copy-success-toast",kind:"success",duration:1800}),setTimeout(()=>{e.innerHTML=a,e.classList.remove("copied")},1800)}).catch(()=>n(o.copyFailed,{id:"faq-copy-failed-toast",kind:"error",duration:2600}))})}),e.querySelectorAll(".faq-item").forEach(e=>{const t=function(e){if(!a)return null;try{return a.getItem(e)}catch{return null}}(`faq-feedback-${e.id}`);if(!t)return;const o=e.querySelector(`.btn-feedback.${t}`);o&&o.classList.add("active")}),e.querySelectorAll(".btn-feedback").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const r=e.closest(".faq-feedback"),c=e.closest(".faq-item");if(!r||!c)return;r.querySelectorAll(".btn-feedback").forEach(e=>{e.classList.remove("active")}),e.classList.add("active");const i=e.classList.contains("up")?"up":"down";!function(e,t){if(!a)return!1;try{return a.setItem(e,t),!0}catch{return!1}}(`faq-feedback-${c.id}`,i);const s=r.querySelector(".feedback-label");if(s){const t=s.dataset.originalText||s.textContent||"";s.dataset.originalText=t,s.textContent=o.feedbackSaved,setTimeout(()=>{s.textContent=t,e.classList.remove("active")},3e3)}n(o.feedbackSaved,{id:"faq-feedback-saved-toast",kind:"success",duration:2400})})}),window.location.hash){const t=window.location.hash.slice(1),o=window.CSS&&"function"==typeof window.CSS.escape?window.CSS.escape(t):t.replace(/([ #;?%&,.+*~':"!^$[\]()=>|/@])/g,"\\$1"),a=e.querySelector(`#${o}`);a&&a.classList.contains("faq-item")&&setTimeout(()=>{b(a),a.scrollIntoView({behavior:"smooth",block:"center"})},360)}g("")})}();
//# sourceMappingURL=faq-search.min.js.map
