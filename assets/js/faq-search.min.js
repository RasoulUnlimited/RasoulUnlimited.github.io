!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("faq");if(!e)return;const t=document.body.getAttribute("data-lang")||document.documentElement.lang||"",o=String(t).toLowerCase().startsWith("fa")?{clearSearch:"پاک کردن جستجو",showAll:e=>`نمایش همه ${e} سوال.`,noResult:e=>`نتیجه‌ای برای «${e}» یافت نشد.`,matchCount:(e,t)=>`${e} نتیجه برای «${t}» پیدا شد.`,copyUnsupported:"مرورگر شما از کپی پشتیبانی نمی‌کند.",copySuccess:"لینک کپی شد.",copyFailed:"کپی لینک انجام نشد.",feedbackSaved:"بازخورد شما ثبت شد. ممنون!"}:{clearSearch:"Clear search",showAll:e=>`Showing all ${e} questions.`,noResult:e=>`No results found for "${e}".`,matchCount:(e,t)=>`${e} result(s) found for "${t}".`,copyUnsupported:"Your browser does not support clipboard copy.",copySuccess:"Link copied.",copyFailed:"Could not copy the link.",feedbackSaved:"Your feedback was saved. Thank you!"};const a=function(){try{const e="__faq_storage_probe__";return localStorage.setItem(e,"1"),localStorage.removeItem(e),localStorage}catch{return null}}();"function"!=typeof window.createToast&&(window.createToast=function(e){const t=document.createElement("div");t.className="toast-notification",t.textContent=e,t.style.cssText=["position:fixed","bottom:20px","left:50%","transform:translateX(-50%)","background:rgba(0,0,0,0.8)","color:#fff","padding:10px 20px","border-radius:20px","z-index:10000","opacity:0","transition:opacity 0.3s","font-family:inherit","font-size:0.9rem"].join(";"),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1"}),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},2200)});const n=e=>String(e||"").normalize("NFC").replace(/[ي]/g,"ی").replace(/[ك]/g,"ک").replace(/[\u064B-\u065F\u0670]/g,"").replace(/[\u200c\u200d]/g,"").toLowerCase(),r=e.querySelector("#faq-search"),c=e.querySelector("#clear-search"),i=Array.from(e.querySelectorAll(".faq-item")),s=e.querySelector("#expand-all-faq"),d=e.querySelector("#collapse-all-faq"),l=e.querySelector("#faq-no-results"),u=e.querySelector("#faq-container.accordion")||e.querySelector(".faq-container.accordion");if(!r||!c||!i.length)return;u&&!u.hasAttribute("data-allow-multiple")&&u.setAttribute("data-allow-multiple","true");let p=e.querySelector("#faq-search-status");p||(p=document.createElement("div"),p.id="faq-search-status",p.className="visually-hidden",p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true"),(r.closest("form")||r.parentNode).appendChild(p)),c.getAttribute("aria-label")||c.setAttribute("aria-label",o.clearSearch);const f=e=>!e.hidden&&"none"!==e.style.display,y=e=>e.querySelector(".accordion-header"),h=e=>e.querySelector(".accordion-content")||e.querySelector(".faq-answer"),m=e=>{if(window.Accordion&&u&&e.id){if(window.Accordion.open(u,e.id))return}e.classList.add("is-open");const t=y(e),o=h(e);t&&t.setAttribute("aria-expanded","true"),o&&o.setAttribute("aria-hidden","false")},w=e=>{if(window.Accordion&&u&&e.id){if(window.Accordion.close(u,e.id))return}e.classList.remove("is-open");const t=y(e),o=h(e);t&&t.setAttribute("aria-expanded","false"),o&&o.setAttribute("aria-hidden","true")};async function b(e){const t=!(!navigator.clipboard||!navigator.clipboard.writeText);if(t)try{return await navigator.clipboard.writeText(e),{ok:!0,mode:"clipboard"}}catch{}const o=function(e){if(!document.body)return!1;const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.select();try{return!!document.execCommand("copy")}catch{return!1}finally{t.remove()}}(e);return o?{ok:!0,mode:"execCommand"}:{ok:!1,mode:t?"clipboard-failed":"unsupported"}}const S=(e,t)=>{if(!e)return;if((e=>{e&&e.querySelectorAll(".highlight-term").forEach(e=>{const t=e.parentNode;t&&(t.replaceChild(document.createTextNode(e.textContent||""),e),t.normalize())})})(e),!t)return;const o=n(t);if(!o)return;const a=o.split("").map(e=>{const t=String(e||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return"ی"===e?"[یي]":"ک"===e?"[کك]":t}).join("[\\u064B-\\u065F\\u0670\\u200c\\u200d]*"),r=new RegExp(`(${a})`,"i"),c=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=[];for(;c.nextNode();){const e=c.currentNode,t=e.parentNode;t&&e.nodeValue&&(t.classList&&t.classList.contains("highlight-term")||r.test(e.nodeValue)&&i.push(e))}i.forEach(e=>{const t=document.createDocumentFragment();e.nodeValue.split(r).forEach((e,o)=>{if(e)if(o%2==1){const o=document.createElement("span");o.className="highlight-term",o.textContent=e,t.appendChild(o)}else t.appendChild(document.createTextNode(e))}),e.parentNode&&e.parentNode.replaceChild(t,e)})},q=e=>{const t=void 0!==e?e:r.value,a=n(t),s=a.length>0;let d=0;i.forEach(e=>{const t=e.querySelector(".accordion-header .faq-question")||e.querySelector(".faq-question"),o=h(e),r=n(t?.textContent||""),c=n(o?.textContent||""),i=n(e.dataset.keywords||"");if(!(!s||r.includes(a)||c.includes(a)||i.includes(a)))return e.hidden=!0,void(e.style.display="none");d+=1,e.hidden=!1,e.style.display="",S(t,s?a:""),S(o,s?a:""),s&&!(e=>{if(window.Accordion&&u&&e.id){const t=window.Accordion.isOpen(u,e.id);if("boolean"==typeof t)return t}const t=y(e);return e.classList.contains("is-open")||t&&"true"===t.getAttribute("aria-expanded")})(e)&&(m(e),e.dataset.openedBySearch="true"),!s&&e.dataset.openedBySearch&&(w(e),delete e.dataset.openedBySearch)}),l&&(l.hidden=0!==d,l.style.display=0===d?"block":"none"),c.style.display=s?"block":"none",((e,t)=>{const a=i.length,n=String(e||"").trim();p.textContent=n?0===t?o.noResult(n):o.matchCount(t,n):o.showAll(a)})(t,d)};let g=null;if(r.addEventListener("input",()=>{clearTimeout(g),g=setTimeout(()=>q(),280)}),r.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),r.value="",q(""),r.focus())}),c.addEventListener("click",()=>{r.value="",q(""),r.focus()}),s&&s.addEventListener("click",()=>{i.forEach(e=>{f(e)&&(m(e),delete e.dataset.openedBySearch)}),s.setAttribute("aria-pressed","true"),d&&d.setAttribute("aria-pressed","false")}),d&&d.addEventListener("click",()=>{i.forEach(e=>{f(e)&&(w(e),delete e.dataset.openedBySearch)}),d.setAttribute("aria-pressed","true"),s&&s.setAttribute("aria-pressed","false")}),e.querySelectorAll(".copy-faq-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const a=e.dataset.link;if(!a)return;b(window.location.origin+window.location.pathname+a).then(t=>{if(!t.ok)return void("unsupported"===t.mode?window.createToast(o.copyUnsupported):window.createToast(o.copyFailed));const a=e.innerHTML;e.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',e.classList.add("copied"),window.createToast(o.copySuccess),setTimeout(()=>{e.innerHTML=a,e.classList.remove("copied")},1800)}).catch(()=>window.createToast(o.copyFailed))})}),e.querySelectorAll(".faq-item").forEach(e=>{const t=function(e){if(!a)return null;try{return a.getItem(e)}catch{return null}}(`faq-feedback-${e.id}`);if(!t)return;const o=e.querySelector(`.btn-feedback.${t}`);o&&o.classList.add("active")}),e.querySelectorAll(".btn-feedback").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=e.closest(".faq-feedback"),r=e.closest(".faq-item");if(!n||!r)return;n.querySelectorAll(".btn-feedback").forEach(e=>{e.classList.remove("active")}),e.classList.add("active");const c=e.classList.contains("up")?"up":"down";!function(e,t){if(!a)return!1;try{return a.setItem(e,t),!0}catch{return!1}}(`faq-feedback-${r.id}`,c);const i=n.querySelector(".feedback-label");if(i){const t=i.dataset.originalText||i.textContent||"";i.dataset.originalText=t,i.textContent=o.feedbackSaved,setTimeout(()=>{i.textContent=t,e.classList.remove("active")},3e3)}window.createToast(o.feedbackSaved)})}),window.location.hash){const t=window.location.hash.slice(1),o=window.CSS&&"function"==typeof window.CSS.escape?window.CSS.escape(t):t.replace(/([ #;?%&,.+*~':"!^$[\]()=>|/@])/g,"\\$1"),a=e.querySelector(`#${o}`);a&&a.classList.contains("faq-item")&&setTimeout(()=>{m(a),a.scrollIntoView({behavior:"smooth",block:"center"})},360)}q("")})}();
//# sourceMappingURL=faq-search.min.js.map
