!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("faq");if(!e)return;const t=document.body.getAttribute("data-lang")||document.documentElement.lang||"",o=String(t).toLowerCase().startsWith("fa")?{clearSearch:"پاک کردن جستجو",showAll:e=>`نمایش همه ${e} سوال.`,noResult:e=>`نتیجه‌ای برای «${e}» یافت نشد.`,matchCount:(e,t)=>`${e} نتیجه برای «${t}» پیدا شد.`,copyUnsupported:"مرورگر شما از کپی پشتیبانی نمی‌کند.",copySuccess:"لینک کپی شد.",copyFailed:"کپی لینک انجام نشد.",feedbackSaved:"بازخورد شما ثبت شد. ممنون!"}:{clearSearch:"Clear search",showAll:e=>`Showing all ${e} questions.`,noResult:e=>`No results found for "${e}".`,matchCount:(e,t)=>`${e} result(s) found for "${t}".`,copyUnsupported:"Your browser does not support clipboard copy.",copySuccess:"Link copied.",copyFailed:"Could not copy the link.",feedbackSaved:"Your feedback was saved. Thank you!"};"function"!=typeof window.createToast&&(window.createToast=function(e){const t=document.createElement("div");t.className="toast-notification",t.textContent=e,t.style.cssText=["position:fixed","bottom:20px","left:50%","transform:translateX(-50%)","background:rgba(0,0,0,0.8)","color:#fff","padding:10px 20px","border-radius:20px","z-index:10000","opacity:0","transition:opacity 0.3s","font-family:inherit","font-size:0.9rem"].join(";"),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1"}),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},2200)});const a=e=>String(e||"").normalize("NFC").replace(/[ي]/g,"ی").replace(/[ك]/g,"ک").replace(/[\u064B-\u065F\u0670]/g,"").replace(/[\u200c\u200d]/g,"").toLowerCase(),n=e.querySelector("#faq-search"),r=e.querySelector("#clear-search"),i=Array.from(e.querySelectorAll(".faq-item")),c=e.querySelector("#expand-all-faq"),s=e.querySelector("#collapse-all-faq"),d=e.querySelector("#faq-no-results"),l=e.querySelector("#faq-container.accordion")||e.querySelector(".faq-container.accordion");if(!n||!r||!i.length)return;l&&!l.hasAttribute("data-allow-multiple")&&l.setAttribute("data-allow-multiple","true");let u=e.querySelector("#faq-search-status");u||(u=document.createElement("div"),u.id="faq-search-status",u.className="visually-hidden",u.setAttribute("aria-live","polite"),u.setAttribute("aria-atomic","true"),(n.closest("form")||n.parentNode).appendChild(u)),r.getAttribute("aria-label")||r.setAttribute("aria-label",o.clearSearch);const p=e=>!e.hidden&&"none"!==e.style.display,f=e=>e.querySelector(".accordion-header"),h=e=>e.querySelector(".accordion-content")||e.querySelector(".faq-answer"),y=e=>{if(window.Accordion&&l&&e.id){if(window.Accordion.open(l,e.id))return}e.classList.add("is-open");const t=f(e),o=h(e);t&&t.setAttribute("aria-expanded","true"),o&&o.setAttribute("aria-hidden","false")},m=e=>{if(window.Accordion&&l&&e.id){if(window.Accordion.close(l,e.id))return}e.classList.remove("is-open");const t=f(e),o=h(e);t&&t.setAttribute("aria-expanded","false"),o&&o.setAttribute("aria-hidden","true")},w=(e,t)=>{if(!e)return;if((e=>{e&&e.querySelectorAll(".highlight-term").forEach(e=>{const t=e.parentNode;t&&(t.replaceChild(document.createTextNode(e.textContent||""),e),t.normalize())})})(e),!t)return;const o=a(t);if(!o)return;const n=o.split("").map(e=>{const t=String(e||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return"ی"===e?"[یي]":"ک"===e?"[کك]":t}).join("[\\u064B-\\u065F\\u0670\\u200c\\u200d]*"),r=new RegExp(`(${n})`,"i"),i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),c=[];for(;i.nextNode();){const e=i.currentNode,t=e.parentNode;t&&e.nodeValue&&(t.classList&&t.classList.contains("highlight-term")||r.test(e.nodeValue)&&c.push(e))}c.forEach(e=>{const t=document.createDocumentFragment();e.nodeValue.split(r).forEach((e,o)=>{if(e)if(o%2==1){const o=document.createElement("span");o.className="highlight-term",o.textContent=e,t.appendChild(o)}else t.appendChild(document.createTextNode(e))}),e.parentNode&&e.parentNode.replaceChild(t,e)})},S=e=>{const t=void 0!==e?e:n.value,c=a(t),s=c.length>0;let p=0;i.forEach(e=>{const t=e.querySelector(".accordion-header .faq-question")||e.querySelector(".faq-question"),o=h(e),n=a(t?.textContent||""),r=a(o?.textContent||""),i=a(e.dataset.keywords||"");if(!(!s||n.includes(c)||r.includes(c)||i.includes(c)))return e.hidden=!0,void(e.style.display="none");p+=1,e.hidden=!1,e.style.display="",w(t,s?c:""),w(o,s?c:""),s&&!(e=>{if(window.Accordion&&l&&e.id){const t=window.Accordion.isOpen(l,e.id);if("boolean"==typeof t)return t}const t=f(e);return e.classList.contains("is-open")||t&&"true"===t.getAttribute("aria-expanded")})(e)&&(y(e),e.dataset.openedBySearch="true"),!s&&e.dataset.openedBySearch&&(m(e),delete e.dataset.openedBySearch)}),d&&(d.hidden=0!==p,d.style.display=0===p?"block":"none"),r.style.display=s?"block":"none",((e,t)=>{const a=i.length,n=String(e||"").trim();u.textContent=n?0===t?o.noResult(n):o.matchCount(t,n):o.showAll(a)})(t,p)};let b=null;if(n.addEventListener("input",()=>{clearTimeout(b),b=setTimeout(()=>S(),280)}),n.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),n.value="",S(""),n.focus())}),r.addEventListener("click",()=>{n.value="",S(""),n.focus()}),c&&c.addEventListener("click",()=>{i.forEach(e=>{p(e)&&(y(e),delete e.dataset.openedBySearch)}),c.setAttribute("aria-pressed","true"),s&&s.setAttribute("aria-pressed","false")}),s&&s.addEventListener("click",()=>{i.forEach(e=>{p(e)&&(m(e),delete e.dataset.openedBySearch)}),s.setAttribute("aria-pressed","true"),c&&c.setAttribute("aria-pressed","false")}),e.querySelectorAll(".copy-faq-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const a=e.dataset.link;if(!a)return;const n=window.location.origin+window.location.pathname+a;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(()=>{const t=e.innerHTML;e.innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',e.classList.add("copied"),window.createToast(o.copySuccess),setTimeout(()=>{e.innerHTML=t,e.classList.remove("copied")},1800)}).catch(()=>window.createToast(o.copyFailed)):window.createToast(o.copyUnsupported)})}),e.querySelectorAll(".faq-item").forEach(e=>{const t=`faq-feedback-${e.id}`,o=localStorage.getItem(t);if(!o)return;const a=e.querySelector(`.btn-feedback.${o}`);a&&a.classList.add("active")}),e.querySelectorAll(".btn-feedback").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const a=e.closest(".faq-feedback"),n=e.closest(".faq-item");if(!a||!n)return;a.querySelectorAll(".btn-feedback").forEach(e=>{e.classList.remove("active")}),e.classList.add("active");const r=e.classList.contains("up")?"up":"down";localStorage.setItem(`faq-feedback-${n.id}`,r);const i=a.querySelector(".feedback-label");if(i){const t=i.dataset.originalText||i.textContent||"";i.dataset.originalText=t,i.textContent=o.feedbackSaved,setTimeout(()=>{i.textContent=t,e.classList.remove("active")},3e3)}window.createToast(o.feedbackSaved)})}),window.location.hash){const t=window.location.hash.slice(1),o=window.CSS&&"function"==typeof window.CSS.escape?window.CSS.escape(t):t.replace(/([ #;?%&,.+*~':"!^$[\]()=>|/@])/g,"\\$1"),a=e.querySelector(`#${o}`);a&&a.classList.contains("faq-item")&&setTimeout(()=>{y(a),a.scrollIntoView({behavior:"smooth",block:"center"})},360)}S("")})}();
//# sourceMappingURL=faq-search.min.js.map