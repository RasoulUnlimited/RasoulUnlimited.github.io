document.addEventListener("DOMContentLoaded",()=>{let l=document.querySelectorAll(".faq-item");var e=document.querySelectorAll(".faq-navigation a");let t=document.getElementById("faq-search"),a=document.getElementById("clear-search"),o=document.querySelectorAll(".faq-section"),n=(e.forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.category;"function"==typeof gtag&&gtag("event","faq_nav_click",{event_category:"FAQ Navigation",event_label:"Clicked category: "+e,value:1}),"function"==typeof hj&&hj("event","faq_nav_clicked_category_"+e.replace(/\s/g,"_").toLowerCase())})}),document.querySelectorAll(".button-link").forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.ctaType;"function"==typeof gtag&&gtag("event","faq_cta_click",{event_category:"FAQ Call to Action",event_label:"CTA Clicked: "+e,value:1}),"function"==typeof hj&&hj("event","faq_cta_clicked_"+e)})}),document.querySelectorAll(".faq-answer .text-link").forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.linkType;"function"==typeof gtag&&gtag("event","faq_text_link_click",{event_category:"FAQ Internal Link",event_label:"Text link clicked: "+e,value:1}),"function"==typeof hj&&hj("event","faq_text_link_clicked_"+e)})}),t.addEventListener("input",()=>{let l=t.value.trim().toLowerCase(),r=(0<l.length?a.style.display="block":a.style.display="none",0);o.forEach(e=>{let n=!1;e.querySelectorAll(".faq-item").forEach(e=>{var t=e.querySelector("summary").textContent.toLowerCase(),a=e.querySelector(".faq-answer"),a=a?a.textContent.toLowerCase():"",o=e.dataset.keywords?e.dataset.keywords.toLowerCase():"";t.includes(l)||a.includes(l)||o.includes(l)?(e.style.display="block",n=!0,r++,!e.open&&!e.hasAttribute("data-opened-by-user")&&(e.open=!0,e.setAttribute("data-opened-by-search","true"),t=e.querySelector(".faq-answer"))&&(t.style.maxHeight=t.scrollHeight+"px",t.style.paddingTop="1.6rem",t.style.paddingBottom="2.8rem",t.style.opacity="1")):(e.style.display="none",e.open&&e.hasAttribute("data-opened-by-search")&&(e.open=!1,(a=e.querySelector(".faq-answer"))&&(a.style.maxHeight="0px",a.style.paddingTop="0",a.style.paddingBottom="0",a.style.opacity="0"),e.removeAttribute("data-opened-by-search")))}),n?e.style.display="block":e.style.display="none"}),"function"==typeof gtag&&gtag("event","faq_search",{event_category:"FAQ Search",search_term:l,results_count:r}),"function"==typeof hj&&hj("event","faq_searched_"+l.replace(/\s/g,"_").toLowerCase())}),a.addEventListener("click",()=>{t.value="",a.style.display="none",l.forEach(e=>{var t;e.style.display="block",e.open&&e.hasAttribute("data-opened-by-search")&&(e.open=!1,(t=e.querySelector(".faq-answer"))&&(t.style.maxHeight="0px",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.opacity="0"),e.removeAttribute("data-opened-by-search"))}),o.forEach(e=>{e.style.display="block"}),"function"==typeof gtag&&gtag("event","faq_search_cleared",{event_category:"FAQ Search",event_label:"Search input cleared"}),"function"==typeof hj&&hj("event","faq_search_cleared")}),l.forEach(a=>{let t=a.querySelector("summary"),o=a.querySelector(".faq-answer"),n=a.dataset.questionId;o&&(o.style.maxHeight="0px",o.style.overflow="hidden",o.style.transition="max-height 0.4s var(--ease-bezier), padding 0.4s var(--ease-bezier), opacity 0.4s ease-out",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",a.open)&&(o.style.maxHeight=o.scrollHeight+"px",o.style.paddingTop="1.6rem",o.style.paddingBottom="2.8rem",o.style.opacity="1"),t.addEventListener("click",e=>{"A"===e.target.tagName?(e.preventDefault(),window.location.href=e.target.href):(e.preventDefault(),e=a.open,l.forEach(e=>{var t;e!==a&&e.open&&!e.hasAttribute("data-opened-by-search")&&(e.open=!1,e.removeAttribute("data-opened-by-user"),(t=e.querySelector(".faq-answer"))&&(t.style.maxHeight="0px",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.opacity="0"),"function"==typeof gtag&&gtag("event","faq_auto_collapse",{event_category:"FAQ Interaction",event_label:"Question auto-collapsed: "+e.dataset.questionId,question_text:e.querySelector("summary").textContent.trim()}),"function"==typeof hj)&&hj("event","faq_auto_collapsed_"+e.dataset.questionId)}),e?(o?(o.style.maxHeight="0px",o.style.paddingTop="0",o.style.paddingBottom="0",o.style.opacity="0",setTimeout(()=>{a.open=!1},400)):a.open=!1,"function"==typeof gtag&&gtag("event","faq_collapse",{event_category:"FAQ Interaction",event_label:"Question collapsed: "+n,question_text:t.textContent.trim()}),"function"==typeof hj&&hj("event","faq_collapsed_"+n),a.removeAttribute("data-opened-by-search"),a.removeAttribute("data-opened-by-user")):(a.open=!0,o&&(o.style.maxHeight=o.scrollHeight+"px",o.style.paddingTop="1.6rem",o.style.paddingBottom="2.8rem",o.style.opacity="1"),setTimeout(()=>{var e=a.getBoundingClientRect();(e.top<0||e.bottom>window.innerHeight)&&a.scrollIntoView({behavior:"smooth",block:"nearest"})},450),"function"==typeof gtag&&gtag("event","faq_expand",{event_category:"FAQ Interaction",event_label:"Question expanded: "+n,question_text:t.textContent.trim()}),"function"==typeof hj&&hj("event","faq_expanded_"+n),a.setAttribute("data-opened-by-user","true"),a.removeAttribute("data-opened-by-search")))}),t.addEventListener("focus",()=>{t.style.outline=`3px solid ${getComputedStyle(document.documentElement).getPropertyValue("--primary-blue")}66`,t.style.outlineOffset="5px"}),t.addEventListener("blur",()=>{t.style.outline="none",t.style.outlineOffset="0"})}),document.querySelector(".page-header")),r=document.querySelector(".main-content");n&&(n.style.opacity="0",n.style.transform="translateY(-20px)",setTimeout(()=>{n.style.transition="opacity 1s ease-out, transform 1s ease-out",n.style.opacity="1",n.style.transform="translateY(0)"},100)),r&&(r.style.opacity="0",r.style.transform="translateY(20px)",setTimeout(()=>{r.style.transition="opacity 1s ease-out, transform 1s ease-out",r.style.opacity="1",r.style.transform="translateY(0)"},300))});