<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlimited Web Proxy</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f0f0; padding: 20px; text-align: center; }
        input { width: 80%; padding: 10px; margin: 10px 0; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        .proxy-link { margin: 10px; display: block; }
    </style>
</head>
<body>
    <h2>Unlimited Web Proxy</h2>
    <p>Ù„ÛŒÙ†Ú© Ø³Ø§ÛŒØª ÙÛŒÙ„ØªØ±Ø´Ø¯Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
    <input type="text" id="urlInput" placeholder="https://example.com">
    <button onclick="generateProxies()">Ø³Ø§Ø®Øª Ù„ÛŒÙ†Ú© Ø¨Ø¯ÙˆÙ† ÙÛŒÙ„ØªØ±</button>
    <div id="result"></div>

    <script>
        const FIXED_S = "YjdMaGNkQXh5bjh2allsMWRlZXBnRGRFQnZVVkZsU3gvb1Z3SVhvM0pNODFyMGFMUTUzZHNNYWEzVHIwdzhZb0tHM1VORWY0bE54b2psbjd4Sm1ZN2JHNitZOFV6OHFQa1VmQkVOaWxjN3FVbkE5UzhvTXFRelBibktEeVVwQjg%3D";
        const PROXY_IPS = [
            "185.16.38.122", "185.16.38.230", "185.16.38.114",
            "95.214.53.28", "51.159.194.214", "51.159.111.51"
        ];

        function makeProxyLink(url, ip) {
            try {
                const r_bytes = btoa(url).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '') + '%3D';
                return `https://${ip}/__cpi.php?s=${FIXED_S}&r=${r_bytes}&__cpo=1`;
            } catch (e) {
                return url;
            }
        }

        function generateProxies() {
            let url = document.getElementById('urlInput').value.trim();
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            if (!url.match(/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/)) {
                alert('Ù„ÛŒÙ†Ú© Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!');
                return;
            }

            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>âš ï¸ Ù‡Ø± Ù„ÛŒÙ†Ú© ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ù†ÙØ± Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª.</p>';
            PROXY_IPS.forEach((ip, index) => {
                const proxyUrl = makeProxyLink(url, ip);
                resultDiv.innerHTML += `<a href="${proxyUrl}" class="proxy-link">ğŸŒ Ø³Ø±ÙˆØ± Ø´Ù…Ø§Ø±Ù‡ ${index + 1}</a>`;
            });

            // Ø§Ø¯ØºØ§Ù… Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù…: Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ø§Ù¾
            Telegram.WebApp.MainButton.setText('Ø¨Ø³ØªÙ†').show().onClick(() => Telegram.WebApp.close());
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ØªÙ„Ú¯Ø±Ø§Ù… Mini App
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
    </script>
</body>
</html>
